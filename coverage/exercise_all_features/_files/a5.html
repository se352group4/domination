<HTML><HEAD><META CONTENT="text/html; charset=ISO-8859-1" HTTP-EQUIV="Content-Type"/><TITLE>EMMA Coverage Report</TITLE><STYLE TYPE="text/css"> TABLE,TD,TH {border-style:solid; border-color:black;} TD,TH {background:white;margin:0;line-height:100%;padding-left:0.5em;padding-right:0.5em;} TD {border-width:0 1px 0 0;} TH {border-width:1px 1px 1px 0;} TR TD.h {color:red;} TABLE {border-spacing:0; border-collapse:collapse;border-width:0 0 1px 1px;} P,H1,H2,H3,TH {font-family:verdana,arial,sans-serif;font-size:10pt;} TD {font-family:courier,monospace;font-size:10pt;} TABLE.hdft {border-spacing:0;border-collapse:collapse;border-style:none;} TABLE.hdft TH,TABLE.hdft TD {border-style:none;line-height:normal;} TABLE.hdft TH.tl,TABLE.hdft TD.tl {background:#6699CC;color:white;} TABLE.hdft TD.nv {background:#6633DD;color:white;} .nv A:link {color:white;} .nv A:visited {color:white;} .nv A:active {color:yellow;} TABLE.hdft A:link {color:white;} TABLE.hdft A:visited {color:white;} TABLE.hdft A:active {color:yellow;} .in {color:#356085;} TABLE.s TD {padding-left:0.25em;padding-right:0.25em;} TABLE.s TD.l {padding-left:0.25em;padding-right:0.25em;text-align:right;background:#F0F0F0;} TABLE.s TR.z TD {background:#FF9999;} TABLE.s TR.p TD {background:#FFFF88;} TABLE.s TR.c TD {background:#CCFFCC;} A:link {color:#0000EE;text-decoration:none;} A:visited {color:#0000EE;text-decoration:none;} A:hover {color:#0000EE;text-decoration:underline;} TABLE.cn {border-width:0 0 1px 0;} TABLE.s {border-width:1px 0 1px 1px;} TD.h {color:red;border-width:0 1px 0 0;} TD.f {border-width:0 1px 0 1px;} TD.hf {color:red;border-width:0 1px 0 1px;} TH.f {border-width:1px 1px 1px 1px;} TR.cis TD {background:#F0F0F0;} TR.cis TD {border-width:1px 1px 1px 0;} TR.cis TD.h {color:red;border-width:1px 1px 1px 0;} TR.cis TD.f {border-width:1px 1px 1px 1px;} TR.cis TD.hf {color:red;border-width:1px 1px 1px 1px;} TD.b {border-style:none;background:transparent;line-height:50%;}  TD.bt {border-width:1px 0 0 0;background:transparent;line-height:50%;} TR.o TD {background:#F0F0F0;}TABLE.it {border-style:none;}TABLE.it TD,TABLE.it TH {border-style:none;}</STYLE></HEAD><BODY><TABLE WIDTH="100%" CLASS="hdft" CELLSPACING="0"><TR><TH CLASS="tl"><A HREF="http://emma.sourceforge.net/">EMMA</A> Coverage Report (generated Sat Nov 12 23:58:57 EST 2016)</TH></TR><TR><TD CLASS="nv">[<A HREF="../index.html">all classes</A>][<A HREF="1e.html">net.yura.domination.engine.core</A>]</TD></TR></TABLE><H2>COVERAGE SUMMARY FOR SOURCE FILE [<SPAN CLASS="in">RiskGame.java</SPAN>]</H2><TABLE WIDTH="100%" CELLSPACING="0"><TR><TH>name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD>RiskGame.java</TD><TD>100% (1/1)</TD><TD>78%  (91/116)</TD><TD CLASS="h">74%  (3369/4546)</TD><TD CLASS="h">76%  (725.1/949)</TD></TR></TABLE><H3>COVERAGE BREAKDOWN BY CLASS AND METHOD</H3><TABLE WIDTH="100%" CLASS="cn" CELLSPACING="0"><TR><TH CLASS="f">name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#0">RiskGame</A></TD><TD>100% (1/1)</TD><TD>78%  (91/116)</TD><TD CLASS="h">74%  (3369/4546)</TD><TD CLASS="h">76%  (725.1/949)</TD></TR><TR><TD CLASS="f"><A HREF="#1">HSBtoRGB (float, float, float): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/210)</TD><TD CLASS="h">0%   (0/33)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2">endTrade (): boolean</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/18)</TD><TD CLASS="h">0%   (0/6)</TD></TR><TR><TD CLASS="f"><A HREF="#3">getClosestCountry (int, int): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/34)</TD><TD CLASS="h">0%   (0/8)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4">getCommands (): Vector</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#5">getMapFile (): String</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6">getNoCards (): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#7">getNoContinents (): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#8">getPlayer (String): Player</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/21)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR><TD CLASS="f"><A HREF="#9">getPlayersStats (): Vector</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/19)</TD><TD CLASS="h">0%   (0/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#a">getProperties (): Map</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#b">getRandomColor (): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#c">getRandomCountry (): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/79)</TD><TD CLASS="h">0%   (0/15)</TD></TR><TR><TD CLASS="f"><A HREF="#d">isRecycleCards (): boolean</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#e">setCardMode (int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#f">setCircleSize (int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#10">setCommands (Vector): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#11">setContinents (Continent []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#12">setCountries (Country []): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#13">setIntProperty (String, int, int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/17)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#14">setMapName (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/4)</TD></TR><TR><TD CLASS="f"><A HREF="#15">setMemoryLoad (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/13)</TD><TD CLASS="h">0%   (0/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#16">setPreviewPic (String): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#17">setVersion (int): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#18">setupNewMap (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/37)</TD><TD CLASS="h">0%   (0/10)</TD></TR><TR><TD CLASS="f"><A HREF="#19">testMap (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/117)</TD><TD CLASS="h">0%   (0/14)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1a">recycleUsedCards (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">38%  (9/24)</TD><TD CLASS="h">42%  (2.5/6)</TD></TR><TR><TD CLASS="f"><A HREF="#1b">getNumber (String): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">50%  (3/6)</TD><TD CLASS="h">33%  (1/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1c">getTradeAbsValue (String, String, String, int): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">55%  (105/190)</TD><TD CLASS="h">50%  (18.7/37)</TD></TR><TR><TD CLASS="f"><A HREF="#1d">readObject (ObjectInputStream): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">59%  (19/32)</TD><TD CLASS="h">60%  (6/10)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1e">checkPlayerWon (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">65%  (127/196)</TD><TD CLASS="h">70%  (29.9/43)</TD></TR><TR><TD CLASS="f"><A HREF="#1f">continuePlay (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">69%  (20/29)</TD><TD CLASS="h">66%  (4.6/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#20">getIntProperty (String, int): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">69%  (9/13)</TD><TD CLASS="h">75%  (3/4)</TD></TR><TR><TD CLASS="f"><A HREF="#21">loadCards (boolean): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">76%  (326/430)</TD><TD>86%  (61.1/71)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#22">trade (Card, Card, Card): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">76%  (68/89)</TD><TD>87%  (15.7/18)</TD></TR><TR><TD CLASS="f"><A HREF="#23">startGame (int, int, boolean, boolean): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">78%  (88/113)</TD><TD CLASS="h">78%  (18.7/24)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#24">loadMap (boolean, BufferedReader): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">79%  (343/433)</TD><TD>92%  (75.1/82)</TD></TR><TR><TD CLASS="f"><A HREF="#25">endAttack (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>82%  (9/11)</TD><TD CLASS="h">75%  (3/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#26">noMove (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>82%  (9/11)</TD><TD CLASS="h">75%  (3/4)</TD></TR><TR><TD CLASS="f"><A HREF="#27">rollD (int): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>85%  (33/39)</TD><TD>82%  (6.5/8)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#28">rollA (int): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>86%  (36/42)</TD><TD>84%  (7.5/9)</TD></TR><TR><TD CLASS="f"><A HREF="#29">moveAll (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>87%  (13/15)</TD><TD CLASS="h">67%  (2/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2a">checkPlayerOwnesContinentForMission (Continent, int): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>87%  (20/23)</TD><TD CLASS="h">78%  (3.9/5)</TD></TR><TR><TD CLASS="f"><A HREF="#2b">getCountryInt (int): Country</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>88%  (14/16)</TD><TD>88%  (1.8/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2c">getBestTrade (List, Card []): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>88%  (217/247)</TD><TD>90%  (48.8/54)</TD></TR><TR><TD CLASS="f"><A HREF="#2d">canEndTrade (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>89%  (16/18)</TD><TD CLASS="h">75%  (3/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2e">delPlayer (String): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>90%  (37/41)</TD><TD>80%  (8/10)</TD></TR><TR><TD CLASS="f"><A HREF="#2f">retreat (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>90%  (19/21)</TD><TD>86%  (6/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#30">setMapfile (String): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>92%  (160/174)</TD><TD>93%  (34.6/37)</TD></TR><TR><TD CLASS="f"><A HREF="#31">moveArmies (int): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>92%  (46/50)</TD><TD>88%  (7.9/9)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#32">checkTrade (Card, Card, Card): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>93%  (14/15)</TD><TD>93%  (0.9/1)</TD></TR><TR><TD CLASS="f"><A HREF="#33">setCardsfile (String): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>95%  (94/99)</TD><TD>97%  (24.3/25)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#34">moveArmy (Country, Country, int): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>95%  (42/44)</TD><TD>92%  (11/12)</TD></TR><TR><TD CLASS="f"><A HREF="#35">addPlayer (int, String, int, String): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>96%  (46/48)</TD><TD>86%  (6/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#36">setCapital (Country): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>96%  (47/49)</TD><TD>88%  (7/8)</TD></TR><TR><TD CLASS="f"><A HREF="#37">placeArmy (Country, int): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>96%  (109/113)</TD><TD>95%  (28.6/30)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#38">canContinue (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>97%  (30/31)</TD><TD>99%  (6.9/7)</TD></TR><TR><TD CLASS="f"><A HREF="#39">endGo (): Player</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>99%  (172/174)</TD><TD>96%  (27/28)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3a">battle (int [], int []): int []</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>99%  (260/263)</TD><TD>98%  (51/52)</TD></TR><TR><TD CLASS="f"><A HREF="#0">&lt;static initializer&gt;</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (12/12)</TD><TD>100% (2/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3c">NoEmptyCountries (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (32/32)</TD><TD>100% (8/8)</TD></TR><TR><TD CLASS="f"><A HREF="#3d">RiskGame (): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (44/44)</TD><TD>100% (13/13)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#3e">addCommand (String): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (2/2)</TD></TR><TR><TD CLASS="f"><A HREF="#3f">attack (Country, Country): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (52/52)</TD><TD>100% (15/15)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#40">canTrade (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (11/11)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#41">findCardAndRemoveIt (String): Card</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (56/56)</TD><TD>100% (13/13)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#42">getAttacker (): Country</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#43">getAttackerDice (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#44">getBattleRounds (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#45">getCard (Map, String): Card</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (14/14)</TD><TD>100% (4/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#46">getCardMode (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#47">getCards (): Vector</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#48">getCards (String, String, String): Card []</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (90/90)</TD><TD>100% (14/14)</TD></TR><TR><TD CLASS="f"><A HREF="#49">getCardsFile (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4a">getCircleSize (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (5/5)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#4b">getConnectedEmpire (List, List, List, Player): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (42/42)</TD><TD>100% (7/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4c">getConnectedEmpire (Player): List</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (46/46)</TD><TD>100% (12/12)</TD></TR><TR><TD CLASS="f"><A HREF="#4d">getContinents (): Continent []</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4e">getCountries (): Country []</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#4f">getCurrentPlayer (): Player</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#50">getDefaultCards (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#51">getDefaultMap (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#52">getDefender (): Country</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#53">getDefenderDice (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#54">getDesrvedCard (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (37/37)</TD><TD>100% (5/5)</TD></TR><TR><TD CLASS="f"><A HREF="#55">getGameMode (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#56">getImageMap (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#57">getImagePic (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#58">getMapName (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#59">getMaxDefendDice (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5a">getMissionContinentfromString (String): Continent</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (20/20)</TD><TD>100% (6/6)</TD></TR><TR><TD CLASS="f"><A HREF="#5b">getMissions (): Vector</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5c">getMustMove (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#5d">getNewCardState (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (32/32)</TD><TD>100% (7/7)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#5e">getNoAttackDice (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (13/13)</TD><TD>100% (2/2)</TD></TR><TR><TD CLASS="f"><A HREF="#5f">getNoContinentsOwned (Player): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (21/21)</TD><TD>100% (5/5)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#60">getNoCountries (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (4/4)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#61">getNoDefendDice (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (13/13)</TD><TD>100% (2/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#62">getNoMissions (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (4/4)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#63">getNoPlayers (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (4/4)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#64">getPlayers (): Vector</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#65">getPreviewPic (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#66">getRandomPlayer (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (7/7)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#67">getSetupDone (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (10/10)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#68">getState (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#69">getTradeCap (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6a">getUsedCards (): Vector</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#6b">getVersion (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (5/5)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6c">isCapturedCountry (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#6d">loadGame (String): RiskGame</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (18/18)</TD><TD>100% (6/6)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6e">loadMap (): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (5/5)</TD><TD>100% (2/2)</TD></TR><TR><TD CLASS="f"><A HREF="#6f">rollDice (int): int []</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (62/62)</TD><TD>100% (12/12)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#70">saveGame (OutputStream): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (11/11)</TD><TD>100% (4/4)</TD></TR><TR><TD CLASS="f"><A HREF="#71">setCurrentPlayer (int): Player</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (10/10)</TD><TD>100% (2/2)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#72">setDefaultMapAndCards (String, String): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (5/5)</TD><TD>100% (3/3)</TD></TR><TR><TD CLASS="f"><A HREF="#73">shuffleCountries (): List</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (11/11)</TD><TD>100% (3/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#74">workOutEndGoStats (Player): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (28/28)</TD><TD>100% (7/7)</TD></TR></TABLE><P></P><TABLE WIDTH="100%" CLASS="s" CELLSPACING="0"><TR><TD CLASS="l">1</TD><TD>// Yura Mamyrin, Group D</TD></TR><TR><TD CLASS="l">2</TD><TD> </TD></TR><TR><TD CLASS="l">3</TD><TD>package net.yura.domination.engine.core;</TD></TR><TR><TD CLASS="l">4</TD><TD> </TD></TR><TR><TD CLASS="l">5</TD><TD>import java.io.BufferedReader;</TD></TR><TR><TD CLASS="l">6</TD><TD>import java.io.IOException;</TD></TR><TR><TD CLASS="l">7</TD><TD>import java.io.InputStream;</TD></TR><TR><TD CLASS="l">8</TD><TD>import java.io.ObjectInputStream;</TD></TR><TR><TD CLASS="l">9</TD><TD>import java.io.ObjectOutputStream;</TD></TR><TR><TD CLASS="l">10</TD><TD>import java.io.OutputStream;</TD></TR><TR><TD CLASS="l">11</TD><TD>import java.io.Serializable;</TD></TR><TR><TD CLASS="l">12</TD><TD>import java.util.ArrayList;</TD></TR><TR><TD CLASS="l">13</TD><TD>import java.util.Arrays;</TD></TR><TR><TD CLASS="l">14</TD><TD>import java.util.Collections;</TD></TR><TR><TD CLASS="l">15</TD><TD>import java.util.HashMap;</TD></TR><TR><TD CLASS="l">16</TD><TD>import java.util.List;</TD></TR><TR><TD CLASS="l">17</TD><TD>import java.util.Map;</TD></TR><TR><TD CLASS="l">18</TD><TD>import java.util.Random;</TD></TR><TR><TD CLASS="l">19</TD><TD>import java.util.StringTokenizer;</TD></TR><TR><TD CLASS="l">20</TD><TD>import java.util.Vector;</TD></TR><TR><TD CLASS="l">21</TD><TD> </TD></TR><TR><TD CLASS="l">22</TD><TD>import net.yura.domination.engine.ColorUtil;</TD></TR><TR><TD CLASS="l">23</TD><TD>import net.yura.domination.engine.RiskObjectOutputStream;</TD></TR><TR><TD CLASS="l">24</TD><TD>import net.yura.domination.engine.RiskUtil;</TD></TR><TR><TD CLASS="l">25</TD><TD>import net.yura.domination.engine.translation.MapTranslator;</TD></TR><TR><TD CLASS="l">26</TD><TD>import net.yura.domination.engine.translation.TranslationBundle;</TD></TR><TR><TD CLASS="l">27</TD><TD> </TD></TR><TR><TD CLASS="l">28</TD><TD>/**</TD></TR><TR><TD CLASS="l">29</TD><TD> * &lt;p&gt; Risk Game Main Class &lt;/p&gt;</TD></TR><TR><TD CLASS="l">30</TD><TD> * @author Yura Mamyrin</TD></TR><TR><TD CLASS="l">31</TD><TD> */</TD></TR><TR><TD CLASS="l"><A NAME="0">32</A></TD><TD> </TD></TR><TR><TD CLASS="l">33</TD><TD>public class RiskGame implements Serializable { // transient</TD></TR><TR><TD CLASS="l">34</TD><TD> </TD></TR><TR><TD CLASS="l">35</TD><TD>        private static final long serialVersionUID = 8L;</TD></TR><TR CLASS="c"><TD CLASS="l">36</TD><TD>        public final static String SAVE_VERSION = String.valueOf(serialVersionUID);</TD></TR><TR><TD CLASS="l">37</TD><TD> </TD></TR><TR><TD CLASS="l">38</TD><TD>        public final static String NETWORK_VERSION = &#34;12&#34;;</TD></TR><TR><TD CLASS="l">39</TD><TD> </TD></TR><TR><TD CLASS="l">40</TD><TD>        public final static int MAX_PLAYERS = 6;</TD></TR><TR CLASS="c"><TD CLASS="l">41</TD><TD>        public final static Continent ANY_CONTINENT = new Continent(&#34;any&#34;,&#34;any&#34;, 0, 0);</TD></TR><TR><TD CLASS="l">42</TD><TD> </TD></TR><TR><TD CLASS="l">43</TD><TD>        public final static int STATE_NEW_GAME        = 0;</TD></TR><TR><TD CLASS="l">44</TD><TD>        public final static int STATE_TRADE_CARDS     = 1;</TD></TR><TR><TD CLASS="l">45</TD><TD>        public final static int STATE_PLACE_ARMIES    = 2;</TD></TR><TR><TD CLASS="l">46</TD><TD>        public final static int STATE_ATTACKING       = 3;</TD></TR><TR><TD CLASS="l">47</TD><TD>        public final static int STATE_ROLLING         = 4;</TD></TR><TR><TD CLASS="l">48</TD><TD>        public final static int STATE_BATTLE_WON      = 5;</TD></TR><TR><TD CLASS="l">49</TD><TD>        public final static int STATE_FORTIFYING      = 6;</TD></TR><TR><TD CLASS="l">50</TD><TD>        public final static int STATE_END_TURN        = 7;</TD></TR><TR><TD CLASS="l">51</TD><TD>        public final static int STATE_GAME_OVER       = 8;</TD></TR><TR><TD CLASS="l">52</TD><TD>        public final static int STATE_SELECT_CAPITAL  = 9;</TD></TR><TR><TD CLASS="l">53</TD><TD>        public final static int STATE_DEFEND_YOURSELF = 10;</TD></TR><TR><TD CLASS="l">54</TD><TD> </TD></TR><TR><TD CLASS="l">55</TD><TD> </TD></TR><TR><TD CLASS="l">56</TD><TD>        public final static int MODE_DOMINATION     = 0;</TD></TR><TR><TD CLASS="l">57</TD><TD>        public final static int MODE_CAPITAL        = 2;</TD></TR><TR><TD CLASS="l">58</TD><TD>        public final static int MODE_SECRET_MISSION = 3;</TD></TR><TR><TD CLASS="l">59</TD><TD> </TD></TR><TR><TD CLASS="l">60</TD><TD> </TD></TR><TR><TD CLASS="l">61</TD><TD>        public final static int CARD_INCREASING_SET = 0;</TD></TR><TR><TD CLASS="l">62</TD><TD>        public final static int CARD_FIXED_SET = 1;</TD></TR><TR><TD CLASS="l">63</TD><TD>        public final static int CARD_ITALIANLIKE_SET = 2;</TD></TR><TR><TD CLASS="l">64</TD><TD> </TD></TR><TR><TD CLASS="l">65</TD><TD>        public final static int MAX_CARDS = 5;</TD></TR><TR><TD CLASS="l">66</TD><TD> </TD></TR><TR><TD CLASS="l">67</TD><TD>/*</TD></TR><TR><TD CLASS="l">68</TD><TD> </TD></TR><TR><TD CLASS="l">69</TD><TD>//        public final static int MODE_DOMINATION_2   = 1;</TD></TR><TR><TD CLASS="l">70</TD><TD> </TD></TR><TR><TD CLASS="l">71</TD><TD>gameState:</TD></TR><TR><TD CLASS="l">72</TD><TD> </TD></TR><TR><TD CLASS="l">73</TD><TD>nogame        (-1 in gui)                (current possible commands are: newgame, loadgame, closegame, savegame)</TD></TR><TR><TD CLASS="l">74</TD><TD> </TD></TR><TR><TD CLASS="l">75</TD><TD>9 - select capital                (current possible commands are: capital)</TD></TR><TR><TD CLASS="l">76</TD><TD>10 - defend yourself!                (current possible commands are: roll)</TD></TR><TR><TD CLASS="l">77</TD><TD>0 - new game just created        (current possible commands are: newplayer, delplayer, startgame)</TD></TR><TR><TD CLASS="l">78</TD><TD>1 - trade cards                        (current possible commands are: showcards, trade, notrade)</TD></TR><TR><TD CLASS="l">79</TD><TD>2 - placing new armies                (current possible commands are: placearmies, autoplace)</TD></TR><TR><TD CLASS="l">80</TD><TD>3 - attacking                         (current possible commands are: attack endattack)</TD></TR><TR><TD CLASS="l">81</TD><TD>4 - rolling                        (current possible commands are: roll retreat)</TD></TR><TR><TD CLASS="l">82</TD><TD>5 - you have won!                (current possible commands are: move)</TD></TR><TR><TD CLASS="l">83</TD><TD>6 - fortifying                        (current possible commands are: movearmy nomove)</TD></TR><TR><TD CLASS="l">84</TD><TD>7 - endturn                        (current possible commands are: endgo)</TD></TR><TR><TD CLASS="l">85</TD><TD>8 - game is over                (current possible commands are: continue)</TD></TR><TR><TD CLASS="l">86</TD><TD> </TD></TR><TR><TD CLASS="l">87</TD><TD>gameMode:</TD></TR><TR><TD CLASS="l">88</TD><TD>0 - WORLD DOMINATION RISK        - 3 to 6 players</TD></TR><TR><TD CLASS="l">89</TD><TD>//1 - WORLD DOMINATION RISK        - 2 player</TD></TR><TR><TD CLASS="l">90</TD><TD>2 - CAPITAL RISK                - 3 to 6 players</TD></TR><TR><TD CLASS="l">91</TD><TD>3 - SECRET MISSION RISK        - 3 to 6 players</TD></TR><TR><TD CLASS="l">92</TD><TD> </TD></TR><TR><TD CLASS="l">93</TD><TD>playerType:</TD></TR><TR><TD CLASS="l">94</TD><TD>0 - human</TD></TR><TR><TD CLASS="l">95</TD><TD>1 - AI (Easy)</TD></TR><TR><TD CLASS="l">96</TD><TD>2 - AI (Hard)</TD></TR><TR><TD CLASS="l">97</TD><TD>3 - AI (Crap)</TD></TR><TR><TD CLASS="l">98</TD><TD> </TD></TR><TR><TD CLASS="l">99</TD><TD>transient - A keyword in the Java programming language that indicates that a field is not part of the serialized form of an object. When an object is serialized, the values of its transient fields are not included in the serial representation, while the values of its non-transient fields are included.</TD></TR><TR><TD CLASS="l">100</TD><TD> </TD></TR><TR><TD CLASS="l">101</TD><TD>*/</TD></TR><TR><TD CLASS="l">102</TD><TD> </TD></TR><TR><TD CLASS="l">103</TD><TD>        private static String defaultMap;</TD></TR><TR><TD CLASS="l">104</TD><TD>        private static String defaultCards;</TD></TR><TR><TD CLASS="l">105</TD><TD> </TD></TR><TR><TD CLASS="l">106</TD><TD> </TD></TR><TR><TD CLASS="l">107</TD><TD> </TD></TR><TR><TD CLASS="l">108</TD><TD> </TD></TR><TR><TD CLASS="l">109</TD><TD> </TD></TR><TR><TD CLASS="l">110</TD><TD> </TD></TR><TR><TD CLASS="l">111</TD><TD> </TD></TR><TR><TD CLASS="l">112</TD><TD> </TD></TR><TR><TD CLASS="l">113</TD><TD> </TD></TR><TR><TD CLASS="l">114</TD><TD> </TD></TR><TR><TD CLASS="l">115</TD><TD> </TD></TR><TR><TD CLASS="l">116</TD><TD> </TD></TR><TR><TD CLASS="l">117</TD><TD>        // ---------------------------------------</TD></TR><TR><TD CLASS="l">118</TD><TD>        // THIS IS THE GAME INFO FOR Serialization</TD></TR><TR><TD CLASS="l">119</TD><TD>        // ---------------------------------------</TD></TR><TR><TD CLASS="l">120</TD><TD> </TD></TR><TR><TD CLASS="l">121</TD><TD>        private Random r; // mmm, not sure where this should go, may stop cheeting when its here</TD></TR><TR><TD CLASS="l">122</TD><TD> </TD></TR><TR><TD CLASS="l">123</TD><TD>        // cant use URL as that stores full URL to the map file on the disk,</TD></TR><TR><TD CLASS="l">124</TD><TD>        // and if the risk install dir changes the saves dont work</TD></TR><TR><TD CLASS="l">125</TD><TD>        private String mapfile;</TD></TR><TR><TD CLASS="l">126</TD><TD>        private String cardsfile;</TD></TR><TR><TD CLASS="l">127</TD><TD>        private int setup;</TD></TR><TR><TD CLASS="l">128</TD><TD> </TD></TR><TR><TD CLASS="l">129</TD><TD>        private Vector Players;</TD></TR><TR><TD CLASS="l">130</TD><TD>        private Country[] Countries;</TD></TR><TR><TD CLASS="l">131</TD><TD>        private Continent[] Continents;</TD></TR><TR><TD CLASS="l">132</TD><TD>        private Vector Cards,usedCards;</TD></TR><TR><TD CLASS="l">133</TD><TD>        private Vector Missions;</TD></TR><TR><TD CLASS="l">134</TD><TD> </TD></TR><TR><TD CLASS="l">135</TD><TD>        private Player currentPlayer;</TD></TR><TR><TD CLASS="l">136</TD><TD>        private int gameState;</TD></TR><TR><TD CLASS="l">137</TD><TD>        private int cardState;</TD></TR><TR><TD CLASS="l">138</TD><TD>        private int mustmove;</TD></TR><TR><TD CLASS="l">139</TD><TD>        private boolean capturedCountry;</TD></TR><TR><TD CLASS="l">140</TD><TD>        private boolean tradeCap;</TD></TR><TR><TD CLASS="l">141</TD><TD>        private int gameMode;</TD></TR><TR><TD CLASS="l">142</TD><TD> </TD></TR><TR><TD CLASS="l">143</TD><TD>        private Country attacker;</TD></TR><TR><TD CLASS="l">144</TD><TD>        private Country defender;</TD></TR><TR><TD CLASS="l">145</TD><TD> </TD></TR><TR><TD CLASS="l">146</TD><TD>        private int attackerDice;</TD></TR><TR><TD CLASS="l">147</TD><TD>        private int defenderDice;</TD></TR><TR><TD CLASS="l">148</TD><TD> </TD></TR><TR><TD CLASS="l">149</TD><TD>        private transient int battleRounds;</TD></TR><TR><TD CLASS="l">150</TD><TD> </TD></TR><TR><TD CLASS="l">151</TD><TD>        private String ImagePic;</TD></TR><TR><TD CLASS="l">152</TD><TD>        private String ImageMap;</TD></TR><TR><TD CLASS="l">153</TD><TD>        private String previewPic;</TD></TR><TR><TD CLASS="l">154</TD><TD> </TD></TR><TR><TD CLASS="l">155</TD><TD>        private Map properties;</TD></TR><TR><TD CLASS="l">156</TD><TD> </TD></TR><TR><TD CLASS="l">157</TD><TD>        private Vector replayCommands;</TD></TR><TR><TD CLASS="l">158</TD><TD>        private int maxDefendDice;</TD></TR><TR><TD CLASS="l">159</TD><TD>        private int cardMode;</TD></TR><TR><TD CLASS="l">160</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">161</TD><TD>        private boolean runmaptest=false;</TD></TR><TR CLASS="c"><TD CLASS="l">162</TD><TD>        private boolean recycleCards=false;</TD></TR><TR><TD CLASS="l">163</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="3d">164</A></TD><TD> </TD></TR><TR><TD CLASS="l">165</TD><TD>        /**</TD></TR><TR><TD CLASS="l">166</TD><TD>         * Creates a new RiskGame</TD></TR><TR><TD CLASS="l">167</TD><TD>         */</TD></TR><TR CLASS="c"><TD CLASS="l">168</TD><TD>        public RiskGame() throws Exception {</TD></TR><TR><TD CLASS="l">169</TD><TD> </TD></TR><TR><TD CLASS="l">170</TD><TD>                //try {</TD></TR><TR><TD CLASS="l">171</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">172</TD><TD>                        setMapfile(&#34;default&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">173</TD><TD>                        setCardsfile(&#34;default&#34;);</TD></TR><TR><TD CLASS="l">174</TD><TD>                //}</TD></TR><TR><TD CLASS="l">175</TD><TD>                //catch (Exception e) {</TD></TR><TR><TD CLASS="l">176</TD><TD>                //        RiskUtil.printStackTrace(e);</TD></TR><TR><TD CLASS="l">177</TD><TD>                //}</TD></TR><TR><TD CLASS="l">178</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">179</TD><TD>                setup=0; // when setup reaches the number of players it goes into normal mode</TD></TR><TR><TD CLASS="l">180</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">181</TD><TD>                Players = new Vector();</TD></TR><TR><TD CLASS="l">182</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">183</TD><TD>                currentPlayer=null;</TD></TR><TR CLASS="c"><TD CLASS="l">184</TD><TD>                gameState=STATE_NEW_GAME;</TD></TR><TR CLASS="c"><TD CLASS="l">185</TD><TD>                cardState=0;</TD></TR><TR><TD CLASS="l">186</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">187</TD><TD>                replayCommands = new Vector();</TD></TR><TR><TD CLASS="l">188</TD><TD> </TD></TR><TR><TD CLASS="l">189</TD><TD>                //System.out.print(&#34;New Game created\n&#34;); // testing</TD></TR><TR><TD CLASS="l">190</TD><TD> </TD></TR><TR><TD CLASS="l">191</TD><TD>                //simone=true;//false;</TD></TR><TR><TD CLASS="l">192</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">193</TD><TD>                r = new Random();</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="3e">194</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">195</TD><TD> </TD></TR><TR><TD CLASS="l">196</TD><TD>        public void addCommand(String a) {</TD></TR><TR><TD CLASS="l">197</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">198</TD><TD>                replayCommands.add(a);</TD></TR><TR><TD CLASS="l">199</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="4">200</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">201</TD><TD> </TD></TR><TR><TD CLASS="l">202</TD><TD>        public Vector getCommands() {</TD></TR><TR><TD CLASS="l">203</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">204</TD><TD>                return replayCommands;</TD></TR><TR><TD CLASS="l"><A NAME="10">205</A></TD><TD> </TD></TR><TR><TD CLASS="l">206</TD><TD>        }</TD></TR><TR><TD CLASS="l">207</TD><TD> </TD></TR><TR><TD CLASS="l">208</TD><TD>        public void setCommands(Vector replayCommands) {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="59">209</A></TD><TD>                this.replayCommands = replayCommands;</TD></TR><TR CLASS="z"><TD CLASS="l">210</TD><TD>        }</TD></TR><TR><TD CLASS="l">211</TD><TD> </TD></TR><TR><TD CLASS="l">212</TD><TD>        public int getMaxDefendDice() {</TD></TR><TR CLASS="c"><TD CLASS="l">213</TD><TD>                return maxDefendDice;</TD></TR><TR><TD CLASS="l">214</TD><TD>        }</TD></TR><TR><TD CLASS="l">215</TD><TD> </TD></TR><TR><TD CLASS="l">216</TD><TD>        /**</TD></TR><TR><TD CLASS="l">217</TD><TD>         * This adds a player to the game</TD></TR><TR><TD CLASS="l">218</TD><TD>         * @param type Type of game (i.e World Domination, Secret Mission, Capital)</TD></TR><TR><TD CLASS="l">219</TD><TD>         * @param name Name of player</TD></TR><TR><TD CLASS="l"><A NAME="35">220</A></TD><TD>         * @param color Color of player</TD></TR><TR><TD CLASS="l">221</TD><TD>         * @return boolean Returns true if the player is added, returns false if the player can't be added.</TD></TR><TR><TD CLASS="l">222</TD><TD>         */</TD></TR><TR><TD CLASS="l">223</TD><TD>        public boolean addPlayer(int type, String name, int color, String a) {</TD></TR><TR CLASS="c"><TD CLASS="l">224</TD><TD>                if (gameState==STATE_NEW_GAME ) { // &amp;&amp; !name.equals(&#34;neutral&#34;) &amp;&amp; !(color==Color.gray)</TD></TR><TR><TD CLASS="l">225</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">226</TD><TD>                        for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR CLASS="c"><TD CLASS="l">227</TD><TD>                                if (( name.equals(((Player)Players.elementAt(c)).getName() )) || (color ==  ((Player)Players.elementAt(c)).getColor() )) return false;</TD></TR><TR><TD CLASS="l">228</TD><TD>                        }</TD></TR><TR><TD CLASS="l">229</TD><TD> </TD></TR><TR><TD CLASS="l">230</TD><TD>                        //System.out.print(&#34;Player added. Type: &#34; +type+ &#34;\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">231</TD><TD>                        Player player = new Player(type, name, color , a);</TD></TR><TR CLASS="c"><TD CLASS="l">232</TD><TD>                        Players.add(player);</TD></TR><TR CLASS="c"><TD CLASS="l">233</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">234</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">235</TD><TD>                else return false;</TD></TR><TR><TD CLASS="l">236</TD><TD>        }</TD></TR><TR><TD CLASS="l">237</TD><TD> </TD></TR><TR><TD CLASS="l">238</TD><TD>        /**</TD></TR><TR><TD CLASS="l">239</TD><TD>         * This deletes a player in the game</TD></TR><TR><TD CLASS="l"><A NAME="2e">240</A></TD><TD>         * @param name Name of the player</TD></TR><TR><TD CLASS="l">241</TD><TD>         * @return boolean Returns true if the player is deleted, returns false if the player cannot be deleted</TD></TR><TR><TD CLASS="l">242</TD><TD>         */</TD></TR><TR><TD CLASS="l">243</TD><TD>        public boolean delPlayer(String name) {</TD></TR><TR CLASS="c"><TD CLASS="l">244</TD><TD>                if (gameState==STATE_NEW_GAME) {</TD></TR><TR><TD CLASS="l">245</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">246</TD><TD>                        int n=-1;</TD></TR><TR><TD CLASS="l">247</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">248</TD><TD>                        for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR CLASS="c"><TD CLASS="l">249</TD><TD>                                if (name.equals( ((Player)Players.elementAt(c)).getName() )) n=c;</TD></TR><TR><TD CLASS="l">250</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">251</TD><TD>                        if (n==-1) {</TD></TR><TR><TD CLASS="l">252</TD><TD>                                //System.out.print(&#34;Error: No player found\n&#34;); // testing</TD></TR><TR CLASS="z"><TD CLASS="l">253</TD><TD>                                return false;</TD></TR><TR><TD CLASS="l">254</TD><TD>                        }</TD></TR><TR><TD CLASS="l">255</TD><TD>                        else {</TD></TR><TR CLASS="c"><TD CLASS="l">256</TD><TD>                                Players.removeElementAt(n);</TD></TR><TR CLASS="c"><TD CLASS="l">257</TD><TD>                                Players.trimToSize();</TD></TR><TR><TD CLASS="l">258</TD><TD>                                //System.out.print(&#34;Player removed\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">259</TD><TD>                                return true;</TD></TR><TR><TD CLASS="l">260</TD><TD>                        }</TD></TR><TR><TD CLASS="l">261</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">262</TD><TD>                else return false;</TD></TR><TR><TD CLASS="l">263</TD><TD> </TD></TR><TR><TD CLASS="l">264</TD><TD>        }</TD></TR><TR><TD CLASS="l">265</TD><TD> </TD></TR><TR><TD CLASS="l">266</TD><TD>        /**</TD></TR><TR><TD CLASS="l">267</TD><TD>         * Starts the game Risk</TD></TR><TR><TD CLASS="l"><A NAME="23">268</A></TD><TD>         * @param mode This represents the moce of the game: normal, 2 player, capital or mission</TD></TR><TR><TD CLASS="l">269</TD><TD>         */</TD></TR><TR><TD CLASS="l">270</TD><TD>        public void startGame(int mode, int card, boolean recycle, boolean threeDice) throws Exception {</TD></TR><TR><TD CLASS="l">271</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">272</TD><TD>                if (gameState==STATE_NEW_GAME) { //  &amp;&amp; ((mapfile !=null &amp;&amp; cardsfile !=null) || () )</TD></TR><TR><TD CLASS="l">273</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">274</TD><TD>                        gameMode=mode;</TD></TR><TR CLASS="c"><TD CLASS="l">275</TD><TD>                        cardMode=card;</TD></TR><TR><TD CLASS="l">276</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">277</TD><TD>                        recycleCards = recycle;</TD></TR><TR CLASS="c"><TD CLASS="l">278</TD><TD>                        maxDefendDice = threeDice?3:2;</TD></TR><TR><TD CLASS="l">279</TD><TD> </TD></TR><TR><TD CLASS="l">280</TD><TD>                        // 2 player human crap</TD></TR><TR><TD CLASS="l">281</TD><TD>                        //if ( gameMode==1 &amp;&amp; ( !(((Player)Players.elementAt(0)).getType()==0) || !(((Player)Players.elementAt(1)).getType()==0) ) ) { return; }</TD></TR><TR><TD CLASS="l">282</TD><TD> </TD></TR><TR><TD CLASS="l">283</TD><TD> </TD></TR><TR><TD CLASS="l">284</TD><TD>                        // check if things need to be loaded, maybe already loaded, then these will be null</TD></TR><TR CLASS="c"><TD CLASS="l">285</TD><TD>                        if (mapfile!=null &amp;&amp; cardsfile!=null) {</TD></TR><TR><TD CLASS="l">286</TD><TD> </TD></TR><TR><TD CLASS="l">287</TD><TD> </TD></TR><TR><TD CLASS="l">288</TD><TD>                                //try {</TD></TR><TR><TD CLASS="l">289</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">290</TD><TD>                                        loadMap();</TD></TR><TR><TD CLASS="l">291</TD><TD> </TD></TR><TR><TD CLASS="l">292</TD><TD>                                //}</TD></TR><TR><TD CLASS="l">293</TD><TD>                                //catch (Exception e) {</TD></TR><TR><TD CLASS="l">294</TD><TD>                                //        RiskUtil.printStackTrace(e);</TD></TR><TR><TD CLASS="l">295</TD><TD>                                //        return;</TD></TR><TR><TD CLASS="l">296</TD><TD>                                //}</TD></TR><TR><TD CLASS="l">297</TD><TD> </TD></TR><TR><TD CLASS="l">298</TD><TD>                                try {</TD></TR><TR><TD CLASS="l">299</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">300</TD><TD>                                        loadCards(false);</TD></TR><TR><TD CLASS="l">301</TD><TD> </TD></TR><TR><TD CLASS="l">302</TD><TD>                                }</TD></TR><TR CLASS="z"><TD CLASS="l">303</TD><TD>                                catch (Exception e) {</TD></TR><TR><TD CLASS="l">304</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">305</TD><TD>                                        if (runmaptest) {</TD></TR><TR><TD CLASS="l">306</TD><TD> </TD></TR><TR><TD CLASS="l">307</TD><TD>                                                //System.out.println(&#34;LOAD FILE ERROR: &#34; + e.getMessage() + &#34;\n(This normally means you have selected the wrong set of cards for this map)&#34;); // testing</TD></TR><TR><TD CLASS="l">308</TD><TD>                                                //RiskUtil.printStackTrace(e);</TD></TR><TR CLASS="z"><TD CLASS="l">309</TD><TD>                                                throw new Exception(&#34;LOAD FILE ERROR: &#34; + e.getMessage() + &#34;\n(This normally means you have selected the wrong set of cards for this map)&#34;,e);</TD></TR><TR><TD CLASS="l">310</TD><TD> </TD></TR><TR><TD CLASS="l">311</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">312</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">313</TD><TD>                                        return;</TD></TR><TR CLASS="c"><TD CLASS="l">314</TD><TD>                                }</TD></TR><TR><TD CLASS="l">315</TD><TD> </TD></TR><TR><TD CLASS="l">316</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">317</TD><TD>                                if (runmaptest) {</TD></TR><TR><TD CLASS="l">318</TD><TD> </TD></TR><TR><TD CLASS="l">319</TD><TD>                                        //try {</TD></TR><TR CLASS="z"><TD CLASS="l">320</TD><TD>                                                testMap(); // testing maps</TD></TR><TR><TD CLASS="l">321</TD><TD>                                        //}</TD></TR><TR><TD CLASS="l">322</TD><TD>                                        //catch (Exception e) {</TD></TR><TR><TD CLASS="l">323</TD><TD>                                        //        RiskUtil.printStackTrace(e);</TD></TR><TR><TD CLASS="l">324</TD><TD>                                        //        return;</TD></TR><TR><TD CLASS="l">325</TD><TD>                                        //}</TD></TR><TR><TD CLASS="l">326</TD><TD>                                }</TD></TR><TR><TD CLASS="l">327</TD><TD> </TD></TR><TR><TD CLASS="l">328</TD><TD>                        }</TD></TR><TR><TD CLASS="l">329</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="75% line coverage (3 out of 4 instructions)" CLASS="l">330</TD><TD TITLE="75% line coverage (3 out of 4 instructions)">                        if (Countries==null) { return; }</TD></TR><TR><TD CLASS="l">331</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="92% line coverage (11 out of 12 instructions)" CLASS="l">332</TD><TD TITLE="92% line coverage (11 out of 12 instructions)">                        if (gameMode==MODE_SECRET_MISSION &amp;&amp; Missions.size() &lt; Players.size() ) { return; }</TD></TR><TR><TD CLASS="l">333</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">334</TD><TD>                        int armies = ( 10 - Players.size() ) *  Math.round( Countries.length * 0.12f );</TD></TR><TR><TD CLASS="l">335</TD><TD> </TD></TR><TR><TD CLASS="l">336</TD><TD>                        // System.out.print(&#34;armies=&#34;+ armies +&#34;\n&#34;);</TD></TR><TR><TD CLASS="l">337</TD><TD>                        //</TD></TR><TR><TD CLASS="l">338</TD><TD>                        //if (gameMode==1) { // 2 player mode</TD></TR><TR><TD CLASS="l">339</TD><TD>                        //        Player player = new Player(3, &#34;neutral&#34;, Color.gray , &#34;all&#34; );</TD></TR><TR><TD CLASS="l">340</TD><TD>                        //        Players.add(player);</TD></TR><TR><TD CLASS="l">341</TD><TD>                        //}</TD></TR><TR><TD CLASS="l">342</TD><TD>                        //</TD></TR><TR><TD CLASS="l">343</TD><TD>                        //System.out.print(&#34;Game Started\n&#34;); // testing</TD></TR><TR><TD CLASS="l">344</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">345</TD><TD>                        for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR CLASS="c"><TD CLASS="l">346</TD><TD>                                ((Player)Players.elementAt(c)).addArmies(armies);</TD></TR><TR><TD CLASS="l">347</TD><TD>                        }</TD></TR><TR><TD CLASS="l">348</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">349</TD><TD>                        gameState=STATE_PLACE_ARMIES;</TD></TR><TR CLASS="c"><TD CLASS="l">350</TD><TD>                        capturedCountry=false;</TD></TR><TR CLASS="c"><TD CLASS="l">351</TD><TD>                        tradeCap=false;</TD></TR><TR><TD CLASS="l">352</TD><TD> </TD></TR><TR><TD CLASS="l">353</TD><TD>                }</TD></TR><TR><TD CLASS="l">354</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">355</TD><TD>        }</TD></TR><TR><TD CLASS="l">356</TD><TD> </TD></TR><TR><TD CLASS="l">357</TD><TD>        /**</TD></TR><TR><TD CLASS="l">358</TD><TD>         * this code is used to check if the borders in the map file are ok</TD></TR><TR><TD CLASS="l">359</TD><TD>         */</TD></TR><TR><TD CLASS="l"><A NAME="19">360</A></TD><TD>        public void testMap() throws Exception {</TD></TR><TR><TD CLASS="l">361</TD><TD> </TD></TR><TR><TD CLASS="l">362</TD><TD>                //System.out.print(&#34;Starting map test...\n&#34;);</TD></TR><TR><TD CLASS="l">363</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">364</TD><TD>                for (int c=0; c&lt; Countries.length ; c++) {</TD></TR><TR><TD CLASS="l">365</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">366</TD><TD>                        Country c1 = Countries[c];</TD></TR><TR CLASS="z"><TD CLASS="l">367</TD><TD>                        Vector c1neighbours = (Vector)c1.getNeighbours();</TD></TR><TR><TD CLASS="l">368</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">369</TD><TD>                        if (c1neighbours.contains(c1)) { throw new Exception(&#34;Error: &#34;+c1.getName()+&#34; neighbours with itself&#34;); }</TD></TR><TR><TD CLASS="l">370</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">371</TD><TD>                        for (int a=0; a&lt; c1neighbours.size() ; a++) {</TD></TR><TR><TD CLASS="l">372</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">373</TD><TD>                                Country c2 = (Country)c1neighbours.elementAt(a);</TD></TR><TR CLASS="z"><TD CLASS="l">374</TD><TD>                                Vector c2neighbours = (Vector)c2.getNeighbours();</TD></TR><TR><TD CLASS="l">375</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">376</TD><TD>                                boolean ok=false;</TD></TR><TR><TD CLASS="l">377</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">378</TD><TD>                                for (int b=0; b&lt; c2neighbours.size() ; b++) {</TD></TR><TR><TD CLASS="l">379</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">380</TD><TD>                                        Country c3 = (Country)c2neighbours.elementAt(b);</TD></TR><TR><TD CLASS="l">381</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">382</TD><TD>                                        if ( c1 == c3 ) { ok=true; }</TD></TR><TR><TD CLASS="l">383</TD><TD> </TD></TR><TR><TD CLASS="l">384</TD><TD>                                }</TD></TR><TR><TD CLASS="l">385</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">386</TD><TD>                                if (ok==false) {</TD></TR><TR CLASS="z"><TD CLASS="l">387</TD><TD>                                        throw new Exception(&#34;Borders error with: &#34; + Countries[c].getName() + &#34; (&#34;+Countries[c].getColor()+&#34;) and &#34; + ((Country)c1neighbours.elementAt(a)).getName() +&#34; (&#34;+((Country)c1neighbours.elementAt(a)).getColor()+&#34;)&#34; ); // Display</TD></TR><TR><TD CLASS="l">388</TD><TD>                                }</TD></TR><TR><TD CLASS="l">389</TD><TD> </TD></TR><TR><TD CLASS="l">390</TD><TD>                        }</TD></TR><TR><TD CLASS="l">391</TD><TD>                }</TD></TR><TR><TD CLASS="l">392</TD><TD> </TD></TR><TR><TD CLASS="l">393</TD><TD>                //System.out.print(&#34;End map test.\n&#34;);</TD></TR><TR><TD CLASS="l">394</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">395</TD><TD>        }</TD></TR><TR><TD CLASS="l">396</TD><TD> </TD></TR><TR><TD CLASS="l">397</TD><TD>        /**</TD></TR><TR><TD CLASS="l">398</TD><TD>         * Sets the current player in the game</TD></TR><TR><TD CLASS="l"><A NAME="71">399</A></TD><TD>         * @param name The name of the current player</TD></TR><TR><TD CLASS="l">400</TD><TD>         * @return Player Returns the current player in the game</TD></TR><TR><TD CLASS="l">401</TD><TD>         */</TD></TR><TR><TD CLASS="l">402</TD><TD>        public Player setCurrentPlayer(int c) {</TD></TR><TR CLASS="c"><TD CLASS="l">403</TD><TD>                currentPlayer = (Player)Players.get(c);</TD></TR><TR CLASS="c"><TD CLASS="l">404</TD><TD>                return currentPlayer;</TD></TR><TR><TD CLASS="l">405</TD><TD> </TD></TR><TR><TD CLASS="l">406</TD><TD>        }</TD></TR><TR><TD CLASS="l">407</TD><TD> </TD></TR><TR><TD CLASS="l">408</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="66">409</A></TD><TD>         * Gets the current player in the game</TD></TR><TR><TD CLASS="l">410</TD><TD>         * @return String Returns the name of a randomly picked player from the set of players</TD></TR><TR><TD CLASS="l">411</TD><TD>         */</TD></TR><TR><TD CLASS="l">412</TD><TD>        public int getRandomPlayer() {</TD></TR><TR CLASS="c"><TD CLASS="l">413</TD><TD>                return r.nextInt( Players.size() );</TD></TR><TR><TD CLASS="l">414</TD><TD>        }</TD></TR><TR><TD CLASS="l">415</TD><TD> </TD></TR><TR><TD CLASS="l">416</TD><TD>        /**</TD></TR><TR><TD CLASS="l">417</TD><TD>         * Checks whether the player deserves a card during at the end of their go</TD></TR><TR><TD CLASS="l"><A NAME="54">418</A></TD><TD>         * @return String Returns the name of the card if deserves a card, else else returns empty speech-marks</TD></TR><TR><TD CLASS="l">419</TD><TD>         */</TD></TR><TR><TD CLASS="l">420</TD><TD>        public String getDesrvedCard() {</TD></TR><TR><TD CLASS="l">421</TD><TD>                //check to see if the player deserves a new risk card</TD></TR><TR CLASS="c"><TD CLASS="l">422</TD><TD>                if (capturedCountry==true &amp;&amp; Cards.size() &gt; 0) {</TD></TR><TR><TD CLASS="l">423</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">424</TD><TD>                        Card c = (Card)Cards.elementAt( r.nextInt(Cards.size()) );</TD></TR><TR CLASS="c"><TD CLASS="l">425</TD><TD>                        if (c.getCountry() == null) return Card.WILDCARD;</TD></TR><TR CLASS="c"><TD CLASS="l">426</TD><TD>                        else return ( (Country)c.getCountry() ).getColor()+&#34;&#34;;</TD></TR><TR><TD CLASS="l">427</TD><TD>                }</TD></TR><TR><TD CLASS="l">428</TD><TD>                else {</TD></TR><TR CLASS="c"><TD CLASS="l">429</TD><TD>                        return &#34;&#34;;</TD></TR><TR><TD CLASS="l"><A NAME="6c">430</A></TD><TD>                }</TD></TR><TR><TD CLASS="l">431</TD><TD>        }</TD></TR><TR><TD CLASS="l">432</TD><TD> </TD></TR><TR><TD CLASS="l">433</TD><TD>        public boolean isCapturedCountry() {</TD></TR><TR CLASS="c"><TD CLASS="l">434</TD><TD>                return capturedCountry;</TD></TR><TR><TD CLASS="l">435</TD><TD>        }</TD></TR><TR><TD CLASS="l">436</TD><TD> </TD></TR><TR><TD CLASS="l">437</TD><TD>        /**</TD></TR><TR><TD CLASS="l">438</TD><TD>         * Ends a player's go</TD></TR><TR><TD CLASS="l"><A NAME="39">439</A></TD><TD>         * @return Player Returns the next player</TD></TR><TR><TD CLASS="l">440</TD><TD>         */</TD></TR><TR><TD CLASS="l">441</TD><TD>        public Player endGo() {</TD></TR><TR><TD CLASS="l">442</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">443</TD><TD>                if (gameState==STATE_END_TURN) {</TD></TR><TR><TD CLASS="l">444</TD><TD> </TD></TR><TR><TD CLASS="l">445</TD><TD>                        //System.out.print(&#34;go ended\n&#34;); // testing</TD></TR><TR><TD CLASS="l">446</TD><TD> </TD></TR><TR><TD CLASS="l">447</TD><TD>                        // work out who is the next player</TD></TR><TR><TD CLASS="l">448</TD><TD> </TD></TR><TR><TD CLASS="l">449</TD><TD>                        while (true) {</TD></TR><TR><TD CLASS="l">450</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">451</TD><TD>                                for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR CLASS="c"><TD CLASS="l">452</TD><TD>                                        if ( currentPlayer==((Player)Players.elementAt(c)) &amp;&amp; Players.size()==(c+1) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">453</TD><TD>                                                currentPlayer=(Player)Players.elementAt(0);</TD></TR><TR CLASS="c"><TD CLASS="l">454</TD><TD>                                                c=Players.size();</TD></TR><TR><TD CLASS="l">455</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">456</TD><TD>                                        else if ( currentPlayer==((Player)Players.elementAt(c)) &amp;&amp; Players.size() !=(c+1) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">457</TD><TD>                                                currentPlayer=(Player)Players.elementAt(c+1);</TD></TR><TR CLASS="c"><TD CLASS="l">458</TD><TD>                                                c=Players.size();</TD></TR><TR><TD CLASS="l">459</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">460</TD><TD>                                }</TD></TR><TR><TD CLASS="l">461</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">462</TD><TD>                                if (!getSetupDone()) { break; }</TD></TR><TR><TD CLASS="l">463</TD><TD> </TD></TR><TR><TD CLASS="l">464</TD><TD>                                                                                        // &amp;&amp; (currentPlayer.getType() != 3)</TD></TR><TR><TD CLASS="l">465</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">466</TD><TD>                                else if ( currentPlayer.getNoTerritoriesOwned() &gt; 0       ) {break; }</TD></TR><TR><TD CLASS="l">467</TD><TD> </TD></TR><TR><TD CLASS="l">468</TD><TD>                        }</TD></TR><TR><TD CLASS="l">469</TD><TD> </TD></TR><TR><TD CLASS="l">470</TD><TD>                        //System.out.print(&#34;Curent Player: &#34; + currentPlayer.getName() + &#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">471</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">472</TD><TD>                        if ( getSetupDone() &amp;&amp; !(gameMode==2 &amp;&amp; currentPlayer.getCapital() == null) ) { // ie the initial setup has been compleated</TD></TR><TR><TD CLASS="l">473</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">474</TD><TD>                                workOutEndGoStats( currentPlayer );</TD></TR><TR CLASS="c"><TD CLASS="l">475</TD><TD>                                currentPlayer.nextTurn();</TD></TR><TR><TD CLASS="l">476</TD><TD> </TD></TR><TR><TD CLASS="l">477</TD><TD>                                // add new armies for the Territories Owned</TD></TR><TR CLASS="c"><TD CLASS="l">478</TD><TD>                                if ( currentPlayer.getNoTerritoriesOwned() &lt; 9 ) {</TD></TR><TR CLASS="c"><TD CLASS="l">479</TD><TD>                                        currentPlayer.addArmies(3);</TD></TR><TR><TD CLASS="l">480</TD><TD>                                }</TD></TR><TR><TD CLASS="l">481</TD><TD>                                else {</TD></TR><TR CLASS="c"><TD CLASS="l">482</TD><TD>                                        currentPlayer.addArmies( currentPlayer.getNoTerritoriesOwned() / 3 );</TD></TR><TR><TD CLASS="l">483</TD><TD>                                }</TD></TR><TR><TD CLASS="l">484</TD><TD> </TD></TR><TR><TD CLASS="l">485</TD><TD>                                // add new armies for the Continents Owned</TD></TR><TR CLASS="c"><TD CLASS="l">486</TD><TD>                                for (int c=0; c&lt; Continents.length ; c++) {</TD></TR><TR><TD CLASS="l">487</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">488</TD><TD>                                        if ( Continents[c].isOwned(currentPlayer) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">489</TD><TD>                                                currentPlayer.addArmies( Continents[c].getArmyValue() );</TD></TR><TR><TD CLASS="l">490</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">491</TD><TD> </TD></TR><TR><TD CLASS="l">492</TD><TD>                                }</TD></TR><TR><TD CLASS="l">493</TD><TD> </TD></TR><TR><TD CLASS="l">494</TD><TD>                        }</TD></TR><TR><TD CLASS="l">495</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">496</TD><TD>                        if (getSetupDone() &amp;&amp; gameMode==2 &amp;&amp; currentPlayer.getCapital() == null) { // capital risk setup not finished</TD></TR><TR CLASS="c"><TD CLASS="l">497</TD><TD>                                gameState=STATE_SELECT_CAPITAL;</TD></TR><TR><TD CLASS="l">498</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">499</TD><TD>                        else if ( canTrade()==false ) { // ie the initial setup has not been compleated or there are no cards that can be traded</TD></TR><TR CLASS="c"><TD CLASS="l">500</TD><TD>                                gameState=STATE_PLACE_ARMIES;</TD></TR><TR><TD CLASS="l">501</TD><TD>                        }</TD></TR><TR><TD CLASS="l">502</TD><TD>                        else { // there are cards that can be traded</TD></TR><TR CLASS="c"><TD CLASS="l">503</TD><TD>                                gameState=STATE_TRADE_CARDS;</TD></TR><TR><TD CLASS="l">504</TD><TD>                        }</TD></TR><TR><TD CLASS="l">505</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">506</TD><TD>                        capturedCountry=false;</TD></TR><TR CLASS="c"><TD CLASS="l">507</TD><TD>                        tradeCap=false;</TD></TR><TR><TD CLASS="l">508</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">509</TD><TD>                        return currentPlayer;</TD></TR><TR><TD CLASS="l">510</TD><TD> </TD></TR><TR><TD CLASS="l">511</TD><TD>                }</TD></TR><TR><TD CLASS="l">512</TD><TD>                else {</TD></TR><TR><TD CLASS="l">513</TD><TD> </TD></TR><TR><TD CLASS="l">514</TD><TD>                        //System.out.println(&#34;lala &#34;+gameState);</TD></TR><TR><TD CLASS="l">515</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">516</TD><TD>                        return null;</TD></TR><TR><TD CLASS="l">517</TD><TD>                }</TD></TR><TR><TD CLASS="l">518</TD><TD>        }</TD></TR><TR><TD CLASS="l">519</TD><TD> </TD></TR><TR><TD CLASS="l">520</TD><TD>        /**</TD></TR><TR><TD CLASS="l">521</TD><TD>         * Trades a set of cards</TD></TR><TR><TD CLASS="l">522</TD><TD>         * @param card1 First card to trade</TD></TR><TR><TD CLASS="l">523</TD><TD>         * @param card2 Second card to trade</TD></TR><TR><TD CLASS="l"><A NAME="22">524</A></TD><TD>         * @param card3 Third card to trade</TD></TR><TR><TD CLASS="l">525</TD><TD>         * @return int Returns the number of armies gained from the trade, returning 0 if the trade is unsuccessful</TD></TR><TR><TD CLASS="l">526</TD><TD>         */</TD></TR><TR><TD CLASS="l">527</TD><TD>    public int trade(Card card1, Card card2, Card card3) {</TD></TR><TR CLASS="p"><TD TITLE="67% line coverage (4 out of 6 instructions)" CLASS="l">528</TD><TD TITLE="67% line coverage (4 out of 6 instructions)">        if (gameState!=STATE_TRADE_CARDS) return 0;</TD></TR><TR><TD CLASS="l">529</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="33% line coverage (3 out of 9 instructions)" CLASS="l">530</TD><TD TITLE="33% line coverage (3 out of 9 instructions)">        if (tradeCap &amp;&amp; currentPlayer.getCards().size() &lt; MAX_CARDS )</TD></TR><TR CLASS="z"><TD CLASS="l">531</TD><TD>            throw new RuntimeException(&#34;trying to do a trade when less then 5 cards and tradeCap is on&#34;);</TD></TR><TR><TD CLASS="l">532</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">533</TD><TD>        int armies = getTradeAbsValue( card1.getName(), card2.getName(), card3.getName(), cardMode);</TD></TR><TR><TD CLASS="l">534</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="87% line coverage (13 out of 15 instructions)" CLASS="l">535</TD><TD TITLE="87% line coverage (13 out of 15 instructions)">        if (armies &lt;= 0) return 0;</TD></TR><TR><TD CLASS="l">536</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">537</TD><TD>        if (cardMode==CARD_INCREASING_SET) {</TD></TR><TR CLASS="c"><TD CLASS="l">538</TD><TD>            cardState=armies;</TD></TR><TR><TD CLASS="l">539</TD><TD>        }</TD></TR><TR><TD CLASS="l">540</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">541</TD><TD>        currentPlayer.tradeInCards(card1, card2, card3);</TD></TR><TR><TD CLASS="l">542</TD><TD> </TD></TR><TR><TD CLASS="l">543</TD><TD>        //Return the cards to the deck</TD></TR><TR CLASS="c"><TD CLASS="l">544</TD><TD>        List used = getUsedCards();</TD></TR><TR CLASS="c"><TD CLASS="l">545</TD><TD>        used.add(card1);</TD></TR><TR CLASS="c"><TD CLASS="l">546</TD><TD>        used.add(card2);</TD></TR><TR CLASS="c"><TD CLASS="l">547</TD><TD>        used.add(card3);</TD></TR><TR><TD CLASS="l">548</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">549</TD><TD>        recycleUsedCards();</TD></TR><TR><TD CLASS="l">550</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">551</TD><TD>        currentPlayer.addArmies(armies);</TD></TR><TR><TD CLASS="l">552</TD><TD> </TD></TR><TR><TD CLASS="l">553</TD><TD>        // if tradeCap you must trade to redude your cards to 4 or fewer cards</TD></TR><TR><TD CLASS="l">554</TD><TD>        // but once your hand is reduced to 4, 3 or 2 cards, you must stop trading</TD></TR><TR CLASS="p"><TD TITLE="85% line coverage (34 out of 40 instructions)" CLASS="l">555</TD><TD TITLE="85% line coverage (34 out of 40 instructions)">        if ( !canTrade() || (tradeCap &amp;&amp; currentPlayer.getCards().size() &lt; MAX_CARDS ) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">556</TD><TD>            gameState=STATE_PLACE_ARMIES;</TD></TR><TR CLASS="c"><TD CLASS="l">557</TD><TD>            tradeCap=false;</TD></TR><TR><TD CLASS="l">558</TD><TD>        }</TD></TR><TR><TD CLASS="l">559</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">560</TD><TD>        return armies;</TD></TR><TR><TD CLASS="l">561</TD><TD>    }</TD></TR><TR><TD CLASS="l">562</TD><TD> </TD></TR><TR><TD CLASS="l">563</TD><TD>    /**</TD></TR><TR><TD CLASS="l">564</TD><TD>     * Returns the trading value of the given cards, without taking into account</TD></TR><TR><TD CLASS="l">565</TD><TD>     * the territories associated to the cards.</TD></TR><TR><TD CLASS="l">566</TD><TD>     * @param c1 The name of the type of the first card.</TD></TR><TR><TD CLASS="l">567</TD><TD>     * @param c2 The name of the type of the second card.</TD></TR><TR><TD CLASS="l"><A NAME="1c">568</A></TD><TD>     * @param c3 The name of the type of the third card.</TD></TR><TR><TD CLASS="l">569</TD><TD>     * @return 0 in case of invalid combination of cards.</TD></TR><TR><TD CLASS="l">570</TD><TD>     */</TD></TR><TR><TD CLASS="l">571</TD><TD>    public int getTradeAbsValue(String c1, String c2, String c3,int cardMode) {</TD></TR><TR CLASS="c"><TD CLASS="l">572</TD><TD>        int armies=0;</TD></TR><TR><TD CLASS="l">573</TD><TD> </TD></TR><TR><TD CLASS="l">574</TD><TD>        // we shift all wildcards to the front</TD></TR><TR CLASS="c"><TD CLASS="l">575</TD><TD>        if (!c1.equals(Card.WILDCARD)) { String n4 = c3; c3 = c1; c1 = n4; }</TD></TR><TR CLASS="c"><TD CLASS="l">576</TD><TD>        if (!c2.equals(Card.WILDCARD)) { String n4 = c3; c3 = c2; c2 = n4; }</TD></TR><TR CLASS="c"><TD CLASS="l">577</TD><TD>        if (!c1.equals(Card.WILDCARD)) { String n4 = c2; c2 = c1; c1 = n4; }</TD></TR><TR><TD CLASS="l">578</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">579</TD><TD>        if (cardMode == CARD_INCREASING_SET) {</TD></TR><TR CLASS="c"><TD CLASS="l">580</TD><TD>            if (</TD></TR><TR CLASS="c"><TD CLASS="l">581</TD><TD>                    c1.equals(Card.WILDCARD) ||</TD></TR><TR CLASS="c"><TD CLASS="l">582</TD><TD>                    (c1.equals(c2) &amp;&amp; c1.equals(c3)) ||</TD></TR><TR CLASS="c"><TD CLASS="l">583</TD><TD>                    (!c1.equals(c2) &amp;&amp; !c1.equals(c3) &amp;&amp; !c2.equals(c3))</TD></TR><TR><TD CLASS="l">584</TD><TD>                ) {</TD></TR><TR CLASS="c"><TD CLASS="l">585</TD><TD>                armies = getNewCardState();</TD></TR><TR><TD CLASS="l">586</TD><TD>            }</TD></TR><TR><TD CLASS="l">587</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">588</TD><TD>        else if (cardMode == CARD_FIXED_SET) {</TD></TR><TR><TD CLASS="l">589</TD><TD>            // ALL THE SAME or 'have 1 wildcard and 2 the same'</TD></TR><TR CLASS="c"><TD CLASS="l">590</TD><TD>            if ((c1.equals(c2) || c1.equals(Card.WILDCARD)) &amp;&amp; c2.equals(c3)) {</TD></TR><TR CLASS="c"><TD CLASS="l">591</TD><TD>                if (c3.equals(Card.INFANTRY)) {</TD></TR><TR CLASS="c"><TD CLASS="l">592</TD><TD>                    armies = 4;</TD></TR><TR><TD CLASS="l">593</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">594</TD><TD>                else if (c3.equals(Card.CAVALRY)) {</TD></TR><TR CLASS="z"><TD CLASS="l">595</TD><TD>                    armies = 6;</TD></TR><TR><TD CLASS="l">596</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">597</TD><TD>                else if (c3.equals(Card.CANNON)) {</TD></TR><TR CLASS="z"><TD CLASS="l">598</TD><TD>                    armies = 8;</TD></TR><TR><TD CLASS="l">599</TD><TD>                }</TD></TR><TR><TD CLASS="l">600</TD><TD>                else { // (c1.equals( Card.WILDCARD ))</TD></TR><TR CLASS="z"><TD CLASS="l">601</TD><TD>                    armies = 12; // Incase someone puts 3 wildcards into his set</TD></TR><TR><TD CLASS="l">602</TD><TD>                }</TD></TR><TR><TD CLASS="l">603</TD><TD>            }</TD></TR><TR><TD CLASS="l">604</TD><TD>            // ALL CARDS ARE DIFFERENT (can have 1 wildcard) or 2 wildcards and a 3rd card</TD></TR><TR CLASS="c"><TD CLASS="l">605</TD><TD>            else if (</TD></TR><TR CLASS="p"><TD TITLE="67% line coverage (8 out of 12 instructions)" CLASS="l">606</TD><TD TITLE="67% line coverage (8 out of 12 instructions)">                    (c1.equals(Card.WILDCARD) &amp;&amp; c2.equals(Card.WILDCARD)) ||</TD></TR><TR CLASS="c"><TD CLASS="l">607</TD><TD>                    (!c1.equals(c2) &amp;&amp; !c2.equals(c3) &amp;&amp; !c1.equals(c3))</TD></TR><TR><TD CLASS="l">608</TD><TD>                    ) {</TD></TR><TR CLASS="c"><TD CLASS="l">609</TD><TD>                armies = 10;</TD></TR><TR><TD CLASS="l">610</TD><TD>            }</TD></TR><TR><TD CLASS="l">611</TD><TD>        }</TD></TR><TR><TD CLASS="l">612</TD><TD>        else { // (cardMode==CARD_ITALIANLIKE_SET)</TD></TR><TR CLASS="z"><TD CLASS="l">613</TD><TD>            if (c1.equals(c2) &amp;&amp; c1.equals(c3)) {</TD></TR><TR><TD CLASS="l">614</TD><TD>                // All equal</TD></TR><TR CLASS="z"><TD CLASS="l">615</TD><TD>                if (c1.equals(Card.CAVALRY)) {</TD></TR><TR CLASS="z"><TD CLASS="l">616</TD><TD>                    armies = 8;</TD></TR><TR><TD CLASS="l">617</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">618</TD><TD>                else if (c1.equals(Card.INFANTRY)) {</TD></TR><TR CLASS="z"><TD CLASS="l">619</TD><TD>                    armies = 6;</TD></TR><TR><TD CLASS="l">620</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">621</TD><TD>                else if (c1.equals(Card.CANNON)) {</TD></TR><TR CLASS="z"><TD CLASS="l">622</TD><TD>                    armies = 4;</TD></TR><TR><TD CLASS="l">623</TD><TD>                }</TD></TR><TR><TD CLASS="l">624</TD><TD>                else { // (c1.equals( Card.WILDCARD ))</TD></TR><TR CLASS="z"><TD CLASS="l">625</TD><TD>                    armies = 0; // Incase someone puts 3 wildcards into his set</TD></TR><TR><TD CLASS="l">626</TD><TD>                }</TD></TR><TR><TD CLASS="l">627</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">628</TD><TD>            else if (!c1.equals(c2) &amp;&amp; !c2.equals(c3) &amp;&amp; !c1.equals(c3) &amp;&amp; !c1.equals(Card.WILDCARD)) {</TD></TR><TR CLASS="z"><TD CLASS="l">629</TD><TD>                armies = 10;</TD></TR><TR><TD CLASS="l">630</TD><TD>            }</TD></TR><TR><TD CLASS="l">631</TD><TD>            //All the same w/1 wildcard</TD></TR><TR CLASS="z"><TD CLASS="l">632</TD><TD>            else if (c1.equals(Card.WILDCARD) &amp;&amp; c2.equals(c3)) {</TD></TR><TR CLASS="z"><TD CLASS="l">633</TD><TD>                armies = 12;</TD></TR><TR><TD CLASS="l">634</TD><TD>            }</TD></TR><TR><TD CLASS="l">635</TD><TD>            //2 wildcards, or a wildcard and two different</TD></TR><TR><TD CLASS="l">636</TD><TD>            else {</TD></TR><TR CLASS="z"><TD CLASS="l">637</TD><TD>                armies = 0;</TD></TR><TR><TD CLASS="l">638</TD><TD>            }</TD></TR><TR><TD CLASS="l">639</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="40">640</A></TD><TD>        return armies;</TD></TR><TR><TD CLASS="l">641</TD><TD>    }</TD></TR><TR><TD CLASS="l">642</TD><TD> </TD></TR><TR><TD CLASS="l">643</TD><TD>        public boolean canTrade() {</TD></TR><TR CLASS="c"><TD CLASS="l">644</TD><TD>                return getBestTrade(currentPlayer.getCards(), null) &gt; 0;</TD></TR><TR><TD CLASS="l">645</TD><TD>        }</TD></TR><TR><TD CLASS="l">646</TD><TD> </TD></TR><TR><TD CLASS="l">647</TD><TD>        /**</TD></TR><TR><TD CLASS="l">648</TD><TD>         * Find the best (highest) trade</TD></TR><TR><TD CLASS="l">649</TD><TD>         * Simple greedy search using the various valid combinations</TD></TR><TR><TD CLASS="l"><A NAME="2c">650</A></TD><TD>         * @param cards</TD></TR><TR><TD CLASS="l">651</TD><TD>         * @return</TD></TR><TR><TD CLASS="l">652</TD><TD>         */</TD></TR><TR><TD CLASS="l">653</TD><TD>        public int getBestTrade(List&lt;Card&gt; cards, Card[] bestResult) {</TD></TR><TR CLASS="c"><TD CLASS="l">654</TD><TD>                Map&lt;String, List&lt;Card&gt;&gt; cardTypes = new HashMap&lt;String, List&lt;Card&gt;&gt;();</TD></TR><TR CLASS="c"><TD CLASS="l">655</TD><TD>                for (Card card : cards) {</TD></TR><TR CLASS="c"><TD CLASS="l">656</TD><TD>                        List&lt;Card&gt; cardType = cardTypes.get(card.getName());</TD></TR><TR CLASS="c"><TD CLASS="l">657</TD><TD>                        if (cardType == null) {</TD></TR><TR CLASS="c"><TD CLASS="l">658</TD><TD>                                cardType = new ArrayList&lt;Card&gt;();</TD></TR><TR CLASS="c"><TD CLASS="l">659</TD><TD>                                cardTypes.put(card.getName(), cardType);</TD></TR><TR><TD CLASS="l">660</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">661</TD><TD>                        cardType.add(card);</TD></TR><TR CLASS="c"><TD CLASS="l">662</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">663</TD><TD>                Card carda = null;</TD></TR><TR CLASS="c"><TD CLASS="l">664</TD><TD>                Card cardb = null;</TD></TR><TR CLASS="c"><TD CLASS="l">665</TD><TD>                Card cardc = null;</TD></TR><TR CLASS="c"><TD CLASS="l">666</TD><TD>                int bestValue = 0;</TD></TR><TR CLASS="c"><TD CLASS="l">667</TD><TD>                if (cardTypes.size() &gt;= 3) {</TD></TR><TR CLASS="c"><TD CLASS="l">668</TD><TD>                        carda = getCard(cardTypes, Card.CANNON);</TD></TR><TR CLASS="c"><TD CLASS="l">669</TD><TD>                        if (carda == null) {</TD></TR><TR CLASS="z"><TD CLASS="l">670</TD><TD>                                carda = getCard(cardTypes, Card.WILDCARD);</TD></TR><TR><TD CLASS="l">671</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">672</TD><TD>                        cardb = getCard(cardTypes, Card.CAVALRY);</TD></TR><TR CLASS="c"><TD CLASS="l">673</TD><TD>                        if (cardb == null) {</TD></TR><TR CLASS="c"><TD CLASS="l">674</TD><TD>                                cardb = getCard(cardTypes, Card.WILDCARD);</TD></TR><TR><TD CLASS="l">675</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">676</TD><TD>                        cardc = getCard(cardTypes, Card.INFANTRY);</TD></TR><TR CLASS="c"><TD CLASS="l">677</TD><TD>                        if (cardc == null) {</TD></TR><TR CLASS="z"><TD CLASS="l">678</TD><TD>                                cardc = getCard(cardTypes, Card.WILDCARD);</TD></TR><TR><TD CLASS="l">679</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">680</TD><TD>                        bestValue = getTradeAbsValue( carda.getName(), cardb.getName(), cardc.getName(), getCardMode());</TD></TR><TR CLASS="c"><TD CLASS="l">681</TD><TD>                        if (bestValue &gt; 0) {</TD></TR><TR CLASS="c"><TD CLASS="l">682</TD><TD>                                if (bestResult == null) {</TD></TR><TR CLASS="c"><TD CLASS="l">683</TD><TD>                                        return bestValue;</TD></TR><TR><TD CLASS="l">684</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">685</TD><TD>                                bestResult[0] = carda;</TD></TR><TR CLASS="c"><TD CLASS="l">686</TD><TD>                                bestResult[1] = cardb;</TD></TR><TR CLASS="c"><TD CLASS="l">687</TD><TD>                                bestResult[2] = cardc;</TD></TR><TR><TD CLASS="l">688</TD><TD>                        }</TD></TR><TR><TD CLASS="l">689</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">690</TD><TD>                List&lt;Card&gt; wildCards = cardTypes.get(Card.WILDCARD);</TD></TR><TR CLASS="c"><TD CLASS="l">691</TD><TD>                int wildCardCount = wildCards==null?0:wildCards.size();</TD></TR><TR CLASS="c"><TD CLASS="l">692</TD><TD>                for (Map.Entry&lt;String, List&lt;Card&gt;&gt; entry : cardTypes.entrySet()) {</TD></TR><TR CLASS="c"><TD CLASS="l">693</TD><TD>                        carda = null;</TD></TR><TR CLASS="c"><TD CLASS="l">694</TD><TD>                        if (entry.getKey().equals(Card.WILDCARD)) {</TD></TR><TR CLASS="c"><TD CLASS="l">695</TD><TD>                                if (wildCardCount &gt;= 3) {</TD></TR><TR CLASS="z"><TD CLASS="l">696</TD><TD>                                        carda = wildCards.get(0);</TD></TR><TR CLASS="z"><TD CLASS="l">697</TD><TD>                                        cardb = wildCards.get(1);</TD></TR><TR CLASS="z"><TD CLASS="l">698</TD><TD>                                        cardc = wildCards.get(2);</TD></TR><TR><TD CLASS="l">699</TD><TD>                                }</TD></TR><TR><TD CLASS="l">700</TD><TD>                        } else {</TD></TR><TR CLASS="c"><TD CLASS="l">701</TD><TD>                                List&lt;Card&gt; cardList = entry.getValue();</TD></TR><TR CLASS="c"><TD CLASS="l">702</TD><TD>                                if (cardList.size() + wildCardCount &gt;= 3) {</TD></TR><TR CLASS="c"><TD CLASS="l">703</TD><TD>                                        carda = cardList.get(0);</TD></TR><TR CLASS="p"><TD TITLE="83% line coverage (19 out of 23 instructions)" CLASS="l">704</TD><TD TITLE="83% line coverage (19 out of 23 instructions)">                                        cardb = cardList.size()&gt;1?cardList.get(1):wildCards.get(0);</TD></TR><TR CLASS="c"><TD CLASS="l">705</TD><TD>                                        cardc = cardList.size()&gt;2?cardList.get(2):wildCards.get(2-cardList.size());</TD></TR><TR><TD CLASS="l">706</TD><TD>                                }</TD></TR><TR><TD CLASS="l">707</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">708</TD><TD>                        if (carda != null) {</TD></TR><TR CLASS="c"><TD CLASS="l">709</TD><TD>                                int val = getTradeAbsValue( carda.getName(), cardb.getName(), cardc.getName(), getCardMode());</TD></TR><TR CLASS="c"><TD CLASS="l">710</TD><TD>                                if (val &gt; bestValue) {</TD></TR><TR CLASS="c"><TD CLASS="l">711</TD><TD>                                        bestValue = val;</TD></TR><TR CLASS="c"><TD CLASS="l">712</TD><TD>                                        if (bestResult == null) {</TD></TR><TR CLASS="c"><TD CLASS="l">713</TD><TD>                                                return bestValue;</TD></TR><TR><TD CLASS="l">714</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">715</TD><TD>                                        bestResult[0] = carda;</TD></TR><TR CLASS="c"><TD CLASS="l">716</TD><TD>                                        bestResult[1] = cardb;</TD></TR><TR CLASS="c"><TD CLASS="l">717</TD><TD>                                        bestResult[2] = cardc;</TD></TR><TR><TD CLASS="l">718</TD><TD>                                }</TD></TR><TR><TD CLASS="l">719</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">720</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="45">721</A></TD><TD>                return bestValue;</TD></TR><TR><TD CLASS="l">722</TD><TD>        }</TD></TR><TR><TD CLASS="l">723</TD><TD> </TD></TR><TR><TD CLASS="l">724</TD><TD>        private Card getCard(Map&lt;String, List&lt;Card&gt;&gt; cardTypes, String name) {</TD></TR><TR CLASS="c"><TD CLASS="l">725</TD><TD>                List&lt;Card&gt; type = cardTypes.get(name);</TD></TR><TR CLASS="c"><TD CLASS="l">726</TD><TD>                if (type != null) {</TD></TR><TR CLASS="c"><TD CLASS="l">727</TD><TD>                        return type.get(0);</TD></TR><TR><TD CLASS="l">728</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">729</TD><TD>                return null;</TD></TR><TR><TD CLASS="l"><A NAME="5d">730</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">731</TD><TD> </TD></TR><TR><TD CLASS="l">732</TD><TD>        public int getNewCardState() {</TD></TR><TR><TD CLASS="l">733</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">734</TD><TD>                if (cardState &lt; 4) {</TD></TR><TR CLASS="c"><TD CLASS="l">735</TD><TD>                        return cardState+4;</TD></TR><TR><TD CLASS="l">736</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">737</TD><TD>                else if (cardState &lt; 12) {</TD></TR><TR CLASS="c"><TD CLASS="l">738</TD><TD>                        return cardState+2;</TD></TR><TR><TD CLASS="l">739</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">740</TD><TD>                else if (cardState &lt; 15) {</TD></TR><TR CLASS="c"><TD CLASS="l">741</TD><TD>                        return cardState+3;</TD></TR><TR><TD CLASS="l">742</TD><TD>                }</TD></TR><TR><TD CLASS="l">743</TD><TD>                else {</TD></TR><TR CLASS="c"><TD CLASS="l">744</TD><TD>                        return cardState+5;</TD></TR><TR><TD CLASS="l">745</TD><TD>                }</TD></TR><TR><TD CLASS="l">746</TD><TD> </TD></TR><TR><TD CLASS="l">747</TD><TD>        }</TD></TR><TR><TD CLASS="l">748</TD><TD> </TD></TR><TR><TD CLASS="l">749</TD><TD>        /**</TD></TR><TR><TD CLASS="l">750</TD><TD>         * checks if a set of cards can be traded</TD></TR><TR><TD CLASS="l">751</TD><TD>         * @param card1 First card to trade</TD></TR><TR><TD CLASS="l">752</TD><TD>         * @param card2 Second card to trade</TD></TR><TR><TD CLASS="l"><A NAME="32">753</A></TD><TD>         * @param card3 Third card to trade</TD></TR><TR><TD CLASS="l">754</TD><TD>         * @return boolean true if they can be traded false if they can not</TD></TR><TR><TD CLASS="l">755</TD><TD>         */</TD></TR><TR><TD CLASS="l">756</TD><TD>        public boolean checkTrade(Card card1, Card card2, Card card3) {</TD></TR><TR CLASS="p"><TD TITLE="93% line coverage (14 out of 15 instructions)" CLASS="l">757</TD><TD TITLE="93% line coverage (14 out of 15 instructions)">            return getTradeAbsValue( card1.getName(), card2.getName(), card3.getName(), cardMode) &gt; 0;</TD></TR><TR><TD CLASS="l">758</TD><TD>        }</TD></TR><TR><TD CLASS="l">759</TD><TD> </TD></TR><TR><TD CLASS="l">760</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="2">761</A></TD><TD>         * Ends the trading phase by checking if the player has less than 5 cards</TD></TR><TR><TD CLASS="l">762</TD><TD>         * @return boolean Returns true if the player has ended the trade phase, returns false if the player cannot end the trade phase</TD></TR><TR><TD CLASS="l">763</TD><TD>         */</TD></TR><TR><TD CLASS="l">764</TD><TD>        public boolean endTrade() {</TD></TR><TR CLASS="z"><TD CLASS="l">765</TD><TD>            if (canEndTrade()) {</TD></TR><TR CLASS="z"><TD CLASS="l">766</TD><TD>                gameState=STATE_PLACE_ARMIES;</TD></TR><TR CLASS="z"><TD CLASS="l">767</TD><TD>                if (tradeCap) {</TD></TR><TR CLASS="z"><TD CLASS="l">768</TD><TD>                    throw new RuntimeException(&#34;endTrade worked when tradeCap was true&#34;);</TD></TR><TR><TD CLASS="l">769</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">770</TD><TD>                return true;</TD></TR><TR><TD CLASS="l">771</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="2d">772</A></TD><TD>            return false;</TD></TR><TR><TD CLASS="l">773</TD><TD>        }</TD></TR><TR><TD CLASS="l">774</TD><TD> </TD></TR><TR><TD CLASS="l">775</TD><TD>        public boolean canEndTrade() {</TD></TR><TR CLASS="c"><TD CLASS="l">776</TD><TD>                if (gameState==STATE_TRADE_CARDS) {</TD></TR><TR><TD CLASS="l">777</TD><TD>                        //in italian rules there isn't a limit to the number of risk cards that you can hold in your hand.</TD></TR><TR CLASS="c"><TD CLASS="l">778</TD><TD>                        if (cardMode == CARD_ITALIANLIKE_SET || currentPlayer.getCards().size() &lt; MAX_CARDS) {</TD></TR><TR CLASS="c"><TD CLASS="l">779</TD><TD>                                return true;</TD></TR><TR><TD CLASS="l">780</TD><TD>                        }</TD></TR><TR><TD CLASS="l">781</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">782</TD><TD>                return false;</TD></TR><TR><TD CLASS="l">783</TD><TD>        }</TD></TR><TR><TD CLASS="l">784</TD><TD> </TD></TR><TR><TD CLASS="l">785</TD><TD>        /**</TD></TR><TR><TD CLASS="l">786</TD><TD>         * Places an army on the Country</TD></TR><TR><TD CLASS="l">787</TD><TD>         * @param t Country that the player wants to add armies to</TD></TR><TR><TD CLASS="l">788</TD><TD>         * @param n Number of armies the player wants to add to the country</TD></TR><TR><TD CLASS="l"><A NAME="37">789</A></TD><TD>         * @return boolean Returns true if the number of armies are added the country, returns false if the armies cannot be added to the territory</TD></TR><TR><TD CLASS="l">790</TD><TD>         */</TD></TR><TR><TD CLASS="l">791</TD><TD>        public int placeArmy(Country t, int n) {</TD></TR><TR><TD CLASS="l">792</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">793</TD><TD>                int done=0;</TD></TR><TR><TD CLASS="l">794</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">795</TD><TD>                if ( gameState==STATE_PLACE_ARMIES ) {</TD></TR><TR><TD CLASS="l">796</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">797</TD><TD>                        if ( !getSetupDone() ) { // ie the initial setup has not been compleated</TD></TR><TR CLASS="p"><TD TITLE="60% line coverage (3 out of 5 instructions)" CLASS="l">798</TD><TD TITLE="60% line coverage (3 out of 5 instructions)">                                if (n != 1) return 0;</TD></TR><TR><TD CLASS="l">799</TD><TD>                                // if it has the player as a owner</TD></TR><TR CLASS="c"><TD CLASS="l">800</TD><TD>                                if ( t.getOwner()==currentPlayer ) {</TD></TR><TR><TD CLASS="l">801</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">802</TD><TD>                                        if ( NoEmptyCountries() ) { // no empty country are found</TD></TR><TR CLASS="c"><TD CLASS="l">803</TD><TD>                                                t.addArmy();</TD></TR><TR CLASS="c"><TD CLASS="l">804</TD><TD>                                                currentPlayer.loseExtraArmy(1);</TD></TR><TR CLASS="c"><TD CLASS="l">805</TD><TD>                                                done=1;</TD></TR><TR><TD CLASS="l">806</TD><TD>                                                //System.out.print(&#34;army placed in: &#34; + t.getName() + &#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">807</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">808</TD><TD> </TD></TR><TR><TD CLASS="l">809</TD><TD>                                }</TD></TR><TR><TD CLASS="l">810</TD><TD>                                // if there is no owner</TD></TR><TR CLASS="c"><TD CLASS="l">811</TD><TD>                                else if ( t.getOwner()==null ) {</TD></TR><TR><TD CLASS="l">812</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">813</TD><TD>                                        t.setOwner(currentPlayer);</TD></TR><TR CLASS="c"><TD CLASS="l">814</TD><TD>                                        currentPlayer.newCountry(t);</TD></TR><TR CLASS="c"><TD CLASS="l">815</TD><TD>                                        t.addArmy();</TD></TR><TR CLASS="c"><TD CLASS="l">816</TD><TD>                                        currentPlayer.loseExtraArmy(1);</TD></TR><TR CLASS="c"><TD CLASS="l">817</TD><TD>                                        done=1;</TD></TR><TR><TD CLASS="l">818</TD><TD>                                        //System.out.print(&#34;country taken and army placed in: &#34; + t.getName() + &#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">819</TD><TD>                                }</TD></TR><TR><TD CLASS="l">820</TD><TD> </TD></TR><TR><TD CLASS="l">821</TD><TD>                        }</TD></TR><TR><TD CLASS="l">822</TD><TD>                        else { // initial setup is completed</TD></TR><TR><TD CLASS="l">823</TD><TD> </TD></TR><TR><TD CLASS="l">824</TD><TD>                                // if it has the player as a owner</TD></TR><TR CLASS="c"><TD CLASS="l">825</TD><TD>                                if ( t.getOwner()==currentPlayer &amp;&amp; currentPlayer.getExtraArmies() &gt;=n ) {</TD></TR><TR><TD CLASS="l">826</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">827</TD><TD>                                        currentPlayer.currentStatistic.addReinforcements(n);</TD></TR><TR><TD CLASS="l">828</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">829</TD><TD>                                        t.addArmies(n);</TD></TR><TR CLASS="c"><TD CLASS="l">830</TD><TD>                                        currentPlayer.loseExtraArmy(n);</TD></TR><TR><TD CLASS="l">831</TD><TD>                                        //System.out.print(&#34;army placed in: &#34; + t.getName() + &#34;\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">832</TD><TD>                                        done=1;</TD></TR><TR><TD CLASS="l">833</TD><TD> </TD></TR><TR><TD CLASS="l">834</TD><TD>                                }</TD></TR><TR><TD CLASS="l">835</TD><TD>                        }</TD></TR><TR><TD CLASS="l">836</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">837</TD><TD>                        if (done==1) {</TD></TR><TR><TD CLASS="l">838</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">839</TD><TD>                                if (getSetupDone() ) { // ie the initial setup has been compleated</TD></TR><TR CLASS="c"><TD CLASS="l">840</TD><TD>                                        if ( currentPlayer.getExtraArmies()==0 ) { gameState=STATE_ATTACKING; }</TD></TR><TR CLASS="c"><TD CLASS="l">841</TD><TD>                                        else { gameState=STATE_PLACE_ARMIES; }</TD></TR><TR><TD CLASS="l">842</TD><TD>                                }</TD></TR><TR><TD CLASS="l">843</TD><TD>                                else { // initial setup is not compleated</TD></TR><TR CLASS="c"><TD CLASS="l">844</TD><TD>                                        if (currentPlayer.getExtraArmies()==0) {</TD></TR><TR CLASS="c"><TD CLASS="l">845</TD><TD>                                                setup++; // another player has finished initial setup</TD></TR><TR><TD CLASS="l">846</TD><TD> </TD></TR><TR><TD CLASS="l">847</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">848</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">849</TD><TD>                                        gameState=STATE_END_TURN;</TD></TR><TR><TD CLASS="l">850</TD><TD> </TD></TR><TR><TD CLASS="l">851</TD><TD>                                }</TD></TR><TR><TD CLASS="l">852</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">853</TD><TD>                                if ( checkPlayerWon() ) {</TD></TR><TR CLASS="z"><TD CLASS="l">854</TD><TD>                                        done=2;</TD></TR><TR><TD CLASS="l">855</TD><TD>                                }</TD></TR><TR><TD CLASS="l">856</TD><TD> </TD></TR><TR><TD CLASS="l">857</TD><TD>                        }</TD></TR><TR><TD CLASS="l">858</TD><TD> </TD></TR><TR><TD CLASS="l">859</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">860</TD><TD>                return done;</TD></TR><TR><TD CLASS="l">861</TD><TD> </TD></TR><TR><TD CLASS="l">862</TD><TD>        }</TD></TR><TR><TD CLASS="l">863</TD><TD> </TD></TR><TR><TD CLASS="l">864</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="c">865</A></TD><TD>         * Automatically places an army on an unoccupied country</TD></TR><TR><TD CLASS="l">866</TD><TD>         * @return int Returns the country id which an army was added to</TD></TR><TR><TD CLASS="l">867</TD><TD>         */</TD></TR><TR><TD CLASS="l">868</TD><TD>        public int getRandomCountry() {</TD></TR><TR CLASS="z"><TD CLASS="l">869</TD><TD>                if (gameState==STATE_PLACE_ARMIES) {</TD></TR><TR CLASS="z"><TD CLASS="l">870</TD><TD>                    if ( NoEmptyCountries() ) {</TD></TR><TR CLASS="z"><TD CLASS="l">871</TD><TD>                        List countries = currentPlayer.getTerritoriesOwned();</TD></TR><TR CLASS="z"><TD CLASS="l">872</TD><TD>                        return ((Country)countries.get( r.nextInt(countries.size()) )).getColor();</TD></TR><TR><TD CLASS="l">873</TD><TD>                    }</TD></TR><TR><TD CLASS="l">874</TD><TD>                    else {</TD></TR><TR><TD CLASS="l">875</TD><TD>                        // find a empty country</TD></TR><TR CLASS="z"><TD CLASS="l">876</TD><TD>                        int a = r.nextInt(Countries.length);</TD></TR><TR CLASS="z"><TD CLASS="l">877</TD><TD>                        boolean done = false;</TD></TR><TR CLASS="z"><TD CLASS="l">878</TD><TD>                        for (int c=a; c &lt; Countries.length ; c++) {</TD></TR><TR CLASS="z"><TD CLASS="l">879</TD><TD>                                if ( Countries[c].getOwner() == null ) {</TD></TR><TR CLASS="z"><TD CLASS="l">880</TD><TD>                                        return Countries[c].getColor();</TD></TR><TR><TD CLASS="l">881</TD><TD>                                }</TD></TR><TR CLASS="z"><TD CLASS="l">882</TD><TD>                                else if ( c == Countries.length-1 &amp;&amp; !done ) {</TD></TR><TR CLASS="z"><TD CLASS="l">883</TD><TD>                                        c = -1;</TD></TR><TR CLASS="z"><TD CLASS="l">884</TD><TD>                                        done = true;</TD></TR><TR><TD CLASS="l">885</TD><TD>                                }</TD></TR><TR CLASS="z"><TD CLASS="l">886</TD><TD>                                else if ( c == Countries.length-1 &amp;&amp; done ) {</TD></TR><TR CLASS="z"><TD CLASS="l">887</TD><TD>                                        break;</TD></TR><TR><TD CLASS="l">888</TD><TD>                                }</TD></TR><TR><TD CLASS="l">889</TD><TD>                        }</TD></TR><TR><TD CLASS="l">890</TD><TD>                    }</TD></TR><TR><TD CLASS="l">891</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">892</TD><TD>                throw new IllegalStateException();</TD></TR><TR><TD CLASS="l">893</TD><TD>        }</TD></TR><TR><TD CLASS="l">894</TD><TD> </TD></TR><TR><TD CLASS="l">895</TD><TD>        /**</TD></TR><TR><TD CLASS="l">896</TD><TD>         * Attacks one country and another</TD></TR><TR><TD CLASS="l">897</TD><TD>         * @param t1 Attacking country</TD></TR><TR><TD CLASS="l">898</TD><TD>         * @param t2 Defending country</TD></TR><TR><TD CLASS="l"><A NAME="3f">899</A></TD><TD>         * @return int[] Returns an array which determines if the player is allowed to roll dice</TD></TR><TR><TD CLASS="l">900</TD><TD>         */</TD></TR><TR><TD CLASS="l">901</TD><TD>        public boolean attack(Country t1, Country t2) {</TD></TR><TR><TD CLASS="l">902</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">903</TD><TD>                boolean result=false;</TD></TR><TR><TD CLASS="l">904</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">905</TD><TD>                if (gameState==STATE_ATTACKING) {</TD></TR><TR><TD CLASS="l">906</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">907</TD><TD>                        if (</TD></TR><TR><TD CLASS="l">908</TD><TD>                                        t1!=null &amp;&amp;</TD></TR><TR><TD CLASS="l">909</TD><TD>                                        t2!=null &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">910</TD><TD>                                        t1.getOwner()==currentPlayer &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">911</TD><TD>                                        t2.getOwner()!=currentPlayer &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">912</TD><TD>                                        t1.isNeighbours(t2) &amp;&amp;</TD></TR><TR><TD CLASS="l">913</TD><TD>                                        // t2.isNeighbours(t1) &amp;&amp; // not needed as there is code to check this</TD></TR><TR CLASS="c"><TD CLASS="l">914</TD><TD>                                        t1.getArmies() &gt; 1</TD></TR><TR><TD CLASS="l">915</TD><TD>                        ) {</TD></TR><TR><TD CLASS="l">916</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">917</TD><TD>                                currentPlayer.currentStatistic.addAttack();</TD></TR><TR CLASS="c"><TD CLASS="l">918</TD><TD>                                ((Player)t2.getOwner()).currentStatistic.addAttacked();</TD></TR><TR><TD CLASS="l">919</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">920</TD><TD>                                result=true;</TD></TR><TR><TD CLASS="l">921</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">922</TD><TD>                                attacker=t1;</TD></TR><TR CLASS="c"><TD CLASS="l">923</TD><TD>                                defender=t2;</TD></TR><TR CLASS="c"><TD CLASS="l">924</TD><TD>                                battleRounds = 0;</TD></TR><TR CLASS="c"><TD CLASS="l">925</TD><TD>                                gameState=STATE_ROLLING;</TD></TR><TR><TD CLASS="l">926</TD><TD>                                //System.out.print(&#34;Attacking &#34;+t2.getName()+&#34; (&#34;+t2.getArmies()+&#34;) with &#34;+t1.getName()+&#34; (&#34;+t1.getArmies()+&#34;).\n&#34;); // testing</TD></TR><TR><TD CLASS="l">927</TD><TD>                        }</TD></TR><TR><TD CLASS="l">928</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">929</TD><TD>                return result;</TD></TR><TR><TD CLASS="l">930</TD><TD>        }</TD></TR><TR><TD CLASS="l">931</TD><TD> </TD></TR><TR><TD CLASS="l">932</TD><TD>        /**</TD></TR><TR><TD CLASS="l">933</TD><TD>         * Ends the attacking phase</TD></TR><TR><TD CLASS="l"><A NAME="25">934</A></TD><TD>         * @return boolean Returns true if the player ended the attacking phase, returns false if the player cannot end the attacking phase</TD></TR><TR><TD CLASS="l">935</TD><TD>         */</TD></TR><TR><TD CLASS="l">936</TD><TD>        public boolean endAttack() {</TD></TR><TR><TD CLASS="l">937</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">938</TD><TD>                if (gameState==STATE_ATTACKING) { // if we were in the attack phase</TD></TR><TR><TD CLASS="l">939</TD><TD> </TD></TR><TR><TD CLASS="l">940</TD><TD>                        // YURA:TODO check if there are any countries with more then 1 amy, maybe even check that a move can be made</TD></TR><TR><TD CLASS="l">941</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">942</TD><TD>                        gameState=STATE_FORTIFYING; // go to move phase</TD></TR><TR><TD CLASS="l">943</TD><TD>                        //System.out.print(&#34;Attack phase ended\n&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">944</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">945</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">946</TD><TD>                return false;</TD></TR><TR><TD CLASS="l">947</TD><TD>        }</TD></TR><TR><TD CLASS="l">948</TD><TD> </TD></TR><TR><TD CLASS="l">949</TD><TD>        /**</TD></TR><TR><TD CLASS="l">950</TD><TD>         * Rolls the attackersdice</TD></TR><TR><TD CLASS="l">951</TD><TD>         * @param dice1 Number of dice to be used by the attacker</TD></TR><TR><TD CLASS="l"><A NAME="28">952</A></TD><TD>         * @return boolean Return if the roll was successful</TD></TR><TR><TD CLASS="l">953</TD><TD>         */</TD></TR><TR><TD CLASS="l">954</TD><TD>        public boolean rollA(int dice1) {</TD></TR><TR><TD CLASS="l">955</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">956</TD><TD>                if (gameState==STATE_ROLLING) { // if we were in the attacking phase</TD></TR><TR><TD CLASS="l">957</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">958</TD><TD>                        if ( attacker.getArmies() &gt; 4 ) {</TD></TR><TR CLASS="p"><TD TITLE="71% line coverage (5 out of 7 instructions)" CLASS="l">959</TD><TD TITLE="71% line coverage (5 out of 7 instructions)">                                if (dice1&lt;=0 || dice1&gt;3) return false;</TD></TR><TR><TD CLASS="l">960</TD><TD>                        }</TD></TR><TR><TD CLASS="l">961</TD><TD>                        else {</TD></TR><TR CLASS="p"><TD TITLE="82% line coverage (9 out of 11 instructions)" CLASS="l">962</TD><TD TITLE="82% line coverage (9 out of 11 instructions)">                                if (dice1&lt;=0 || dice1&gt; (attacker.getArmies()-1) ) return false;</TD></TR><TR><TD CLASS="l">963</TD><TD>                        }</TD></TR><TR><TD CLASS="l">964</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">965</TD><TD>                        attackerDice = dice1; // 5 2 0</TD></TR><TR><TD CLASS="l">966</TD><TD> </TD></TR><TR><TD CLASS="l">967</TD><TD>                        // System.out.print(&#34;NUMBER OF DICE: &#34; + dice1 + &#34; or &#34; + attackerDice.length + &#34;\n&#34;);</TD></TR><TR><TD CLASS="l">968</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">969</TD><TD>                        currentPlayer=defender.getOwner();</TD></TR><TR CLASS="c"><TD CLASS="l">970</TD><TD>                        gameState=STATE_DEFEND_YOURSELF;</TD></TR><TR CLASS="c"><TD CLASS="l">971</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">972</TD><TD> </TD></TR><TR><TD CLASS="l">973</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">974</TD><TD>                else return false;</TD></TR><TR><TD CLASS="l">975</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="27">976</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">977</TD><TD> </TD></TR><TR><TD CLASS="l">978</TD><TD>        public boolean rollD(int dice2) {</TD></TR><TR><TD CLASS="l">979</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">980</TD><TD>                if (gameState==STATE_DEFEND_YOURSELF) { // if we were in the defending phase</TD></TR><TR><TD CLASS="l">981</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">982</TD><TD>                        if ( defender.getArmies() &gt; maxDefendDice ) {</TD></TR><TR CLASS="p"><TD TITLE="75% line coverage (6 out of 8 instructions)" CLASS="l">983</TD><TD TITLE="75% line coverage (6 out of 8 instructions)">                                if (dice2&lt;=0 || dice2&gt;maxDefendDice) return false;</TD></TR><TR><TD CLASS="l">984</TD><TD>                        }</TD></TR><TR><TD CLASS="l">985</TD><TD>                        else {</TD></TR><TR CLASS="p"><TD TITLE="78% line coverage (7 out of 9 instructions)" CLASS="l">986</TD><TD TITLE="78% line coverage (7 out of 9 instructions)">                                if (dice2&lt;=0 || dice2&gt; (defender.getArmies()) ) return false;</TD></TR><TR><TD CLASS="l">987</TD><TD>                        }</TD></TR><TR><TD CLASS="l">988</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">989</TD><TD>                        currentPlayer=attacker.getOwner();</TD></TR><TR><TD CLASS="l">990</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">991</TD><TD>                        defenderDice = dice2; // 4 3</TD></TR><TR><TD CLASS="l">992</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">993</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">994</TD><TD> </TD></TR><TR><TD CLASS="l">995</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">996</TD><TD>                else return false;</TD></TR><TR><TD CLASS="l"><A NAME="43">997</A></TD><TD> </TD></TR><TR><TD CLASS="l">998</TD><TD>        }</TD></TR><TR><TD CLASS="l">999</TD><TD> </TD></TR><TR><TD CLASS="l">1000</TD><TD>        public int getAttackerDice() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="53">1001</A></TD><TD>                return attackerDice;</TD></TR><TR><TD CLASS="l">1002</TD><TD>        }</TD></TR><TR><TD CLASS="l">1003</TD><TD> </TD></TR><TR><TD CLASS="l">1004</TD><TD>        public int getDefenderDice() {</TD></TR><TR CLASS="c"><TD CLASS="l">1005</TD><TD>                return defenderDice;</TD></TR><TR><TD CLASS="l">1006</TD><TD>        }</TD></TR><TR><TD CLASS="l">1007</TD><TD> </TD></TR><TR><TD CLASS="l">1008</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="44">1009</A></TD><TD>         * Get the number of rolls that have taken place in the current attack</TD></TR><TR><TD CLASS="l">1010</TD><TD>         * @return</TD></TR><TR><TD CLASS="l">1011</TD><TD>         */</TD></TR><TR><TD CLASS="l">1012</TD><TD>        public int getBattleRounds() {</TD></TR><TR CLASS="c"><TD CLASS="l">1013</TD><TD>                return battleRounds;</TD></TR><TR><TD CLASS="l">1014</TD><TD>        }</TD></TR><TR><TD CLASS="l">1015</TD><TD> </TD></TR><TR><TD CLASS="l">1016</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1017</TD><TD>         * Rolls the defenders dice</TD></TR><TR><TD CLASS="l">1018</TD><TD>         * @param attackerResults The results for the attacker</TD></TR><TR><TD CLASS="l">1019</TD><TD>         * @param defenderResults The results for the defender</TD></TR><TR><TD CLASS="l"><A NAME="3a">1020</A></TD><TD>         * @return int[] Returns an array which will determine the results of the attack</TD></TR><TR><TD CLASS="l">1021</TD><TD>         */</TD></TR><TR><TD CLASS="l">1022</TD><TD>        public int[] battle(int[] attackerResults, int[] defenderResults) {</TD></TR><TR><TD CLASS="l">1023</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1024</TD><TD>                int[] result = new int[6];</TD></TR><TR CLASS="c"><TD CLASS="l">1025</TD><TD>                result[0]=0; // worked or not</TD></TR><TR CLASS="c"><TD CLASS="l">1026</TD><TD>                result[1]=0; // no of armies attacker lost</TD></TR><TR CLASS="c"><TD CLASS="l">1027</TD><TD>                result[2]=0; // no of armies defender lost</TD></TR><TR CLASS="c"><TD CLASS="l">1028</TD><TD>                result[3]=0; // did you win</TD></TR><TR CLASS="c"><TD CLASS="l">1029</TD><TD>                result[4]=0; // min move</TD></TR><TR CLASS="c"><TD CLASS="l">1030</TD><TD>                result[5]=0; // max move</TD></TR><TR><TD CLASS="l">1031</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1032</TD><TD>                if (gameState==STATE_DEFEND_YOURSELF) { // if we were in the defending phase</TD></TR><TR CLASS="c"><TD CLASS="l">1033</TD><TD>                        battleRounds++;</TD></TR><TR><TD CLASS="l">1034</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1035</TD><TD>                        for (int aResult:attackerResults) {</TD></TR><TR CLASS="c"><TD CLASS="l">1036</TD><TD>                            attacker.getOwner().currentStatistic.addDice(aResult);</TD></TR><TR><TD CLASS="l">1037</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1038</TD><TD>                        for (int aResult:defenderResults) {</TD></TR><TR CLASS="c"><TD CLASS="l">1039</TD><TD>                            defender.getOwner().currentStatistic.addDice(aResult);</TD></TR><TR><TD CLASS="l">1040</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1041</TD><TD> </TD></TR><TR><TD CLASS="l">1042</TD><TD>                        // battle away!</TD></TR><TR CLASS="c"><TD CLASS="l">1043</TD><TD>                        for (int c=0; c&lt; Math.min(attackerResults.length, defenderResults.length) ; c++) {</TD></TR><TR><TD CLASS="l">1044</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1045</TD><TD>                                if (attackerResults[c] &gt; defenderResults[c]) {</TD></TR><TR CLASS="c"><TD CLASS="l">1046</TD><TD>                                        defender.looseArmy();</TD></TR><TR CLASS="c"><TD CLASS="l">1047</TD><TD>                                        defender.getOwner().currentStatistic.addCasualty();</TD></TR><TR CLASS="c"><TD CLASS="l">1048</TD><TD>                                        attacker.getOwner().currentStatistic.addKill();</TD></TR><TR CLASS="c"><TD CLASS="l">1049</TD><TD>                                        result[2]++;</TD></TR><TR><TD CLASS="l">1050</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1051</TD><TD>                                else {</TD></TR><TR CLASS="c"><TD CLASS="l">1052</TD><TD>                                        attacker.looseArmy();</TD></TR><TR CLASS="c"><TD CLASS="l">1053</TD><TD>                                        attacker.getOwner().currentStatistic.addCasualty();</TD></TR><TR CLASS="c"><TD CLASS="l">1054</TD><TD>                                        defender.getOwner().currentStatistic.addKill();</TD></TR><TR CLASS="c"><TD CLASS="l">1055</TD><TD>                                        result[1]++;</TD></TR><TR><TD CLASS="l">1056</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1057</TD><TD> </TD></TR><TR><TD CLASS="l">1058</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1059</TD><TD> </TD></TR><TR><TD CLASS="l">1060</TD><TD>                        // if all the armies have been defeated</TD></TR><TR CLASS="c"><TD CLASS="l">1061</TD><TD>                        if (defender.getArmies() == 0) {</TD></TR><TR><TD CLASS="l">1062</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1063</TD><TD>                                ((Player)attacker.getOwner()).currentStatistic.addCountriesWon();</TD></TR><TR CLASS="c"><TD CLASS="l">1064</TD><TD>                                ((Player)defender.getOwner()).currentStatistic.addCountriesLost();</TD></TR><TR><TD CLASS="l">1065</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1066</TD><TD>                                result[5]=attacker.getArmies()-1;</TD></TR><TR><TD CLASS="l">1067</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1068</TD><TD>                                capturedCountry=true;</TD></TR><TR><TD CLASS="l">1069</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1070</TD><TD>                                Player lostPlayer=(Player)defender.getOwner();</TD></TR><TR><TD CLASS="l">1071</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1072</TD><TD>                                lostPlayer.lostCountry(defender);</TD></TR><TR CLASS="c"><TD CLASS="l">1073</TD><TD>                                currentPlayer.newCountry(defender);</TD></TR><TR><TD CLASS="l">1074</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1075</TD><TD>                                defender.setOwner( (Player)attacker.getOwner() );</TD></TR><TR CLASS="c"><TD CLASS="l">1076</TD><TD>                                result[3]=1;</TD></TR><TR CLASS="c"><TD CLASS="l">1077</TD><TD>                                gameState=STATE_BATTLE_WON;</TD></TR><TR CLASS="c"><TD CLASS="l">1078</TD><TD>                                mustmove=attackerResults.length;</TD></TR><TR><TD CLASS="l">1079</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1080</TD><TD>                                result[4]=mustmove;</TD></TR><TR><TD CLASS="l">1081</TD><TD> </TD></TR><TR><TD CLASS="l">1082</TD><TD> </TD></TR><TR><TD CLASS="l">1083</TD><TD>                                // if the player has been eliminated</TD></TR><TR CLASS="c"><TD CLASS="l">1084</TD><TD>                                if ( lostPlayer.getNoTerritoriesOwned() == 0) {</TD></TR><TR><TD CLASS="l">1085</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1086</TD><TD>                                        result[3]=2;</TD></TR><TR><TD CLASS="l">1087</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1088</TD><TD>                                        currentPlayer.addPlayersEliminated(lostPlayer);</TD></TR><TR><TD CLASS="l">1089</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1090</TD><TD>                                        while (lostPlayer.getCards().size() &gt; 0) {</TD></TR><TR><TD CLASS="l">1091</TD><TD> </TD></TR><TR><TD CLASS="l">1092</TD><TD>                                                //System.out.print(&#34;Hes got a card .. i must take it!\n&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">1093</TD><TD>                                                currentPlayer.giveCard( lostPlayer.takeCard() );</TD></TR><TR><TD CLASS="l">1094</TD><TD> </TD></TR><TR><TD CLASS="l">1095</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1096</TD><TD> </TD></TR><TR><TD CLASS="l">1097</TD><TD>                                        // in italian rules there is no limit to the number of cards you can hold</TD></TR><TR><TD CLASS="l">1098</TD><TD>                                        // if winning the other players cards gives you 6 or more cards you must immediately trade</TD></TR><TR CLASS="c"><TD CLASS="l">1099</TD><TD>                                        if ( cardMode!=CARD_ITALIANLIKE_SET &amp;&amp; currentPlayer.getCards().size() &gt; MAX_CARDS) {</TD></TR><TR><TD CLASS="l">1100</TD><TD>                                                // gameState=STATE_BATTLE_WON;</TD></TR><TR CLASS="z"><TD CLASS="l">1101</TD><TD>                                                tradeCap=true;</TD></TR><TR><TD CLASS="l">1102</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1103</TD><TD> </TD></TR><TR><TD CLASS="l">1104</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1105</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1106</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1107</TD><TD>                        else if (attacker.getArmies() == 1) {</TD></TR><TR CLASS="c"><TD CLASS="l">1108</TD><TD>                                gameState=STATE_ATTACKING;</TD></TR><TR><TD CLASS="l">1109</TD><TD>                                //System.out.print(&#34;Retreating (FORCED)\n&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">1110</TD><TD>                                currentPlayer.currentStatistic.addRetreat();</TD></TR><TR><TD CLASS="l">1111</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1112</TD><TD>                        else { gameState=STATE_ROLLING; }</TD></TR><TR><TD CLASS="l">1113</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1114</TD><TD>                        defenderDice = 0;</TD></TR><TR CLASS="c"><TD CLASS="l">1115</TD><TD>                        attackerDice = 0;</TD></TR><TR CLASS="c"><TD CLASS="l">1116</TD><TD>                        result[0]=1;</TD></TR><TR><TD CLASS="l">1117</TD><TD> </TD></TR><TR><TD CLASS="l">1118</TD><TD>                }</TD></TR><TR><TD CLASS="l">1119</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1120</TD><TD>                return result;</TD></TR><TR><TD CLASS="l">1121</TD><TD>        }</TD></TR><TR><TD CLASS="l">1122</TD><TD> </TD></TR><TR><TD CLASS="l">1123</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1124</TD><TD>         * Moves a number of armies from the attacking country to defending country</TD></TR><TR><TD CLASS="l">1125</TD><TD>         * @param noa Number of armies to be moved</TD></TR><TR><TD CLASS="l"><A NAME="31">1126</A></TD><TD>         * @return 1 or 2 if you can move the number of armies across (2 if you won the game), returns 0 if you cannot</TD></TR><TR><TD CLASS="l">1127</TD><TD>         */</TD></TR><TR><TD CLASS="l">1128</TD><TD>        public int moveArmies(int noa) {</TD></TR><TR><TD CLASS="l">1129</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1130</TD><TD>                if (gameState==STATE_BATTLE_WON &amp;&amp; mustmove&gt;0 &amp;&amp; noa&gt;= mustmove &amp;&amp; noa&lt;attacker.getArmies() ) {</TD></TR><TR><TD CLASS="l">1131</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1132</TD><TD>                        attacker.removeArmies(noa);</TD></TR><TR CLASS="c"><TD CLASS="l">1133</TD><TD>                        defender.addArmies(noa);</TD></TR><TR><TD CLASS="l">1134</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="93% line coverage (26 out of 28 instructions)" CLASS="l">1135</TD><TD TITLE="93% line coverage (26 out of 28 instructions)">                        gameState=tradeCap?STATE_TRADE_CARDS:STATE_ATTACKING;</TD></TR><TR><TD CLASS="l">1136</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1137</TD><TD>                        attacker=null;</TD></TR><TR CLASS="c"><TD CLASS="l">1138</TD><TD>                        defender=null;</TD></TR><TR CLASS="c"><TD CLASS="l">1139</TD><TD>                        mustmove=0;</TD></TR><TR><TD CLASS="l">1140</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1141</TD><TD>                        return checkPlayerWon()?2:1;</TD></TR><TR><TD CLASS="l">1142</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1143</TD><TD>                return 0;</TD></TR><TR><TD CLASS="l">1144</TD><TD>        }</TD></TR><TR><TD CLASS="l">1145</TD><TD> </TD></TR><TR><TD CLASS="l">1146</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1147</TD><TD>         * Moves all of armies from the attacking country to defending country</TD></TR><TR><TD CLASS="l"><A NAME="29">1148</A></TD><TD>         * @return int Return trues if you can move the number of armies across, returns false if you cannot</TD></TR><TR><TD CLASS="l">1149</TD><TD>         */</TD></TR><TR><TD CLASS="l">1150</TD><TD>        public int moveAll() {</TD></TR><TR><TD CLASS="l">1151</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1152</TD><TD>                if (gameState==STATE_BATTLE_WON &amp;&amp; mustmove&gt;0) {</TD></TR><TR><TD CLASS="l">1153</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1154</TD><TD>                        return attacker.getArmies() - 1;</TD></TR><TR><TD CLASS="l">1155</TD><TD> </TD></TR><TR><TD CLASS="l">1156</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1157</TD><TD>                return -1;</TD></TR><TR><TD CLASS="l"><A NAME="5c">1158</A></TD><TD> </TD></TR><TR><TD CLASS="l">1159</TD><TD>        }</TD></TR><TR><TD CLASS="l">1160</TD><TD> </TD></TR><TR><TD CLASS="l">1161</TD><TD>        public int getMustMove() {</TD></TR><TR CLASS="c"><TD CLASS="l">1162</TD><TD>                return mustmove;</TD></TR><TR><TD CLASS="l">1163</TD><TD>        }</TD></TR><TR><TD CLASS="l">1164</TD><TD> </TD></TR><TR><TD CLASS="l">1165</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1166</TD><TD>         * Retreats from attacking a country</TD></TR><TR><TD CLASS="l"><A NAME="2f">1167</A></TD><TD>         * @return boolean Returns true if you can retreat, returns false if you cannot</TD></TR><TR><TD CLASS="l">1168</TD><TD>         */</TD></TR><TR><TD CLASS="l">1169</TD><TD>        public boolean retreat() {</TD></TR><TR><TD CLASS="l">1170</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1171</TD><TD>                if (gameState==STATE_ROLLING) { // if we were in the attacking phase</TD></TR><TR><TD CLASS="l">1172</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1173</TD><TD>                        currentPlayer.currentStatistic.addRetreat();</TD></TR><TR><TD CLASS="l">1174</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1175</TD><TD>                        gameState=STATE_ATTACKING; // go to attack phase</TD></TR><TR><TD CLASS="l">1176</TD><TD>                        //System.out.print(&#34;Retreating\n&#34;);</TD></TR><TR><TD CLASS="l">1177</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1178</TD><TD>                        attacker=null;</TD></TR><TR CLASS="c"><TD CLASS="l">1179</TD><TD>                        defender=null;</TD></TR><TR><TD CLASS="l">1180</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1181</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">1182</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1183</TD><TD>                return false;</TD></TR><TR><TD CLASS="l">1184</TD><TD>        }</TD></TR><TR><TD CLASS="l">1185</TD><TD> </TD></TR><TR><TD CLASS="l">1186</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1187</TD><TD>         * Moves armies from one country to an adjacent country and goes to the end phase</TD></TR><TR><TD CLASS="l">1188</TD><TD>         * @param t1 Country where the armies are moving from</TD></TR><TR><TD CLASS="l">1189</TD><TD>         * @param t2 Country where the armies are moving to</TD></TR><TR><TD CLASS="l"><A NAME="34">1190</A></TD><TD>         * @param noa Number of Armies to move</TD></TR><TR><TD CLASS="l">1191</TD><TD>         * @return boolean Returns true if the tactical move is allowed, returns false if the tactical move is not allowed</TD></TR><TR><TD CLASS="l">1192</TD><TD>         */</TD></TR><TR><TD CLASS="l">1193</TD><TD>        public boolean moveArmy(Country t1, Country t2, int noa) {</TD></TR><TR CLASS="c"><TD CLASS="l">1194</TD><TD>                if (gameState==STATE_FORTIFYING) {</TD></TR><TR><TD CLASS="l">1195</TD><TD> </TD></TR><TR><TD CLASS="l">1196</TD><TD>                        // do they exist //check if they belong to the player //check if they are neighbours //check if there are enough troops in country1</TD></TR><TR CLASS="c"><TD CLASS="l">1197</TD><TD>                        if (</TD></TR><TR><TD CLASS="l">1198</TD><TD>                                        t1!=null &amp;&amp;</TD></TR><TR><TD CLASS="l">1199</TD><TD>                                        t2!=null &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">1200</TD><TD>                                        t1.getOwner()==currentPlayer &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">1201</TD><TD>                                        t2.getOwner()==currentPlayer &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">1202</TD><TD>                                        t1.isNeighbours(t2) &amp;&amp;</TD></TR><TR><TD CLASS="l">1203</TD><TD>                                        // t2.isNeighbours(t1) &amp;&amp; // not needed as there is code to check this</TD></TR><TR CLASS="c"><TD CLASS="l">1204</TD><TD>                                        t1.getArmies() &gt; noa &amp;&amp;</TD></TR><TR><TD CLASS="l">1205</TD><TD>                                        noa &gt; 0</TD></TR><TR><TD CLASS="l">1206</TD><TD>                        ) {</TD></TR><TR><TD CLASS="l">1207</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1208</TD><TD>                                t1.removeArmies(noa);</TD></TR><TR CLASS="c"><TD CLASS="l">1209</TD><TD>                                t2.addArmies(noa);</TD></TR><TR CLASS="c"><TD CLASS="l">1210</TD><TD>                                gameState=STATE_END_TURN;</TD></TR><TR><TD CLASS="l">1211</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1212</TD><TD>                                checkPlayerWon();</TD></TR><TR><TD CLASS="l">1213</TD><TD> </TD></TR><TR><TD CLASS="l">1214</TD><TD>                                //System.out.println(&#34;Armies Moved. &#34;+gameState); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1215</TD><TD>                                return true;</TD></TR><TR><TD CLASS="l">1216</TD><TD> </TD></TR><TR><TD CLASS="l">1217</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1218</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1219</TD><TD>                return false;</TD></TR><TR><TD CLASS="l">1220</TD><TD> </TD></TR><TR><TD CLASS="l">1221</TD><TD>        }</TD></TR><TR><TD CLASS="l">1222</TD><TD> </TD></TR><TR><TD CLASS="l">1223</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1224</TD><TD>         * Choosing not to use the tactical move and moves to the end phase</TD></TR><TR><TD CLASS="l"><A NAME="26">1225</A></TD><TD>         * @return boolean Returns true if you are in the right phase to use the tactical move and returns false otherwise</TD></TR><TR><TD CLASS="l">1226</TD><TD>         */</TD></TR><TR><TD CLASS="l">1227</TD><TD>        public boolean noMove() {</TD></TR><TR><TD CLASS="l">1228</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1229</TD><TD>                if (gameState==STATE_FORTIFYING) { // if we were in the move phase</TD></TR><TR CLASS="c"><TD CLASS="l">1230</TD><TD>                        gameState=STATE_END_TURN; // go to end phase</TD></TR><TR><TD CLASS="l">1231</TD><TD> </TD></TR><TR><TD CLASS="l">1232</TD><TD>                        //System.out.print(&#34;No Move.\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1233</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">1234</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1235</TD><TD>                else return false;</TD></TR><TR><TD CLASS="l">1236</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="74">1237</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1238</TD><TD> </TD></TR><TR><TD CLASS="l">1239</TD><TD>        public void workOutEndGoStats(Player p) {</TD></TR><TR><TD CLASS="l">1240</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1241</TD><TD>                int countries = p.getNoTerritoriesOwned();</TD></TR><TR CLASS="c"><TD CLASS="l">1242</TD><TD>                int armies = p.getNoArmies();</TD></TR><TR CLASS="c"><TD CLASS="l">1243</TD><TD>                int continents = getNoContinentsOwned(p);</TD></TR><TR CLASS="c"><TD CLASS="l">1244</TD><TD>                int conectedEmpire = getConnectedEmpire(p).size();</TD></TR><TR CLASS="c"><TD CLASS="l">1245</TD><TD>                int cards = p.getCards().size();</TD></TR><TR><TD CLASS="l">1246</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1247</TD><TD>                p.currentStatistic.endGoStatistics(countries, armies, continents, conectedEmpire, cards);</TD></TR><TR><TD CLASS="l">1248</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="4c">1249</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1250</TD><TD> </TD></TR><TR><TD CLASS="l">1251</TD><TD>        public List getConnectedEmpire(Player p) {</TD></TR><TR><TD CLASS="l">1252</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1253</TD><TD>                Vector t = (Vector)p.getTerritoriesOwned().clone();</TD></TR><TR><TD CLASS="l">1254</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1255</TD><TD>                Vector a = new Vector();</TD></TR><TR CLASS="c"><TD CLASS="l">1256</TD><TD>                Vector b = new Vector();</TD></TR><TR><TD CLASS="l">1257</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1258</TD><TD>                while ( t.isEmpty() == false ) {</TD></TR><TR><TD CLASS="l">1259</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1260</TD><TD>                        Country country = ((Country)t.remove(0));</TD></TR><TR><TD CLASS="l">1261</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1262</TD><TD>                        a.add( country );</TD></TR><TR><TD CLASS="l">1263</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1264</TD><TD>                        getConnectedEmpire( t, a, country.getNeighbours() , p );</TD></TR><TR><TD CLASS="l">1265</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1266</TD><TD>                        if (a.size() &gt; b.size() ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1267</TD><TD>                                b = a;</TD></TR><TR><TD CLASS="l">1268</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1269</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1270</TD><TD>                        a = new Vector();</TD></TR><TR><TD CLASS="l">1271</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1272</TD><TD>                }</TD></TR><TR><TD CLASS="l">1273</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1274</TD><TD>                return b;</TD></TR><TR><TD CLASS="l">1275</TD><TD> </TD></TR><TR><TD CLASS="l">1276</TD><TD>        }</TD></TR><TR><TD CLASS="l">1277</TD><TD> </TD></TR><TR><TD CLASS="l">1278</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1279</TD><TD>         * Finds the largest number of connected territories owned by a single player</TD></TR><TR><TD CLASS="l">1280</TD><TD>         * @param t Vector of territories owned by a single player (volatile)</TD></TR><TR><TD CLASS="l">1281</TD><TD>         * @param a Vector of adjacent territories</TD></TR><TR><TD CLASS="l">1282</TD><TD>         * @param n Vector of territories owned by a single player (non-volatile)</TD></TR><TR><TD CLASS="l"><A NAME="4b">1283</A></TD><TD>         * @param p The current player</TD></TR><TR><TD CLASS="l">1284</TD><TD>         */</TD></TR><TR><TD CLASS="l">1285</TD><TD>        public void getConnectedEmpire(List t, List a, List n, Player p) {</TD></TR><TR><TD CLASS="l">1286</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1287</TD><TD>                for (int i = 0; i &lt; n.size() ; i++) {</TD></TR><TR><TD CLASS="l">1288</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1289</TD><TD>                        if ( ((Country)n.get(i)).getOwner() == p &amp;&amp; t.contains( n.get(i) ) ) {</TD></TR><TR><TD CLASS="l">1290</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1291</TD><TD>                                Country country = (Country)n.get(i);</TD></TR><TR CLASS="c"><TD CLASS="l">1292</TD><TD>                                t.remove( country );</TD></TR><TR CLASS="c"><TD CLASS="l">1293</TD><TD>                                a.add( country );</TD></TR><TR><TD CLASS="l">1294</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1295</TD><TD>                                getConnectedEmpire( t, a, country.getNeighbours(), p);</TD></TR><TR><TD CLASS="l">1296</TD><TD> </TD></TR><TR><TD CLASS="l">1297</TD><TD> </TD></TR><TR><TD CLASS="l">1298</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1299</TD><TD>                }</TD></TR><TR><TD CLASS="l">1300</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1301</TD><TD>        }</TD></TR><TR><TD CLASS="l">1302</TD><TD> </TD></TR><TR><TD CLASS="l">1303</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1304</TD><TD>         * Sets the capital for a player - ONLY FOR CAPITAL RISK</TD></TR><TR><TD CLASS="l">1305</TD><TD>         * @param c The capital country</TD></TR><TR><TD CLASS="l"><A NAME="36">1306</A></TD><TD>         * @return boolean Returns true if the country is set as the capital, returns false otherwise</TD></TR><TR><TD CLASS="l">1307</TD><TD>         */</TD></TR><TR><TD CLASS="l">1308</TD><TD>        public boolean setCapital(Country c) {</TD></TR><TR><TD CLASS="l">1309</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1310</TD><TD>                if (gameState== STATE_SELECT_CAPITAL &amp;&amp; gameMode == 2 &amp;&amp; c.getOwner()==currentPlayer &amp;&amp; currentPlayer.getCapital()==null) {</TD></TR><TR><TD CLASS="l">1311</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1312</TD><TD>                        currentPlayer.setCapital(c);</TD></TR><TR><TD CLASS="l">1313</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1314</TD><TD>                        for (int b=0; b&lt; Cards.size() ; b++) {</TD></TR><TR><TD CLASS="l">1315</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1316</TD><TD>                                if ( c== ((Card)Cards.elementAt(b)).getCountry() ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1317</TD><TD>                                        Cards.removeElementAt(b);</TD></TR><TR><TD CLASS="l">1318</TD><TD>                                        //System.out.print(&#34;card removed because it is a capital\n&#34;);</TD></TR><TR><TD CLASS="l">1319</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1320</TD><TD> </TD></TR><TR><TD CLASS="l">1321</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1322</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1323</TD><TD>                        gameState=STATE_END_TURN;</TD></TR><TR><TD CLASS="l">1324</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1325</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">1326</TD><TD> </TD></TR><TR><TD CLASS="l">1327</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1328</TD><TD>                return false;</TD></TR><TR><TD CLASS="l">1329</TD><TD> </TD></TR><TR><TD CLASS="l">1330</TD><TD>        }</TD></TR><TR><TD CLASS="l">1331</TD><TD> </TD></TR><TR><TD CLASS="l">1332</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1333</TD><TD>         * Check if a player has won the game</TD></TR><TR><TD CLASS="l"><A NAME="1e">1334</A></TD><TD>         * @return boolean Returns true if the player has won the game, returns false otherwise</TD></TR><TR><TD CLASS="l">1335</TD><TD>         */</TD></TR><TR><TD CLASS="l">1336</TD><TD>        public boolean checkPlayerWon() {</TD></TR><TR><TD CLASS="l">1337</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1338</TD><TD>                boolean result=false;</TD></TR><TR><TD CLASS="l">1339</TD><TD> </TD></TR><TR><TD CLASS="l">1340</TD><TD>                // check if the player has won</TD></TR><TR CLASS="c"><TD CLASS="l">1341</TD><TD>                int won=0;</TD></TR><TR CLASS="c"><TD CLASS="l">1342</TD><TD>                for (int c=0; c&lt; Continents.length ; c++) {</TD></TR><TR><TD CLASS="l">1343</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1344</TD><TD>                        if ( Continents[c].isOwned(currentPlayer) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1345</TD><TD>                                won++;</TD></TR><TR><TD CLASS="l">1346</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1347</TD><TD> </TD></TR><TR><TD CLASS="l">1348</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">1349</TD><TD>                if (won == Continents.length ) {</TD></TR><TR><TD CLASS="l">1350</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1351</TD><TD>                        result=true;</TD></TR><TR><TD CLASS="l">1352</TD><TD>                        //System.out.print(&#34;The Game Is Over, &#34;+currentPlayer.getName()+&#34; has won!\n&#34;);</TD></TR><TR><TD CLASS="l">1353</TD><TD> </TD></TR><TR><TD CLASS="l">1354</TD><TD>                }</TD></TR><TR><TD CLASS="l">1355</TD><TD> </TD></TR><TR><TD CLASS="l">1356</TD><TD>                // check if the player has won 2 player risk</TD></TR><TR><TD CLASS="l">1357</TD><TD> </TD></TR><TR><TD CLASS="l">1358</TD><TD>/* @todo: maybe add this back, as crap player can never win</TD></TR><TR><TD CLASS="l">1359</TD><TD> </TD></TR><TR><TD CLASS="l">1360</TD><TD>                else if (getSetupDone() &amp;&amp; gameMode==1) {</TD></TR><TR><TD CLASS="l">1361</TD><TD> </TD></TR><TR><TD CLASS="l">1362</TD><TD>                        Player target=null;</TD></TR><TR><TD CLASS="l">1363</TD><TD> </TD></TR><TR><TD CLASS="l">1364</TD><TD>                        for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR><TD CLASS="l">1365</TD><TD> </TD></TR><TR><TD CLASS="l">1366</TD><TD> </TD></TR><TR><TD CLASS="l">1367</TD><TD>                                        // ((Player)Players.elementAt(c)).getType() !=3 &amp;&amp;</TD></TR><TR><TD CLASS="l">1368</TD><TD> </TD></TR><TR><TD CLASS="l">1369</TD><TD>                                if (        (Player)Players.elementAt(c) != currentPlayer ) {</TD></TR><TR><TD CLASS="l">1370</TD><TD>                                        target = (Player)Players.elementAt(c);</TD></TR><TR><TD CLASS="l">1371</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1372</TD><TD> </TD></TR><TR><TD CLASS="l">1373</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1374</TD><TD> </TD></TR><TR><TD CLASS="l">1375</TD><TD>                        if ( target.getNoTerritoriesOwned()==0 ) {</TD></TR><TR><TD CLASS="l">1376</TD><TD> </TD></TR><TR><TD CLASS="l">1377</TD><TD>                                result=true;</TD></TR><TR><TD CLASS="l">1378</TD><TD> </TD></TR><TR><TD CLASS="l">1379</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1380</TD><TD> </TD></TR><TR><TD CLASS="l">1381</TD><TD>                }</TD></TR><TR><TD CLASS="l">1382</TD><TD>*/</TD></TR><TR><TD CLASS="l">1383</TD><TD> </TD></TR><TR><TD CLASS="l">1384</TD><TD>                // check if the player has won capital risk!</TD></TR><TR CLASS="c"><TD CLASS="l">1385</TD><TD>                else if (getSetupDone() &amp;&amp; gameMode==MODE_CAPITAL &amp;&amp; currentPlayer.getCapital() !=null ) {</TD></TR><TR><TD CLASS="l">1386</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1387</TD><TD>                        int capitalcount=0;</TD></TR><TR><TD CLASS="l">1388</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1389</TD><TD>                        if ( currentPlayer==((Country)currentPlayer.getCapital()).getOwner() ) {</TD></TR><TR><TD CLASS="l">1390</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1391</TD><TD>                                for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR><TD CLASS="l">1392</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1393</TD><TD>                                        if ( ((Vector)currentPlayer.getTerritoriesOwned()).contains((Country)((Player)Players.elementAt(c)).getCapital()) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1394</TD><TD>                                                capitalcount++;</TD></TR><TR><TD CLASS="l">1395</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1396</TD><TD> </TD></TR><TR><TD CLASS="l">1397</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1398</TD><TD> </TD></TR><TR><TD CLASS="l">1399</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1400</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1401</TD><TD>                        if ( capitalcount==Players.size() ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1402</TD><TD>                                result=true;</TD></TR><TR><TD CLASS="l">1403</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1404</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1405</TD><TD>                }</TD></TR><TR><TD CLASS="l">1406</TD><TD>                // check if the player has won mission risk!</TD></TR><TR CLASS="c"><TD CLASS="l">1407</TD><TD>                else if (getSetupDone() &amp;&amp; gameMode==MODE_SECRET_MISSION ) {</TD></TR><TR><TD CLASS="l">1408</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1409</TD><TD>                        Mission m = currentPlayer.getMission();</TD></TR><TR><TD CLASS="l">1410</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1411</TD><TD>                        if (</TD></TR><TR CLASS="p"><TD TITLE="58% line coverage (7 out of 12 instructions)" CLASS="l">1412</TD><TD TITLE="58% line coverage (7 out of 12 instructions)">                                        m.getPlayer() !=null &amp;&amp; // check is this is indeed a Elim Player card</TD></TR><TR CLASS="z"><TD CLASS="l">1413</TD><TD>                                        m.getPlayer() != currentPlayer &amp;&amp; // check if its not the current player u need to eliminate</TD></TR><TR CLASS="z"><TD CLASS="l">1414</TD><TD>                                        ((Player)m.getPlayer()).getNoTerritoriesOwned()==0 &amp;&amp; // chack if that player has been eliminated</TD></TR><TR CLASS="z"><TD CLASS="l">1415</TD><TD>                                        ((Vector)currentPlayer.getPlayersEliminated()).contains( m.getPlayer() ) //check if it was you who eliminated them</TD></TR><TR><TD CLASS="l">1416</TD><TD>                        ) {</TD></TR><TR><TD CLASS="l">1417</TD><TD> </TD></TR><TR><TD CLASS="l">1418</TD><TD>                                // yay you have won</TD></TR><TR CLASS="z"><TD CLASS="l">1419</TD><TD>                                result=true;</TD></TR><TR><TD CLASS="l">1420</TD><TD> </TD></TR><TR><TD CLASS="l">1421</TD><TD> </TD></TR><TR><TD CLASS="l">1422</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1423</TD><TD>                        else if (</TD></TR><TR CLASS="p"><TD TITLE="33% line coverage (3 out of 9 instructions)" CLASS="l">1424</TD><TD TITLE="33% line coverage (3 out of 9 instructions)">                                        m.getNoofcountries() != 0 &amp;&amp; m.getNoofarmies() != 0 &amp;&amp; // check if this card has a value for capture teretories</TD></TR><TR CLASS="z"><TD CLASS="l">1425</TD><TD>                                        ( m.getPlayer() == null || ((Player)m.getPlayer()).getNoTerritoriesOwned()==0 || (Player)m.getPlayer() == currentPlayer ) &amp;&amp;</TD></TR><TR CLASS="z"><TD CLASS="l">1426</TD><TD>                                        m.getNoofcountries() &lt;= currentPlayer.getNoTerritoriesOwned() // do you have that number of countries captured</TD></TR><TR><TD CLASS="l">1427</TD><TD>                        ) {</TD></TR><TR><TD CLASS="l">1428</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1429</TD><TD>                                int n=0;</TD></TR><TR><TD CLASS="l">1430</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1431</TD><TD>                                for (int c=0; c&lt; currentPlayer.getNoTerritoriesOwned() ; c++) {</TD></TR><TR CLASS="z"><TD CLASS="l">1432</TD><TD>                                        if ( ((Country)((Vector)currentPlayer.getTerritoriesOwned()).elementAt(c)).getArmies() &gt;= m.getNoofarmies() ) n++;</TD></TR><TR><TD CLASS="l">1433</TD><TD> </TD></TR><TR><TD CLASS="l">1434</TD><TD>                                }</TD></TR><TR CLASS="z"><TD CLASS="l">1435</TD><TD>                                if (n &gt;= m.getNoofcountries() ) {</TD></TR><TR><TD CLASS="l">1436</TD><TD> </TD></TR><TR><TD CLASS="l">1437</TD><TD>                                        // yay you have won</TD></TR><TR CLASS="z"><TD CLASS="l">1438</TD><TD>                                        result=true;</TD></TR><TR><TD CLASS="l">1439</TD><TD> </TD></TR><TR><TD CLASS="l">1440</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1441</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1442</TD><TD>                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1443</TD><TD>                        else if (</TD></TR><TR CLASS="c"><TD CLASS="l">1444</TD><TD>                                        (m.getContinent1() !=null) &amp;&amp; // this means its a continent mission</TD></TR><TR><TD CLASS="l">1445</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1446</TD><TD>                                        checkPlayerOwnesContinentForMission(m.getContinent1(),1) &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">1447</TD><TD>                                        checkPlayerOwnesContinentForMission(m.getContinent2(),2) &amp;&amp;</TD></TR><TR CLASS="c"><TD CLASS="l">1448</TD><TD>                                        checkPlayerOwnesContinentForMission(m.getContinent3(),3)</TD></TR><TR><TD CLASS="l">1449</TD><TD> </TD></TR><TR><TD CLASS="l">1450</TD><TD>                        ) {</TD></TR><TR><TD CLASS="l">1451</TD><TD> </TD></TR><TR><TD CLASS="l">1452</TD><TD>                                // yay you have won</TD></TR><TR CLASS="c"><TD CLASS="l">1453</TD><TD>                                result=true;</TD></TR><TR><TD CLASS="l">1454</TD><TD> </TD></TR><TR><TD CLASS="l">1455</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1456</TD><TD> </TD></TR><TR><TD CLASS="l">1457</TD><TD>                }</TD></TR><TR><TD CLASS="l">1458</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1459</TD><TD>                if (result==true) {</TD></TR><TR CLASS="c"><TD CLASS="l">1460</TD><TD>                        gameState=STATE_GAME_OVER;</TD></TR><TR><TD CLASS="l">1461</TD><TD>                }</TD></TR><TR><TD CLASS="l">1462</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1463</TD><TD>                return result;</TD></TR><TR><TD CLASS="l">1464</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="2a">1465</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1466</TD><TD> </TD></TR><TR><TD CLASS="l">1467</TD><TD>        private boolean checkPlayerOwnesContinentForMission(Continent c,int n) {</TD></TR><TR><TD CLASS="l">1468</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1469</TD><TD>                if ( ANY_CONTINENT.equals(c) ) {</TD></TR><TR><TD CLASS="l">1470</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="90% line coverage (9 out of 10 instructions)" CLASS="l">1471</TD><TD TITLE="90% line coverage (9 out of 10 instructions)">                        return (getNoContinentsOwned(currentPlayer) &gt;=n);</TD></TR><TR><TD CLASS="l">1472</TD><TD> </TD></TR><TR><TD CLASS="l">1473</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">1474</TD><TD>                else if (c!=null) {</TD></TR><TR><TD CLASS="l">1475</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1476</TD><TD>                        return c.isOwned(currentPlayer);</TD></TR><TR><TD CLASS="l">1477</TD><TD> </TD></TR><TR><TD CLASS="l">1478</TD><TD>                }</TD></TR><TR><TD CLASS="l">1479</TD><TD>                else {</TD></TR><TR><TD CLASS="l">1480</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1481</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">1482</TD><TD> </TD></TR><TR><TD CLASS="l">1483</TD><TD>                }</TD></TR><TR><TD CLASS="l">1484</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="38">1485</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1486</TD><TD> </TD></TR><TR><TD CLASS="l">1487</TD><TD>        public boolean canContinue() {</TD></TR><TR><TD CLASS="l">1488</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1489</TD><TD>                if (gameState==STATE_GAME_OVER &amp;&amp; gameMode != MODE_DOMINATION &amp;&amp; gameMode != 1) {</TD></TR><TR><TD CLASS="l">1490</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1491</TD><TD>                        int oldGameMode=gameMode;</TD></TR><TR CLASS="c"><TD CLASS="l">1492</TD><TD>                        gameMode=MODE_DOMINATION;</TD></TR><TR CLASS="c"><TD CLASS="l">1493</TD><TD>                        boolean playerWon = checkPlayerWon();</TD></TR><TR CLASS="c"><TD CLASS="l">1494</TD><TD>                        gameMode=oldGameMode;</TD></TR><TR><TD CLASS="l">1495</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="94% line coverage (17 out of 18 instructions)" CLASS="l">1496</TD><TD TITLE="94% line coverage (17 out of 18 instructions)">                        return !playerWon; // we CAN continue if someone has NOT won</TD></TR><TR><TD CLASS="l">1497</TD><TD> </TD></TR><TR><TD CLASS="l">1498</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">1499</TD><TD>                return false;</TD></TR><TR><TD CLASS="l">1500</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="1f">1501</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1502</TD><TD> </TD></TR><TR><TD CLASS="l">1503</TD><TD>        public boolean continuePlay() {</TD></TR><TR><TD CLASS="l">1504</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1505</TD><TD>                if (canContinue()) {</TD></TR><TR><TD CLASS="l">1506</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1507</TD><TD>                        gameMode=MODE_DOMINATION;</TD></TR><TR><TD CLASS="l">1508</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="64% line coverage (7 out of 11 instructions)" CLASS="l">1509</TD><TD TITLE="64% line coverage (7 out of 11 instructions)">                        if (tradeCap==true) { gameState=STATE_TRADE_CARDS; }</TD></TR><TR CLASS="c"><TD CLASS="l">1510</TD><TD>                        else if ( currentPlayer.getExtraArmies()==0 ) { gameState=STATE_ATTACKING; }</TD></TR><TR CLASS="z"><TD CLASS="l">1511</TD><TD>                        else { gameState=STATE_PLACE_ARMIES; }</TD></TR><TR><TD CLASS="l">1512</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1513</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">1514</TD><TD> </TD></TR><TR><TD CLASS="l">1515</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="3">1516</A></TD><TD>                return false;</TD></TR><TR><TD CLASS="l">1517</TD><TD>        }</TD></TR><TR><TD CLASS="l">1518</TD><TD> </TD></TR><TR><TD CLASS="l">1519</TD><TD>        public int getClosestCountry(int x, int y) {</TD></TR><TR CLASS="z"><TD CLASS="l">1520</TD><TD>                Country closestCountryCanvas = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1521</TD><TD>                int closestDistance = Integer.MAX_VALUE;</TD></TR><TR><TD CLASS="l">1522</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1523</TD><TD>                for (int index=0; index &lt; Countries.length; index++) {</TD></TR><TR CLASS="z"><TD CLASS="l">1524</TD><TD>                        int distance = Countries[index].getDistanceTo(x,y);</TD></TR><TR CLASS="z"><TD CLASS="l">1525</TD><TD>                        if (distance &lt; closestDistance) {</TD></TR><TR><TD CLASS="l">1526</TD><TD>                                // we have a country closer to the point (x,y)</TD></TR><TR CLASS="z"><TD CLASS="l">1527</TD><TD>                                closestCountryCanvas = Countries[index];</TD></TR><TR CLASS="z"><TD CLASS="l">1528</TD><TD>                                closestDistance = distance;</TD></TR><TR><TD CLASS="l">1529</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1530</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">1531</TD><TD>                return closestCountryCanvas.getColor();</TD></TR><TR><TD CLASS="l">1532</TD><TD>        }</TD></TR><TR><TD CLASS="l">1533</TD><TD> </TD></TR><TR><TD CLASS="l">1534</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1535</TD><TD>         * Loads the map</TD></TR><TR><TD CLASS="l"><A NAME="6e">1536</A></TD><TD>         * @param filename The map filename</TD></TR><TR><TD CLASS="l">1537</TD><TD>         * @throws Exception There was a error</TD></TR><TR><TD CLASS="l">1538</TD><TD>         */</TD></TR><TR><TD CLASS="l">1539</TD><TD>        public void loadMap() throws Exception {</TD></TR><TR CLASS="c"><TD CLASS="l">1540</TD><TD>                loadMap(true, null);</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="24">1541</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1542</TD><TD> </TD></TR><TR><TD CLASS="l">1543</TD><TD>        public void loadMap(boolean cleanLoad, BufferedReader bufferin) throws Exception {</TD></TR><TR><TD CLASS="l">1544</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1545</TD><TD>                MapTranslator.setMap( mapfile );</TD></TR><TR><TD CLASS="l">1546</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1547</TD><TD>                StringTokenizer st=null;</TD></TR><TR><TD CLASS="l">1548</TD><TD> </TD></TR><TR><TD CLASS="l">1549</TD><TD>                Vector Countries;</TD></TR><TR><TD CLASS="l">1550</TD><TD>                Vector Continents;</TD></TR><TR CLASS="c"><TD CLASS="l">1551</TD><TD>                if (cleanLoad) {</TD></TR><TR CLASS="c"><TD CLASS="l">1552</TD><TD>                    Countries = new Vector();</TD></TR><TR CLASS="c"><TD CLASS="l">1553</TD><TD>                    Continents = new Vector();</TD></TR><TR><TD CLASS="l">1554</TD><TD>                }</TD></TR><TR><TD CLASS="l">1555</TD><TD>                else {</TD></TR><TR CLASS="c"><TD CLASS="l">1556</TD><TD>                    Countries = new Vector(Arrays.asList(this.Countries));</TD></TR><TR CLASS="c"><TD CLASS="l">1557</TD><TD>                    Continents = new Vector(Arrays.asList(this.Continents));</TD></TR><TR><TD CLASS="l">1558</TD><TD>                }</TD></TR><TR><TD CLASS="l">1559</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1560</TD><TD>                int mapVer = 1;</TD></TR><TR><TD CLASS="l">1561</TD><TD>                //System.out.print(&#34;Starting Load Map...\n&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">1562</TD><TD>                int countryCount = 0;</TD></TR><TR CLASS="c"><TD CLASS="l">1563</TD><TD>                if (bufferin == null) {</TD></TR><TR CLASS="c"><TD CLASS="l">1564</TD><TD>                        bufferin=RiskUtil.readMap( RiskUtil.openMapStream(mapfile) );</TD></TR><TR><TD CLASS="l">1565</TD><TD>                }</TD></TR><TR><TD CLASS="l">1566</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1567</TD><TD>                String input = bufferin.readLine();</TD></TR><TR CLASS="c"><TD CLASS="l">1568</TD><TD>                String mode = &#34;none&#34;;</TD></TR><TR><TD CLASS="l">1569</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1570</TD><TD>                while(input != null) {</TD></TR><TR><TD CLASS="l">1571</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1572</TD><TD>                        if (input.equals(&#34;&#34;) || input.charAt(0)==';') {</TD></TR><TR><TD CLASS="l">1573</TD><TD>                                // do nothing</TD></TR><TR><TD CLASS="l">1574</TD><TD>                                //System.out.print(&#34;Nothing\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1575</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1576</TD><TD>                        else {</TD></TR><TR><TD CLASS="l">1577</TD><TD>                                //System.out.print(&#34;Something found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1578</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1579</TD><TD>                                if (input.charAt(0)=='[' &amp;&amp; input.charAt( input.length()-1 )==']') {</TD></TR><TR><TD CLASS="l">1580</TD><TD>                                        //System.out.print(&#34;Something beggining with [ and ending with ] found\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1581</TD><TD>                                        mode=&#34;newsection&#34;;</TD></TR><TR><TD CLASS="l">1582</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1583</TD><TD>                                else { st = new StringTokenizer(input); }</TD></TR><TR><TD CLASS="l">1584</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1585</TD><TD>                                if (mode.equals(&#34;files&#34;)) {</TD></TR><TR><TD CLASS="l">1586</TD><TD>                                        //System.out.print(&#34;Adding files\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1587</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1588</TD><TD>                                        if ( input.startsWith(&#34;pic &#34;) )  { ImagePic = input.substring(4); } //System.out.print(&#34;file: ImagePic added!\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1589</TD><TD>                                        else if ( input.startsWith(&#34;map &#34;) ) { ImageMap = input.substring(4); } //System.out.print(&#34;file: ImageMap added!\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1590</TD><TD>                                        else if ( input.startsWith(&#34;crd &#34;) ) { }</TD></TR><TR CLASS="c"><TD CLASS="l">1591</TD><TD>                                        else if ( input.startsWith(&#34;prv &#34;) ) { }</TD></TR><TR CLASS="z"><TD CLASS="l">1592</TD><TD>                                        else { throw new Exception(&#34;error with files section in map file: &#34;+input); }</TD></TR><TR><TD CLASS="l">1593</TD><TD> </TD></TR><TR><TD CLASS="l">1594</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1595</TD><TD>                                else if (mode.equals(&#34;continents&#34;)) {</TD></TR><TR><TD CLASS="l">1596</TD><TD>                                        //System.out.print(&#34;Adding continents\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1597</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1598</TD><TD>                                        String id=st.nextToken(); //System.out.print(name+&#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1599</TD><TD> </TD></TR><TR><TD CLASS="l">1600</TD><TD>                                        // get translation</TD></TR><TR CLASS="c"><TD CLASS="l">1601</TD><TD>                                        String name = MapTranslator.getTranslatedMapName(id).replaceAll( &#34;_&#34;, &#34; &#34;);</TD></TR><TR><TD CLASS="l">1602</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1603</TD><TD>                                        int noa=Integer.parseInt( st.nextToken() ); //System.out.print(noa+&#34;\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1604</TD><TD>                                        int color=ColorUtil.getColor( st.nextToken() ); //System.out.print(color.toString()+&#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1605</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1606</TD><TD>                                        if (color==0) {</TD></TR><TR><TD CLASS="l">1607</TD><TD> </TD></TR><TR><TD CLASS="l">1608</TD><TD>                                                // there was no check for null b4 here, but now we need this for the map editor</TD></TR><TR CLASS="z"><TD CLASS="l">1609</TD><TD>                                                color = getRandomColor();</TD></TR><TR><TD CLASS="l">1610</TD><TD> </TD></TR><TR><TD CLASS="l">1611</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1612</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="19% line coverage (3 out of 16 instructions)" CLASS="l">1613</TD><TD TITLE="19% line coverage (3 out of 16 instructions)">                                        if ( st.hasMoreTokens() ) { throw new Exception(&#34;unknown item found in map file: &#34;+ st.nextToken() ); }</TD></TR><TR><TD CLASS="l">1614</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1615</TD><TD>                                        if (cleanLoad) {</TD></TR><TR CLASS="c"><TD CLASS="l">1616</TD><TD>                                                Continent continent = new Continent(id, name, noa, color);</TD></TR><TR CLASS="c"><TD CLASS="l">1617</TD><TD>                                                Continents.add(continent);</TD></TR><TR><TD CLASS="l">1618</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1619</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1620</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1621</TD><TD>                                else if (mode.equals(&#34;countries&#34;)) {</TD></TR><TR><TD CLASS="l">1622</TD><TD>                                        //System.out.print(&#34;Adding countries\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1623</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1624</TD><TD>                                        int color = Integer.parseInt(st.nextToken());</TD></TR><TR CLASS="c"><TD CLASS="l">1625</TD><TD>                                        String id=st.nextToken(); //System.out.print(name+&#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1626</TD><TD> </TD></TR><TR><TD CLASS="l">1627</TD><TD>                                        // get translation</TD></TR><TR CLASS="c"><TD CLASS="l">1628</TD><TD>                                        String name = MapTranslator.getTranslatedMapName(id).replaceAll( &#34;_&#34;, &#34; &#34;);</TD></TR><TR><TD CLASS="l">1629</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1630</TD><TD>                                        int continent = Integer.parseInt(st.nextToken());</TD></TR><TR CLASS="c"><TD CLASS="l">1631</TD><TD>                                        int x = Integer.parseInt(st.nextToken());</TD></TR><TR CLASS="c"><TD CLASS="l">1632</TD><TD>                                        int y = Integer.parseInt(st.nextToken());</TD></TR><TR><TD CLASS="l">1633</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="68% line coverage (28 out of 41 instructions)" CLASS="l">1634</TD><TD TITLE="68% line coverage (28 out of 41 instructions)">                                        if ( st.hasMoreTokens() ) { throw new Exception(&#34;unknown item found in map file: &#34;+ st.nextToken() ); }</TD></TR><TR CLASS="p"><TD TITLE="25% line coverage (4 out of 16 instructions)" CLASS="l">1635</TD><TD TITLE="25% line coverage (4 out of 16 instructions)">                                        if ( ++countryCount != color ) { throw new Exception(&#34;unexpected number found in map file: &#34;+color ); }</TD></TR><TR><TD CLASS="l">1636</TD><TD> </TD></TR><TR><TD CLASS="l">1637</TD><TD>                                        Country country;</TD></TR><TR CLASS="c"><TD CLASS="l">1638</TD><TD>                                        if (cleanLoad) {</TD></TR><TR CLASS="c"><TD CLASS="l">1639</TD><TD>                                                country = new Country();</TD></TR><TR CLASS="c"><TD CLASS="l">1640</TD><TD>                                                Countries.add(country);</TD></TR><TR CLASS="c"><TD CLASS="l">1641</TD><TD>                                                ((Continent)Continents.elementAt( continent - 1 )).addTerritoriesContained(country);</TD></TR><TR><TD CLASS="l">1642</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1643</TD><TD>                                        else {</TD></TR><TR CLASS="c"><TD CLASS="l">1644</TD><TD>                                                country = (Country)Countries.get(color -1);</TD></TR><TR><TD CLASS="l">1645</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1646</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1647</TD><TD>                                        country.setColor(color);</TD></TR><TR CLASS="c"><TD CLASS="l">1648</TD><TD>                                        country.setContinent((Continent)Continents.elementAt( continent - 1 ));</TD></TR><TR CLASS="c"><TD CLASS="l">1649</TD><TD>                                        country.setIdString(id);</TD></TR><TR CLASS="c"><TD CLASS="l">1650</TD><TD>                                        country.setName(name);</TD></TR><TR CLASS="c"><TD CLASS="l">1651</TD><TD>                                        country.setX(x);</TD></TR><TR CLASS="c"><TD CLASS="l">1652</TD><TD>                                        country.setY(y);</TD></TR><TR CLASS="c"><TD CLASS="l">1653</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1654</TD><TD>                                else if (mode.equals(&#34;borders&#34;)) {</TD></TR><TR><TD CLASS="l">1655</TD><TD>                                        //System.out.print(&#34;Adding borders\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1656</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1657</TD><TD>                                        int country=Integer.parseInt( st.nextToken() ); //System.out.print(country+&#34;\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1658</TD><TD>                                        while (st.hasMoreElements()) {</TD></TR><TR CLASS="c"><TD CLASS="l">1659</TD><TD>                                                ((Country)Countries.elementAt( country - 1 )).addNeighbour( ((Country)Countries.elementAt( Integer.parseInt(st.nextToken()) - 1 )) );</TD></TR><TR><TD CLASS="l">1660</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1661</TD><TD> </TD></TR><TR><TD CLASS="l">1662</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1663</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1664</TD><TD>                                else if (mode.equals(&#34;newsection&#34;)) {</TD></TR><TR><TD CLASS="l">1665</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1666</TD><TD>                                        mode = input.substring(1, input.length()-1); // set mode to the name of the section</TD></TR><TR><TD CLASS="l">1667</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1668</TD><TD>                                        if (mode.equals(&#34;files&#34;) ) {</TD></TR><TR><TD CLASS="l">1669</TD><TD>                                                //System.out.print(&#34;Section: files found\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1670</TD><TD>                                                ImagePic=null;</TD></TR><TR CLASS="c"><TD CLASS="l">1671</TD><TD>                                                ImageMap=null;</TD></TR><TR><TD CLASS="l">1672</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1673</TD><TD>                                        else if (mode.equals(&#34;continents&#34;) ) {</TD></TR><TR><TD CLASS="l">1674</TD><TD>                                                //System.out.print(&#34;Section: continents found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1675</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1676</TD><TD>                                        else if (mode.equals(&#34;countries&#34;) ) {</TD></TR><TR><TD CLASS="l">1677</TD><TD>                                                //System.out.print(&#34;Section: countries found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1678</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1679</TD><TD>                                        else if (mode.equals(&#34;borders&#34;) ) {</TD></TR><TR><TD CLASS="l">1680</TD><TD>                                                //System.out.print(&#34;Section: borders found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1681</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1682</TD><TD>                                        else {</TD></TR><TR CLASS="z"><TD CLASS="l">1683</TD><TD>                                                throw new Exception(&#34;unknown section found in map file: &#34;+mode);</TD></TR><TR><TD CLASS="l">1684</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1685</TD><TD> </TD></TR><TR><TD CLASS="l">1686</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1687</TD><TD>                                // we are not in any section</TD></TR><TR CLASS="c"><TD CLASS="l">1688</TD><TD>                                else if (input.startsWith(&#34;ver &#34;)) {</TD></TR><TR CLASS="z"><TD CLASS="l">1689</TD><TD>                                        mapVer = Integer.parseInt(input.substring(4, input.length()));</TD></TR><TR><TD CLASS="l">1690</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1691</TD><TD>//                                else if (input.equals(&#34;test&#34;)) {</TD></TR><TR><TD CLASS="l">1692</TD><TD>//</TD></TR><TR><TD CLASS="l">1693</TD><TD>//                                }</TD></TR><TR><TD CLASS="l">1694</TD><TD>//                                else if (input.startsWith(&#34;name &#34;)) {</TD></TR><TR><TD CLASS="l">1695</TD><TD>//</TD></TR><TR><TD CLASS="l">1696</TD><TD>//                                }</TD></TR><TR><TD CLASS="l">1697</TD><TD>                                // we should NOT throw errors on unknown items, as new items may be added to new versions of the map format</TD></TR><TR><TD CLASS="l">1698</TD><TD>                                //else {</TD></TR><TR><TD CLASS="l">1699</TD><TD>                                //        throw new Exception(&#34;unknown item found in map file: &#34;+input);</TD></TR><TR><TD CLASS="l">1700</TD><TD>                                //}</TD></TR><TR><TD CLASS="l">1701</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1702</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1703</TD><TD>                        input = bufferin.readLine(); // get next line</TD></TR><TR><TD CLASS="l">1704</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">1705</TD><TD>                bufferin.close();</TD></TR><TR><TD CLASS="l">1706</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1707</TD><TD>                int gameVer = getVersion();</TD></TR><TR CLASS="c"><TD CLASS="l">1708</TD><TD>                if (gameVer &gt; mapVer) {</TD></TR><TR CLASS="z"><TD CLASS="l">1709</TD><TD>                    throw new Exception(mapfile + &#34; too old, ver &#34; + mapVer + &#34;. game saved with ver &#34; + gameVer);</TD></TR><TR><TD CLASS="l">1710</TD><TD>                }</TD></TR><TR><TD CLASS="l">1711</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1712</TD><TD>                if (cleanLoad) {</TD></TR><TR CLASS="c"><TD CLASS="l">1713</TD><TD>                        this.Countries = (Country[])Countries.toArray( new Country[Countries.size()] );</TD></TR><TR CLASS="c"><TD CLASS="l">1714</TD><TD>                        this.Continents = (Continent[])Continents.toArray( new Continent[Continents.size()] );</TD></TR><TR><TD CLASS="l">1715</TD><TD>                }</TD></TR><TR><TD CLASS="l">1716</TD><TD>                //System.out.print(&#34;Map Loaded\n&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">1717</TD><TD>        }</TD></TR><TR><TD CLASS="l">1718</TD><TD> </TD></TR><TR><TD CLASS="l">1719</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1720</TD><TD>         * Sets the filename of the map file</TD></TR><TR><TD CLASS="l">1721</TD><TD>         * @param f The name of the new file</TD></TR><TR><TD CLASS="l">1722</TD><TD>         * @return boolean Return trues if missions are supported</TD></TR><TR><TD CLASS="l"><A NAME="30">1723</A></TD><TD>         * @throws Exception The file cannot be found</TD></TR><TR><TD CLASS="l">1724</TD><TD>         */</TD></TR><TR><TD CLASS="l">1725</TD><TD>        public boolean setMapfile(String f) throws Exception {</TD></TR><TR><TD CLASS="l">1726</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1727</TD><TD>                if (f.equals(&#34;default&#34;)) {</TD></TR><TR CLASS="c"><TD CLASS="l">1728</TD><TD>                        f = defaultMap;</TD></TR><TR><TD CLASS="l">1729</TD><TD>                }</TD></TR><TR><TD CLASS="l">1730</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1731</TD><TD>                BufferedReader bufferin=RiskUtil.readMap( RiskUtil.openMapStream(f) );</TD></TR><TR><TD CLASS="l">1732</TD><TD>/*</TD></TR><TR><TD CLASS="l">1733</TD><TD>                File file;</TD></TR><TR><TD CLASS="l">1734</TD><TD> </TD></TR><TR><TD CLASS="l">1735</TD><TD>                if (f.equals(&#34;default&#34;)) {</TD></TR><TR><TD CLASS="l">1736</TD><TD>                        file = new File(&#34;maps/&#34; + defaultMap);</TD></TR><TR><TD CLASS="l">1737</TD><TD>                }</TD></TR><TR><TD CLASS="l">1738</TD><TD>                else {</TD></TR><TR><TD CLASS="l">1739</TD><TD>                        file = new File(&#34;maps/&#34; + f);</TD></TR><TR><TD CLASS="l">1740</TD><TD>                }</TD></TR><TR><TD CLASS="l">1741</TD><TD> </TD></TR><TR><TD CLASS="l">1742</TD><TD>                FileReader filein = new FileReader(file);</TD></TR><TR><TD CLASS="l">1743</TD><TD> </TD></TR><TR><TD CLASS="l">1744</TD><TD>                BufferedReader bufferin = new BufferedReader(filein);</TD></TR><TR><TD CLASS="l">1745</TD><TD>*/</TD></TR><TR><TD CLASS="l">1746</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1747</TD><TD>                runmaptest = false;</TD></TR><TR CLASS="c"><TD CLASS="l">1748</TD><TD>                previewPic = null;</TD></TR><TR CLASS="c"><TD CLASS="l">1749</TD><TD>                properties = new HashMap();</TD></TR><TR><TD CLASS="l">1750</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1751</TD><TD>                String input = bufferin.readLine();</TD></TR><TR CLASS="c"><TD CLASS="l">1752</TD><TD>                String mode = null;</TD></TR><TR><TD CLASS="l">1753</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1754</TD><TD>                boolean yesmap = false;</TD></TR><TR CLASS="c"><TD CLASS="l">1755</TD><TD>                boolean returnvalue = false;</TD></TR><TR CLASS="c"><TD CLASS="l">1756</TD><TD>                boolean yescards = false;</TD></TR><TR><TD CLASS="l">1757</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1758</TD><TD>                while(input != null) {</TD></TR><TR><TD CLASS="l">1759</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1760</TD><TD>                        if (input.equals(&#34;&#34;) || input.charAt(0)==';') {</TD></TR><TR><TD CLASS="l">1761</TD><TD> </TD></TR><TR><TD CLASS="l">1762</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1763</TD><TD>                        else {</TD></TR><TR><TD CLASS="l">1764</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1765</TD><TD>                                if (input.charAt(0)=='[' &amp;&amp; input.charAt( input.length()-1 )==']') {</TD></TR><TR CLASS="c"><TD CLASS="l">1766</TD><TD>                                        mode=&#34;newsection&#34;;</TD></TR><TR><TD CLASS="l">1767</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1768</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1769</TD><TD>                                if (&#34;files&#34;.equals(mode)) {</TD></TR><TR><TD CLASS="l">1770</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1771</TD><TD>                                        if ( input.startsWith(&#34;pic &#34;) ) { ImagePic = input.substring(4); }</TD></TR><TR><TD CLASS="l">1772</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1773</TD><TD>                                        else if ( input.startsWith(&#34;prv &#34;) ) { previewPic = input.substring(4); }</TD></TR><TR><TD CLASS="l">1774</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1775</TD><TD>                                        else if ( input.startsWith(&#34;crd &#34;) ) { yescards=true; returnvalue = setCardsfile( input.substring(4) ); }</TD></TR><TR><TD CLASS="l">1776</TD><TD> </TD></TR><TR><TD CLASS="l">1777</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1778</TD><TD>                                else if (&#34;borders&#34;.equals(mode)) {</TD></TR><TR><TD CLASS="l">1779</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1780</TD><TD>                                        yesmap=true;</TD></TR><TR><TD CLASS="l">1781</TD><TD> </TD></TR><TR><TD CLASS="l">1782</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1783</TD><TD>                                else if (&#34;newsection&#34;.equals(mode)) {</TD></TR><TR><TD CLASS="l">1784</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1785</TD><TD>                                        mode = input.substring(1, input.length()-1); // set mode to the name of the section</TD></TR><TR><TD CLASS="l">1786</TD><TD> </TD></TR><TR><TD CLASS="l">1787</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1788</TD><TD>                                else if (mode == null) {</TD></TR><TR><TD CLASS="l">1789</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1790</TD><TD>                                        int space = input.indexOf(' ');</TD></TR><TR><TD CLASS="l">1791</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1792</TD><TD>                                        if (input.equals(&#34;test&#34;)) {</TD></TR><TR><TD CLASS="l">1793</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1794</TD><TD>                                                runmaptest = true;</TD></TR><TR><TD CLASS="l">1795</TD><TD> </TD></TR><TR><TD CLASS="l">1796</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1797</TD><TD>                                        //else if (input.startsWith(&#34;name &#34;)) {</TD></TR><TR><TD CLASS="l">1798</TD><TD>                                        //        mapName = input.substring(5,input.length());</TD></TR><TR><TD CLASS="l">1799</TD><TD>                                        //}</TD></TR><TR><TD CLASS="l">1800</TD><TD>                                        //else if (input.startsWith(&#34;ver &#34;)) {</TD></TR><TR><TD CLASS="l">1801</TD><TD>                                        //        ver = Integer.parseInt( input.substring(4,input.length()) );</TD></TR><TR><TD CLASS="l">1802</TD><TD>                                        //}</TD></TR><TR CLASS="c"><TD CLASS="l">1803</TD><TD>                                        else if (space &gt;= 0) {</TD></TR><TR CLASS="c"><TD CLASS="l">1804</TD><TD>                                            String key = input.substring(0,space);</TD></TR><TR CLASS="c"><TD CLASS="l">1805</TD><TD>                                            String value = input.substring(space+1);</TD></TR><TR><TD CLASS="l">1806</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1807</TD><TD>                                            properties.put(key, value);</TD></TR><TR><TD CLASS="l">1808</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1809</TD><TD>                                        // else unknown section</TD></TR><TR><TD CLASS="l">1810</TD><TD>                                }</TD></TR><TR><TD CLASS="l">1811</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1812</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1813</TD><TD>                        input = bufferin.readLine(); // get next line</TD></TR><TR><TD CLASS="l">1814</TD><TD>                }</TD></TR><TR><TD CLASS="l">1815</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="29% line coverage (2 out of 7 instructions)" CLASS="l">1816</TD><TD TITLE="29% line coverage (2 out of 7 instructions)">                if ( yesmap==false ) { throw new Exception(&#34;error with map file&#34;); }</TD></TR><TR CLASS="p"><TD TITLE="29% line coverage (2 out of 7 instructions)" CLASS="l">1817</TD><TD TITLE="29% line coverage (2 out of 7 instructions)">                if ( yescards==false ) { throw new Exception(&#34;cards file not specified in map file&#34;); }</TD></TR><TR><TD CLASS="l">1818</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1819</TD><TD>                mapfile = f;</TD></TR><TR CLASS="c"><TD CLASS="l">1820</TD><TD>                bufferin.close();</TD></TR><TR><TD CLASS="l">1821</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1822</TD><TD>                return returnvalue;</TD></TR><TR><TD CLASS="l">1823</TD><TD>        }</TD></TR><TR><TD CLASS="l">1824</TD><TD> </TD></TR><TR><TD CLASS="l">1825</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="15">1826</A></TD><TD>         * we need to call this if we do not want to reload data from disk when we start a game</TD></TR><TR><TD CLASS="l">1827</TD><TD>         */</TD></TR><TR><TD CLASS="l">1828</TD><TD>        public void setMemoryLoad() {</TD></TR><TR><TD CLASS="l">1829</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1830</TD><TD>                mapfile = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1831</TD><TD>                cardsfile = null;</TD></TR><TR><TD CLASS="l">1832</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1833</TD><TD>                ImagePic = null;</TD></TR><TR CLASS="z"><TD CLASS="l">1834</TD><TD>                ImageMap = null;</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="18">1835</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">1836</TD><TD> </TD></TR><TR><TD CLASS="l">1837</TD><TD>        public void setupNewMap() {</TD></TR><TR><TD CLASS="l">1838</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1839</TD><TD>                Countries = new Country[0];</TD></TR><TR CLASS="z"><TD CLASS="l">1840</TD><TD>                Continents = new Continent[0];</TD></TR><TR><TD CLASS="l">1841</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1842</TD><TD>                Cards = new Vector();</TD></TR><TR CLASS="z"><TD CLASS="l">1843</TD><TD>                usedCards = new Vector();</TD></TR><TR CLASS="z"><TD CLASS="l">1844</TD><TD>                Missions = new Vector();</TD></TR><TR><TD CLASS="l">1845</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1846</TD><TD>                properties = new HashMap();</TD></TR><TR><TD CLASS="l">1847</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1848</TD><TD>                runmaptest = false;</TD></TR><TR CLASS="z"><TD CLASS="l">1849</TD><TD>                previewPic=null;</TD></TR><TR><TD CLASS="l">1850</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1851</TD><TD>                setMemoryLoad();</TD></TR><TR><TD CLASS="l"><A NAME="12">1852</A></TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">1853</TD><TD>        }</TD></TR><TR><TD CLASS="l">1854</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="11">1855</A></TD><TD>        public void setCountries(Country[] a) {</TD></TR><TR CLASS="z"><TD CLASS="l">1856</TD><TD>                Countries = a;</TD></TR><TR CLASS="z"><TD CLASS="l">1857</TD><TD>        }</TD></TR><TR><TD CLASS="l">1858</TD><TD>        public void setContinents(Continent[] a) {</TD></TR><TR CLASS="z"><TD CLASS="l">1859</TD><TD>                Continents = a;</TD></TR><TR CLASS="z"><TD CLASS="l">1860</TD><TD>        }</TD></TR><TR><TD CLASS="l">1861</TD><TD> </TD></TR><TR><TD CLASS="l">1862</TD><TD>        /**</TD></TR><TR><TD CLASS="l">1863</TD><TD>         * Loads the cards</TD></TR><TR><TD CLASS="l">1864</TD><TD>         * @param filename The cards filename</TD></TR><TR><TD CLASS="l"><A NAME="21">1865</A></TD><TD>         * @throws Exception There was a error</TD></TR><TR><TD CLASS="l">1866</TD><TD>         */</TD></TR><TR><TD CLASS="l">1867</TD><TD>        public void loadCards(boolean rawLoad) throws Exception {</TD></TR><TR><TD CLASS="l">1868</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1869</TD><TD>                StringTokenizer st=null;</TD></TR><TR><TD CLASS="l">1870</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1871</TD><TD>                Cards = new Vector();</TD></TR><TR CLASS="c"><TD CLASS="l">1872</TD><TD>                usedCards = new Vector();</TD></TR><TR CLASS="c"><TD CLASS="l">1873</TD><TD>                Missions = new Vector();</TD></TR><TR><TD CLASS="l">1874</TD><TD> </TD></TR><TR><TD CLASS="l">1875</TD><TD>                //System.out.print(&#34;Starting load cards and missions...\n&#34;);</TD></TR><TR><TD CLASS="l">1876</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1877</TD><TD>                BufferedReader bufferin=RiskUtil.readMap( RiskUtil.openMapStream(cardsfile) );</TD></TR><TR><TD CLASS="l">1878</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1879</TD><TD>                String input = bufferin.readLine();</TD></TR><TR CLASS="c"><TD CLASS="l">1880</TD><TD>                String mode = &#34;none&#34;;</TD></TR><TR><TD CLASS="l">1881</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1882</TD><TD>                while(input != null) {</TD></TR><TR><TD CLASS="l">1883</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1884</TD><TD>                        if (input.equals(&#34;&#34;) || input.charAt(0)==';') {</TD></TR><TR><TD CLASS="l">1885</TD><TD>                                // do nothing</TD></TR><TR><TD CLASS="l">1886</TD><TD>                                //System.out.print(&#34;Nothing\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1887</TD><TD>                        }</TD></TR><TR><TD CLASS="l">1888</TD><TD>                        else {</TD></TR><TR><TD CLASS="l">1889</TD><TD> </TD></TR><TR><TD CLASS="l">1890</TD><TD>                                //System.out.print(&#34;Something found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1891</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1892</TD><TD>                                if (input.charAt(0)=='[' &amp;&amp; input.charAt( input.length()-1 )==']') {</TD></TR><TR><TD CLASS="l">1893</TD><TD>                                        //System.out.print(&#34;Something beggining with [ and ending with ] found\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1894</TD><TD>                                        mode=&#34;newsection&#34;;</TD></TR><TR><TD CLASS="l">1895</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1896</TD><TD>                                else { st = new StringTokenizer(input); }</TD></TR><TR><TD CLASS="l">1897</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1898</TD><TD>                                if (mode.equals(&#34;cards&#34;)) {</TD></TR><TR><TD CLASS="l">1899</TD><TD>                                        //System.out.print(&#34;Adding cards\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1900</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1901</TD><TD>                                        String name=st.nextToken(); //System.out.print(name+&#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1902</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1903</TD><TD>                                        if (name.equals(Card.WILDCARD)) {</TD></TR><TR CLASS="c"><TD CLASS="l">1904</TD><TD>                                                Card card = new Card(name, null);</TD></TR><TR CLASS="c"><TD CLASS="l">1905</TD><TD>                                                Cards.add(card);</TD></TR><TR CLASS="c"><TD CLASS="l">1906</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">1907</TD><TD>                                        else if ( name.equals(Card.CAVALRY) || name.equals(Card.INFANTRY) || name.equals(Card.CANNON) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1908</TD><TD>                                                int country=Integer.parseInt( st.nextToken() );</TD></TR><TR><TD CLASS="l">1909</TD><TD> </TD></TR><TR><TD CLASS="l">1910</TD><TD>                                                //System.out.print( Countries[ country - 1 ].getName() +&#34;\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1911</TD><TD>                                                Card card = new Card(name, Countries[ country - 1 ]);</TD></TR><TR CLASS="c"><TD CLASS="l">1912</TD><TD>                                                Cards.add(card);</TD></TR><TR CLASS="c"><TD CLASS="l">1913</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1914</TD><TD>                                        else {</TD></TR><TR CLASS="z"><TD CLASS="l">1915</TD><TD>                                                throw new Exception(&#34;unknown item found in cards file: &#34;+name);</TD></TR><TR><TD CLASS="l">1916</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1917</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="19% line coverage (3 out of 16 instructions)" CLASS="l">1918</TD><TD TITLE="19% line coverage (3 out of 16 instructions)">                                        if ( st.hasMoreTokens() ) { throw new Exception(&#34;unknown item found in cards file: &#34;+ st.nextToken() ); }</TD></TR><TR><TD CLASS="l">1919</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1920</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1921</TD><TD>                                else if (mode.equals(&#34;missions&#34;)) {</TD></TR><TR><TD CLASS="l">1922</TD><TD>                                        //System.out.print(&#34;Adding Mission\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1923</TD><TD> </TD></TR><TR><TD CLASS="l">1924</TD><TD>                                        //boolean add=true;</TD></TR><TR><TD CLASS="l">1925</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1926</TD><TD>                                        int s1 = Integer.parseInt(st.nextToken());</TD></TR><TR><TD CLASS="l">1927</TD><TD>                                        Player p;</TD></TR><TR><TD CLASS="l">1928</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1929</TD><TD>                                        if (s1==0 || s1&gt;Players.size() ) {</TD></TR><TR CLASS="c"><TD CLASS="l">1930</TD><TD>                                                p = null;</TD></TR><TR><TD CLASS="l">1931</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1932</TD><TD>                                        else {</TD></TR><TR CLASS="c"><TD CLASS="l">1933</TD><TD>                                                p = (Player)Players.elementAt( s1-1 );</TD></TR><TR><TD CLASS="l">1934</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1935</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1936</TD><TD>                                        int noc = Integer.parseInt(st.nextToken());</TD></TR><TR CLASS="c"><TD CLASS="l">1937</TD><TD>                                        int noa = Integer.parseInt(st.nextToken());</TD></TR><TR><TD CLASS="l">1938</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1939</TD><TD>                                        String s4 = st.nextToken();</TD></TR><TR CLASS="c"><TD CLASS="l">1940</TD><TD>                                        String s5 = st.nextToken();</TD></TR><TR CLASS="c"><TD CLASS="l">1941</TD><TD>                                        String s6 = st.nextToken();</TD></TR><TR><TD CLASS="l">1942</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1943</TD><TD>                                        Continent c1 = getMissionContinentfromString( s4 );</TD></TR><TR CLASS="c"><TD CLASS="l">1944</TD><TD>                                        Continent c2 = getMissionContinentfromString( s5 );</TD></TR><TR CLASS="c"><TD CLASS="l">1945</TD><TD>                                        Continent c3 = getMissionContinentfromString( s6 );</TD></TR><TR><TD CLASS="l">1946</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1947</TD><TD>                                        String missioncode=s1+&#34;-&#34;+noc+&#34;-&#34;+noa+&#34;-&#34;+s4+&#34;-&#34;+s5+&#34;-&#34;+s6;</TD></TR><TR CLASS="p"><TD TITLE="97% line coverage (63 out of 65 instructions)" CLASS="l">1948</TD><TD TITLE="97% line coverage (63 out of 65 instructions)">                                        String description=rawLoad?null:MapTranslator.getTranslatedMissionName(missioncode);</TD></TR><TR><TD CLASS="l">1949</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1950</TD><TD>                                        if (description==null) {</TD></TR><TR CLASS="z"><TD CLASS="l">1951</TD><TD>                                            description=&#34;&#34;;</TD></TR><TR CLASS="z"><TD CLASS="l">1952</TD><TD>                                            while (st.hasMoreElements()) {</TD></TR><TR CLASS="z"><TD CLASS="l">1953</TD><TD>                                                description = description +(&#34;&#34;.equals(description)?&#34;&#34;:&#34; &#34;)+ st.nextToken();</TD></TR><TR><TD CLASS="l">1954</TD><TD>                                            }</TD></TR><TR><TD CLASS="l">1955</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1956</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1957</TD><TD>                                        if (p!=null &amp;&amp; !rawLoad) {</TD></TR><TR><TD CLASS="l">1958</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1959</TD><TD>                                            String name = p.getName();</TD></TR><TR><TD CLASS="l">1960</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1961</TD><TD>                                            String color = &#34;color.&#34;+ColorUtil.getStringForColor( p.getColor() );</TD></TR><TR CLASS="c"><TD CLASS="l">1962</TD><TD>                                            java.util.ResourceBundle trans = TranslationBundle.getBundle();</TD></TR><TR><TD CLASS="l">1963</TD><TD>                                            try { // in Java 1.4 no if (trans.containsKey(color))</TD></TR><TR CLASS="c"><TD CLASS="l">1964</TD><TD>                                                name = trans.getString(color)+&#34; &#34;+name;</TD></TR><TR><TD CLASS="l">1965</TD><TD>                                            }</TD></TR><TR CLASS="p"><TD TITLE="97% line coverage (30 out of 31 instructions)" CLASS="l">1966</TD><TD TITLE="97% line coverage (30 out of 31 instructions)">                                            catch (Exception ex) { }</TD></TR><TR><TD CLASS="l">1967</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1968</TD><TD>                                            String oldkey =&#34;PLAYER&#34;+s1;</TD></TR><TR CLASS="c"><TD CLASS="l">1969</TD><TD>                                            String newkey = &#34;{&#34;+oldkey+&#34;}&#34;;</TD></TR><TR CLASS="c"><TD CLASS="l">1970</TD><TD>                                            if (description.indexOf(newkey) &gt;= 0) {</TD></TR><TR><TD CLASS="l">1971</TD><TD>                                                // DefaultCards_XX.properties uses this format</TD></TR><TR CLASS="c"><TD CLASS="l">1972</TD><TD>                                                description = RiskUtil.replaceAll(description, newkey, name );</TD></TR><TR><TD CLASS="l">1973</TD><TD>                                            }</TD></TR><TR CLASS="z"><TD CLASS="l">1974</TD><TD>                                            else if (description.indexOf(oldkey) &gt;= 0) {</TD></TR><TR><TD CLASS="l">1975</TD><TD>                                                // many maps still have this format for missions</TD></TR><TR CLASS="z"><TD CLASS="l">1976</TD><TD>                                                description = RiskUtil.replaceAll(description, oldkey, name );</TD></TR><TR><TD CLASS="l">1977</TD><TD>                                            }</TD></TR><TR><TD CLASS="l">1978</TD><TD>                                            else {</TD></TR><TR CLASS="z"><TD CLASS="l">1979</TD><TD>                                                System.err.println(&#34;newkey: &#34;+newkey+&#34; and oldkey: &#34;+oldkey+&#34; not found in mission: &#34;+description);</TD></TR><TR><TD CLASS="l">1980</TD><TD>                                            }</TD></TR><TR><TD CLASS="l">1981</TD><TD> </TD></TR><TR><TD CLASS="l">1982</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1983</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1984</TD><TD>                                        if ( rawLoad || s1 &lt;= Players.size() ) {</TD></TR><TR><TD CLASS="l">1985</TD><TD> </TD></TR><TR><TD CLASS="l">1986</TD><TD>                                                //System.out.print(description+&#34;\n&#34;); // testing</TD></TR><TR CLASS="c"><TD CLASS="l">1987</TD><TD>                                                Mission mission = new Mission(p, noc, noa, c1, c2, c3, description);</TD></TR><TR CLASS="c"><TD CLASS="l">1988</TD><TD>                                                Missions.add(mission);</TD></TR><TR><TD CLASS="l">1989</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1990</TD><TD>                                        else {</TD></TR><TR><TD CLASS="l">1991</TD><TD>                                                //System.out.print(&#34;NOT adding this mission as it refures to an unused player\n&#34;); // testing</TD></TR><TR><TD CLASS="l">1992</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">1993</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1994</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">1995</TD><TD>                                else if (mode.equals(&#34;newsection&#34;)) {</TD></TR><TR><TD CLASS="l">1996</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1997</TD><TD>                                        mode = input.substring(1, input.length()-1); // set mode to the name of the section</TD></TR><TR><TD CLASS="l">1998</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">1999</TD><TD>                                        if (mode.equals(&#34;cards&#34;) ) {</TD></TR><TR><TD CLASS="l">2000</TD><TD>                                                //System.out.print(&#34;Section: cards found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">2001</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">2002</TD><TD>                                        else if (mode.equals(&#34;missions&#34;) ) {</TD></TR><TR><TD CLASS="l">2003</TD><TD>                                                //System.out.print(&#34;Section: missions found\n&#34;); // testing</TD></TR><TR><TD CLASS="l">2004</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">2005</TD><TD>                                        else {</TD></TR><TR CLASS="z"><TD CLASS="l">2006</TD><TD>                                                throw new Exception(&#34;unknown section found in cards file: &#34;+mode);</TD></TR><TR><TD CLASS="l">2007</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">2008</TD><TD> </TD></TR><TR><TD CLASS="l">2009</TD><TD>                                }</TD></TR><TR><TD CLASS="l">2010</TD><TD>                                else {</TD></TR><TR><TD CLASS="l">2011</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">2012</TD><TD>                                        throw new Exception(&#34;unknown item found in cards file: &#34;+input);</TD></TR><TR><TD CLASS="l">2013</TD><TD> </TD></TR><TR><TD CLASS="l">2014</TD><TD>                                }</TD></TR><TR><TD CLASS="l">2015</TD><TD> </TD></TR><TR><TD CLASS="l">2016</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2017</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2018</TD><TD>                        input = bufferin.readLine(); // get next line</TD></TR><TR><TD CLASS="l">2019</TD><TD> </TD></TR><TR><TD CLASS="l">2020</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">2021</TD><TD>                bufferin.close();</TD></TR><TR><TD CLASS="l">2022</TD><TD> </TD></TR><TR><TD CLASS="l">2023</TD><TD> </TD></TR><TR><TD CLASS="l">2024</TD><TD>                //System.out.print(&#34;Cards and missions loaded.\n&#34;);</TD></TR><TR><TD CLASS="l">2025</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="5a">2026</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">2027</TD><TD> </TD></TR><TR><TD CLASS="l">2028</TD><TD>        private Continent getMissionContinentfromString(String a) {</TD></TR><TR><TD CLASS="l">2029</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2030</TD><TD>                if (a.equals(&#34;*&#34;)) {</TD></TR><TR CLASS="c"><TD CLASS="l">2031</TD><TD>                        return ANY_CONTINENT;</TD></TR><TR><TD CLASS="l">2032</TD><TD>                }</TD></TR><TR><TD CLASS="l">2033</TD><TD>                else {</TD></TR><TR CLASS="c"><TD CLASS="l">2034</TD><TD>                        int s = Integer.parseInt(a);</TD></TR><TR CLASS="c"><TD CLASS="l">2035</TD><TD>                        if (s==0) {</TD></TR><TR CLASS="c"><TD CLASS="l">2036</TD><TD>                                return null;</TD></TR><TR><TD CLASS="l">2037</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2038</TD><TD>                        else {</TD></TR><TR CLASS="c"><TD CLASS="l">2039</TD><TD>                                return Continents[ s-1 ];</TD></TR><TR><TD CLASS="l">2040</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2041</TD><TD> </TD></TR><TR><TD CLASS="l">2042</TD><TD>                }</TD></TR><TR><TD CLASS="l">2043</TD><TD>        }</TD></TR><TR><TD CLASS="l">2044</TD><TD> </TD></TR><TR><TD CLASS="l">2045</TD><TD> </TD></TR><TR><TD CLASS="l">2046</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2047</TD><TD>         * Sets the filename of the cards file</TD></TR><TR><TD CLASS="l">2048</TD><TD>         * @param f The name of the new file</TD></TR><TR><TD CLASS="l">2049</TD><TD>         * @return boolean Return trues if missions are supported</TD></TR><TR><TD CLASS="l">2050</TD><TD>         * @throws Exception The file cannot be found</TD></TR><TR><TD CLASS="l"><A NAME="33">2051</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">2052</TD><TD>        public boolean setCardsfile(String f) throws Exception {</TD></TR><TR><TD CLASS="l">2053</TD><TD> </TD></TR><TR><TD CLASS="l">2054</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2055</TD><TD>                StringTokenizer st=null;</TD></TR><TR><TD CLASS="l">2056</TD><TD> </TD></TR><TR><TD CLASS="l">2057</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2058</TD><TD>                if (f.equals(&#34;default&#34;)) {</TD></TR><TR CLASS="c"><TD CLASS="l">2059</TD><TD>                        f = defaultCards;</TD></TR><TR><TD CLASS="l">2060</TD><TD>                }</TD></TR><TR><TD CLASS="l">2061</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2062</TD><TD>                BufferedReader bufferin=RiskUtil.readMap(RiskUtil.openMapStream(f) );</TD></TR><TR><TD CLASS="l">2063</TD><TD> </TD></TR><TR><TD CLASS="l">2064</TD><TD> </TD></TR><TR><TD CLASS="l">2065</TD><TD>/*</TD></TR><TR><TD CLASS="l">2066</TD><TD> </TD></TR><TR><TD CLASS="l">2067</TD><TD>                File file;</TD></TR><TR><TD CLASS="l">2068</TD><TD> </TD></TR><TR><TD CLASS="l">2069</TD><TD>                if (f.equals(&#34;default&#34;)) {</TD></TR><TR><TD CLASS="l">2070</TD><TD>                        file = new File(&#34;maps/&#34; + defaultCards);</TD></TR><TR><TD CLASS="l">2071</TD><TD>                }</TD></TR><TR><TD CLASS="l">2072</TD><TD>                else {</TD></TR><TR><TD CLASS="l">2073</TD><TD>                        file = new File(&#34;maps/&#34; + f);</TD></TR><TR><TD CLASS="l">2074</TD><TD>                }</TD></TR><TR><TD CLASS="l">2075</TD><TD> </TD></TR><TR><TD CLASS="l">2076</TD><TD> </TD></TR><TR><TD CLASS="l">2077</TD><TD>                FileReader filein = new FileReader(file);</TD></TR><TR><TD CLASS="l">2078</TD><TD> </TD></TR><TR><TD CLASS="l">2079</TD><TD>                BufferedReader bufferin = new BufferedReader(filein);</TD></TR><TR><TD CLASS="l">2080</TD><TD> </TD></TR><TR><TD CLASS="l">2081</TD><TD> </TD></TR><TR><TD CLASS="l">2082</TD><TD>*/</TD></TR><TR><TD CLASS="l">2083</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2084</TD><TD>                String input = bufferin.readLine();</TD></TR><TR CLASS="c"><TD CLASS="l">2085</TD><TD>                String mode = &#34;none&#34;;</TD></TR><TR><TD CLASS="l">2086</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2087</TD><TD>                boolean yesmissions=false;</TD></TR><TR CLASS="c"><TD CLASS="l">2088</TD><TD>                boolean yescards=false;</TD></TR><TR><TD CLASS="l">2089</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2090</TD><TD>                while(input != null) {</TD></TR><TR><TD CLASS="l">2091</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2092</TD><TD>                        if (input.equals(&#34;&#34;) || input.charAt(0)==';') {</TD></TR><TR><TD CLASS="l">2093</TD><TD> </TD></TR><TR><TD CLASS="l">2094</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2095</TD><TD>                        else {</TD></TR><TR><TD CLASS="l">2096</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2097</TD><TD>                                if (input.charAt(0)=='[' &amp;&amp; input.charAt( input.length()-1 )==']') {</TD></TR><TR CLASS="c"><TD CLASS="l">2098</TD><TD>                                        mode=&#34;newsection&#34;;</TD></TR><TR><TD CLASS="l">2099</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">2100</TD><TD>                                else { st = new StringTokenizer(input); }</TD></TR><TR><TD CLASS="l">2101</TD><TD> </TD></TR><TR><TD CLASS="l">2102</TD><TD> </TD></TR><TR><TD CLASS="l">2103</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2104</TD><TD>                                if (mode.equals(&#34;newsection&#34;)) {</TD></TR><TR><TD CLASS="l">2105</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2106</TD><TD>                                        mode = input.substring(1, input.length()-1); // set mode to the name of the section</TD></TR><TR><TD CLASS="l">2107</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2108</TD><TD>                                        if (mode.equals(&#34;cards&#34;)) {</TD></TR><TR><TD CLASS="l">2109</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2110</TD><TD>                                                yescards=true;</TD></TR><TR><TD CLASS="l">2111</TD><TD> </TD></TR><TR><TD CLASS="l">2112</TD><TD>                                        }</TD></TR><TR CLASS="c"><TD CLASS="l">2113</TD><TD>                                        else if (mode.equals(&#34;missions&#34;)) {</TD></TR><TR><TD CLASS="l">2114</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2115</TD><TD>                                                yesmissions=true;</TD></TR><TR><TD CLASS="l">2116</TD><TD> </TD></TR><TR><TD CLASS="l">2117</TD><TD>                                        }</TD></TR><TR><TD CLASS="l">2118</TD><TD>                                }</TD></TR><TR><TD CLASS="l">2119</TD><TD> </TD></TR><TR><TD CLASS="l">2120</TD><TD> </TD></TR><TR><TD CLASS="l">2121</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2122</TD><TD> </TD></TR><TR><TD CLASS="l">2123</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2124</TD><TD>                        input = bufferin.readLine(); // get next line</TD></TR><TR><TD CLASS="l">2125</TD><TD> </TD></TR><TR><TD CLASS="l">2126</TD><TD>                }</TD></TR><TR><TD CLASS="l">2127</TD><TD> </TD></TR><TR><TD CLASS="l">2128</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="29% line coverage (2 out of 7 instructions)" CLASS="l">2129</TD><TD TITLE="29% line coverage (2 out of 7 instructions)">                if ( yescards==false ) { throw new Exception(&#34;error with cards file&#34;); }</TD></TR><TR><TD CLASS="l">2130</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2131</TD><TD>                cardsfile = f;</TD></TR><TR CLASS="c"><TD CLASS="l">2132</TD><TD>                bufferin.close();</TD></TR><TR><TD CLASS="l">2133</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2134</TD><TD>                MapTranslator.setCards( f );</TD></TR><TR><TD CLASS="l">2135</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2136</TD><TD>                return yesmissions;</TD></TR><TR><TD CLASS="l">2137</TD><TD> </TD></TR><TR><TD CLASS="l">2138</TD><TD>        }</TD></TR><TR><TD CLASS="l">2139</TD><TD> </TD></TR><TR><TD CLASS="l">2140</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2141</TD><TD>         * Shuffles the countries</TD></TR><TR><TD CLASS="l"><A NAME="73">2142</A></TD><TD>         */</TD></TR><TR><TD CLASS="l">2143</TD><TD>        public List shuffleCountries() {</TD></TR><TR><TD CLASS="l">2144</TD><TD> </TD></TR><TR><TD CLASS="l">2145</TD><TD>                // we create a COPY of the Countries array, so that we do not mess up the real one</TD></TR><TR CLASS="c"><TD CLASS="l">2146</TD><TD>                List oldCountries = new Vector( Arrays.asList( Countries ) );</TD></TR><TR><TD CLASS="l">2147</TD><TD> </TD></TR><TR><TD CLASS="l">2148</TD><TD>                //Vector newCountries = new Vector();</TD></TR><TR><TD CLASS="l">2149</TD><TD>                //while(oldCountries.size() &gt; 0) {</TD></TR><TR><TD CLASS="l">2150</TD><TD>                //        int a = r.nextInt(oldCountries.size()) ;</TD></TR><TR><TD CLASS="l">2151</TD><TD>                //        newCountries.add ( oldCountries.remove(a) );</TD></TR><TR><TD CLASS="l">2152</TD><TD>                //}</TD></TR><TR><TD CLASS="l">2153</TD><TD>                //return newCountries;</TD></TR><TR><TD CLASS="l">2154</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2155</TD><TD>                Collections.shuffle(oldCountries);</TD></TR><TR CLASS="c"><TD CLASS="l">2156</TD><TD>                return oldCountries;</TD></TR><TR><TD CLASS="l">2157</TD><TD> </TD></TR><TR><TD CLASS="l">2158</TD><TD>        }</TD></TR><TR><TD CLASS="l">2159</TD><TD> </TD></TR><TR><TD CLASS="l">2160</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2161</TD><TD>         * Creates a new game</TD></TR><TR><TD CLASS="l">2162</TD><TD>         * @return RiskGame Returns the new game created</TD></TR><TR><TD CLASS="l">2163</TD><TD> </TD></TR><TR><TD CLASS="l">2164</TD><TD>        public static RiskGame newGame() {</TD></TR><TR><TD CLASS="l">2165</TD><TD>                RiskGame game = new RiskGame();</TD></TR><TR><TD CLASS="l">2166</TD><TD>                //System.out.print(&#34;Game State: &#34;+game.getState()+&#34;\n&#34;); // testing</TD></TR><TR><TD CLASS="l">2167</TD><TD>                return game;</TD></TR><TR><TD CLASS="l">2168</TD><TD>        }</TD></TR><TR><TD CLASS="l">2169</TD><TD>         */</TD></TR><TR><TD CLASS="l">2170</TD><TD> </TD></TR><TR><TD CLASS="l">2171</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2172</TD><TD>         * Loads a saved game</TD></TR><TR><TD CLASS="l"><A NAME="6d">2173</A></TD><TD>         * @param file The saved game's filename</TD></TR><TR><TD CLASS="l">2174</TD><TD>         * @return Riskgame Return the saved game object if it loads, returns null if it doe not load</TD></TR><TR><TD CLASS="l">2175</TD><TD>         */</TD></TR><TR><TD CLASS="l">2176</TD><TD>        public static RiskGame loadGame(String file) throws Exception {</TD></TR><TR CLASS="c"><TD CLASS="l">2177</TD><TD>                RiskGame game = null;</TD></TR><TR><TD CLASS="l">2178</TD><TD>                //try {</TD></TR><TR CLASS="c"><TD CLASS="l">2179</TD><TD>                        InputStream filein = RiskUtil.getLoadFileInputStream(file);</TD></TR><TR CLASS="c"><TD CLASS="l">2180</TD><TD>                        ObjectInputStream objectin = new ObjectInputStream(filein);</TD></TR><TR CLASS="c"><TD CLASS="l">2181</TD><TD>                        game = (RiskGame) objectin.readObject();</TD></TR><TR CLASS="c"><TD CLASS="l">2182</TD><TD>                        objectin.close();</TD></TR><TR><TD CLASS="l">2183</TD><TD> </TD></TR><TR><TD CLASS="l">2184</TD><TD>                        //XMLDecoder d = new XMLDecoder( new BufferedInputStream( new FileInputStream(file)));</TD></TR><TR><TD CLASS="l">2185</TD><TD>                        //game = (RiskGame)d.readObject();</TD></TR><TR><TD CLASS="l">2186</TD><TD>                        //d.close();</TD></TR><TR><TD CLASS="l">2187</TD><TD> </TD></TR><TR><TD CLASS="l">2188</TD><TD>                //}</TD></TR><TR><TD CLASS="l">2189</TD><TD>                //catch (Exception e) {</TD></TR><TR><TD CLASS="l">2190</TD><TD>                        //System.out.println(e.getMessage());</TD></TR><TR><TD CLASS="l">2191</TD><TD>                //}</TD></TR><TR CLASS="c"><TD CLASS="l">2192</TD><TD>                return game;</TD></TR><TR><TD CLASS="l">2193</TD><TD>        }</TD></TR><TR><TD CLASS="l">2194</TD><TD> </TD></TR><TR><TD CLASS="l">2195</TD><TD> </TD></TR><TR><TD CLASS="l">2196</TD><TD> </TD></TR><TR><TD CLASS="l">2197</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2198</TD><TD>         * Closes the current game</TD></TR><TR><TD CLASS="l">2199</TD><TD>         * @return Riskgame Returns the game, which is already set to null</TD></TR><TR><TD CLASS="l">2200</TD><TD>         * /</TD></TR><TR><TD CLASS="l">2201</TD><TD>        public static RiskGame closeGame() {</TD></TR><TR><TD CLASS="l">2202</TD><TD>                RiskGame game = null;</TD></TR><TR><TD CLASS="l">2203</TD><TD>                return game;</TD></TR><TR><TD CLASS="l">2204</TD><TD>        }</TD></TR><TR><TD CLASS="l">2205</TD><TD>         */</TD></TR><TR><TD CLASS="l">2206</TD><TD> </TD></TR><TR><TD CLASS="l">2207</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2208</TD><TD>         * Saves the current game to a file</TD></TR><TR><TD CLASS="l">2209</TD><TD>         * @param file The filename of the save</TD></TR><TR><TD CLASS="l"><A NAME="70">2210</A></TD><TD>         * @return boolean Return trues if you saved, returns false if you cannot</TD></TR><TR><TD CLASS="l">2211</TD><TD>         */</TD></TR><TR><TD CLASS="l">2212</TD><TD>        public void saveGame(OutputStream file) throws Exception { //added RiskGame parameter g, so remember to change in parser</TD></TR><TR><TD CLASS="l">2213</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2214</TD><TD>            ObjectOutputStream out = new RiskObjectOutputStream(file);</TD></TR><TR CLASS="c"><TD CLASS="l">2215</TD><TD>            out.writeObject(this);</TD></TR><TR><TD CLASS="l">2216</TD><TD>            //out.flush(); not needed if we do a close</TD></TR><TR CLASS="c"><TD CLASS="l">2217</TD><TD>            out.close();</TD></TR><TR><TD CLASS="l">2218</TD><TD> </TD></TR><TR><TD CLASS="l">2219</TD><TD>            //XMLEncoder e = new XMLEncoder( new BufferedOutputStream( new FileOutputStream(file)));</TD></TR><TR><TD CLASS="l">2220</TD><TD>            //e.writeObject(this);</TD></TR><TR><TD CLASS="l">2221</TD><TD>            //e.close();</TD></TR><TR CLASS="c"><TD CLASS="l">2222</TD><TD>        }</TD></TR><TR><TD CLASS="l">2223</TD><TD> </TD></TR><TR><TD CLASS="l">2224</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="68">2225</A></TD><TD>         * Gets the state of the game</TD></TR><TR><TD CLASS="l">2226</TD><TD>         * @return int Returns the game state</TD></TR><TR><TD CLASS="l">2227</TD><TD>         */</TD></TR><TR><TD CLASS="l">2228</TD><TD>        public int getState() {</TD></TR><TR CLASS="c"><TD CLASS="l">2229</TD><TD>                return gameState;</TD></TR><TR><TD CLASS="l">2230</TD><TD>        }</TD></TR><TR><TD CLASS="l">2231</TD><TD> </TD></TR><TR><TD CLASS="l">2232</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2233</TD><TD>         * Checks if there are any empty countries</TD></TR><TR><TD CLASS="l">2234</TD><TD>         * @return boolean Return trues if no empty countries, returns false otherwise</TD></TR><TR><TD CLASS="l">2235</TD><TD>         */</TD></TR><TR><TD CLASS="l"><A NAME="3c">2236</A></TD><TD>        public boolean NoEmptyCountries() {</TD></TR><TR><TD CLASS="l">2237</TD><TD> </TD></TR><TR><TD CLASS="l">2238</TD><TD>                // find out if there are any empty countries</TD></TR><TR><TD CLASS="l">2239</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2240</TD><TD>                Country empty=null;</TD></TR><TR><TD CLASS="l">2241</TD><TD> </TD></TR><TR><TD CLASS="l">2242</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2243</TD><TD>                for (int c=0; c&lt; Countries.length ; c++) {</TD></TR><TR><TD CLASS="l">2244</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2245</TD><TD>                        if ( Countries[c].getOwner() == null ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2246</TD><TD>                                empty = Countries[c];</TD></TR><TR CLASS="c"><TD CLASS="l">2247</TD><TD>                                c=Countries.length;</TD></TR><TR><TD CLASS="l">2248</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2249</TD><TD> </TD></TR><TR><TD CLASS="l">2250</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">2251</TD><TD>                if (empty != null ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2252</TD><TD>                        return false;</TD></TR><TR><TD CLASS="l">2253</TD><TD>                }</TD></TR><TR><TD CLASS="l">2254</TD><TD>                else {</TD></TR><TR CLASS="c"><TD CLASS="l">2255</TD><TD>                        return true;</TD></TR><TR><TD CLASS="l">2256</TD><TD>                }</TD></TR><TR><TD CLASS="l">2257</TD><TD> </TD></TR><TR><TD CLASS="l">2258</TD><TD>        }</TD></TR><TR><TD CLASS="l">2259</TD><TD> </TD></TR><TR><TD CLASS="l">2260</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="67">2261</A></TD><TD>         * Checks if the set up is completely</TD></TR><TR><TD CLASS="l">2262</TD><TD>         * @return boolean Return trues if the set up is complete, returns false otherwise</TD></TR><TR><TD CLASS="l">2263</TD><TD>         */</TD></TR><TR><TD CLASS="l">2264</TD><TD>        public boolean getSetupDone() {</TD></TR><TR CLASS="c"><TD CLASS="l">2265</TD><TD>                return setup == Players.size();</TD></TR><TR><TD CLASS="l">2266</TD><TD>        }</TD></TR><TR><TD CLASS="l">2267</TD><TD> </TD></TR><TR><TD CLASS="l">2268</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="69">2269</A></TD><TD>         * get the value od the trade-cap</TD></TR><TR><TD CLASS="l">2270</TD><TD>         * @return boolean Return trues if tradecap is true and false otherwise</TD></TR><TR><TD CLASS="l">2271</TD><TD>         */</TD></TR><TR><TD CLASS="l">2272</TD><TD>        public boolean getTradeCap() {</TD></TR><TR CLASS="c"><TD CLASS="l">2273</TD><TD>                return tradeCap;</TD></TR><TR><TD CLASS="l">2274</TD><TD>        }</TD></TR><TR><TD CLASS="l">2275</TD><TD> </TD></TR><TR><TD CLASS="l">2276</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="55">2277</A></TD><TD>         * Gets the game mode</TD></TR><TR><TD CLASS="l">2278</TD><TD>         * @return int Return the game mode</TD></TR><TR><TD CLASS="l">2279</TD><TD>         */</TD></TR><TR><TD CLASS="l">2280</TD><TD>        public int getGameMode() {</TD></TR><TR CLASS="c"><TD CLASS="l">2281</TD><TD>                return gameMode;</TD></TR><TR><TD CLASS="l">2282</TD><TD>        }</TD></TR><TR><TD CLASS="l">2283</TD><TD> </TD></TR><TR><TD CLASS="l">2284</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="4f">2285</A></TD><TD>         * Gets the current player</TD></TR><TR><TD CLASS="l">2286</TD><TD>         * @return player Return the current player</TD></TR><TR><TD CLASS="l">2287</TD><TD>         */</TD></TR><TR><TD CLASS="l">2288</TD><TD>        public Player getCurrentPlayer() {</TD></TR><TR CLASS="c"><TD CLASS="l">2289</TD><TD>                return currentPlayer;</TD></TR><TR><TD CLASS="l">2290</TD><TD>        }</TD></TR><TR><TD CLASS="l">2291</TD><TD> </TD></TR><TR><TD CLASS="l">2292</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="64">2293</A></TD><TD>         * Gets all the players</TD></TR><TR><TD CLASS="l">2294</TD><TD>         * @return Vector Return all the players</TD></TR><TR><TD CLASS="l">2295</TD><TD>         */</TD></TR><TR><TD CLASS="l">2296</TD><TD>        public Vector getPlayers() {</TD></TR><TR CLASS="c"><TD CLASS="l">2297</TD><TD>                return Players;</TD></TR><TR><TD CLASS="l">2298</TD><TD>        }</TD></TR><TR><TD CLASS="l">2299</TD><TD> </TD></TR><TR><TD CLASS="l">2300</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2301</TD><TD>         * Gets all the players</TD></TR><TR><TD CLASS="l"><A NAME="9">2302</A></TD><TD>         * @return Vector Return all the players</TD></TR><TR><TD CLASS="l">2303</TD><TD>         */</TD></TR><TR><TD CLASS="l">2304</TD><TD>        public Vector getPlayersStats() {</TD></TR><TR><TD CLASS="l">2305</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">2306</TD><TD>                for (int c=0; c&lt; Players.size() ; c++) {</TD></TR><TR CLASS="z"><TD CLASS="l">2307</TD><TD>                        workOutEndGoStats( (Player)Players.elementAt(c) );</TD></TR><TR><TD CLASS="l">2308</TD><TD>                }</TD></TR><TR><TD CLASS="l">2309</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">2310</TD><TD>                return Players;</TD></TR><TR><TD CLASS="l">2311</TD><TD>        }</TD></TR><TR><TD CLASS="l">2312</TD><TD> </TD></TR><TR><TD CLASS="l">2313</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="42">2314</A></TD><TD>         * Gets the attacking country</TD></TR><TR><TD CLASS="l">2315</TD><TD>         * @return Country the attacking country</TD></TR><TR><TD CLASS="l">2316</TD><TD>         */</TD></TR><TR><TD CLASS="l">2317</TD><TD>        public Country getAttacker() {</TD></TR><TR CLASS="c"><TD CLASS="l">2318</TD><TD>                return attacker;</TD></TR><TR><TD CLASS="l">2319</TD><TD>        }</TD></TR><TR><TD CLASS="l">2320</TD><TD> </TD></TR><TR><TD CLASS="l">2321</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="52">2322</A></TD><TD>         * Gets the defending country</TD></TR><TR><TD CLASS="l">2323</TD><TD>         * @return Country the defending country</TD></TR><TR><TD CLASS="l">2324</TD><TD>         */</TD></TR><TR><TD CLASS="l">2325</TD><TD>        public Country getDefender() {</TD></TR><TR CLASS="c"><TD CLASS="l">2326</TD><TD>                return defender;</TD></TR><TR><TD CLASS="l">2327</TD><TD>        }</TD></TR><TR><TD CLASS="l">2328</TD><TD> </TD></TR><TR><TD CLASS="l">2329</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="57">2330</A></TD><TD>         * Gets the ImagePic</TD></TR><TR><TD CLASS="l">2331</TD><TD>         * @return URL ImagePic</TD></TR><TR><TD CLASS="l">2332</TD><TD>         */</TD></TR><TR><TD CLASS="l">2333</TD><TD>        public String getImagePic() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="65">2334</A></TD><TD>                return ImagePic;</TD></TR><TR><TD CLASS="l">2335</TD><TD>        }</TD></TR><TR><TD CLASS="l">2336</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="16">2337</A></TD><TD>        public String getPreviewPic() {</TD></TR><TR CLASS="c"><TD CLASS="l">2338</TD><TD>                return previewPic;</TD></TR><TR><TD CLASS="l">2339</TD><TD>        }</TD></TR><TR><TD CLASS="l">2340</TD><TD>        public void setPreviewPic(String prv) {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="a">2341</A></TD><TD>            previewPic = prv;</TD></TR><TR CLASS="z"><TD CLASS="l">2342</TD><TD>        }</TD></TR><TR><TD CLASS="l">2343</TD><TD> </TD></TR><TR><TD CLASS="l">2344</TD><TD>        public Map getProperties() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="20">2345</A></TD><TD>            return properties;</TD></TR><TR><TD CLASS="l">2346</TD><TD>        }</TD></TR><TR><TD CLASS="l">2347</TD><TD> </TD></TR><TR><TD CLASS="l">2348</TD><TD>        int getIntProperty(String name, int defaultValue) {</TD></TR><TR CLASS="c"><TD CLASS="l">2349</TD><TD>            Object value = properties.get(name);</TD></TR><TR CLASS="c"><TD CLASS="l">2350</TD><TD>            if (value!=null) {</TD></TR><TR CLASS="z"><TD CLASS="l">2351</TD><TD>                return Integer.parseInt( String.valueOf(value) );</TD></TR><TR><TD CLASS="l"><A NAME="13">2352</A></TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">2353</TD><TD>            return defaultValue;</TD></TR><TR><TD CLASS="l">2354</TD><TD>        }</TD></TR><TR><TD CLASS="l">2355</TD><TD>        void setIntProperty(String name, int value, int defaultValue) {</TD></TR><TR CLASS="z"><TD CLASS="l">2356</TD><TD>            if (value == defaultValue) {</TD></TR><TR CLASS="z"><TD CLASS="l">2357</TD><TD>                properties.remove(name);</TD></TR><TR><TD CLASS="l">2358</TD><TD>            }</TD></TR><TR><TD CLASS="l">2359</TD><TD>            else {</TD></TR><TR CLASS="z"><TD CLASS="l">2360</TD><TD>                properties.put(name, String.valueOf(value));</TD></TR><TR><TD CLASS="l"><A NAME="4a">2361</A></TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">2362</TD><TD>        }</TD></TR><TR><TD CLASS="l">2363</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="f">2364</A></TD><TD>        public int getCircleSize() {</TD></TR><TR CLASS="c"><TD CLASS="l">2365</TD><TD>            return getIntProperty(&#34;circle&#34;,20);</TD></TR><TR><TD CLASS="l">2366</TD><TD>        }</TD></TR><TR><TD CLASS="l">2367</TD><TD>        public void setCircleSize(int a) {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6b">2368</A></TD><TD>            setIntProperty(&#34;circle&#34;,a,20);</TD></TR><TR CLASS="z"><TD CLASS="l">2369</TD><TD>        }</TD></TR><TR><TD CLASS="l">2370</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="17">2371</A></TD><TD>        public int getVersion() {</TD></TR><TR CLASS="c"><TD CLASS="l">2372</TD><TD>            return getIntProperty(&#34;ver&#34;,1);</TD></TR><TR><TD CLASS="l">2373</TD><TD>        }</TD></TR><TR><TD CLASS="l">2374</TD><TD>        public void setVersion(int newVersion) {</TD></TR><TR CLASS="z"><TD CLASS="l">2375</TD><TD>            setIntProperty(&#34;ver&#34;,newVersion,1);</TD></TR><TR CLASS="z"><TD CLASS="l">2376</TD><TD>        }</TD></TR><TR><TD CLASS="l">2377</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="58">2378</A></TD><TD>        /**</TD></TR><TR><TD CLASS="l">2379</TD><TD>         * can return the name or null</TD></TR><TR><TD CLASS="l">2380</TD><TD>         */</TD></TR><TR><TD CLASS="l"><A NAME="14">2381</A></TD><TD>        public String getMapName() {</TD></TR><TR CLASS="c"><TD CLASS="l">2382</TD><TD>            return (String) properties.get(&#34;name&#34;);</TD></TR><TR><TD CLASS="l">2383</TD><TD>        }</TD></TR><TR><TD CLASS="l">2384</TD><TD>        public void setMapName(String name) {</TD></TR><TR CLASS="z"><TD CLASS="l">2385</TD><TD>            if (name==null) {</TD></TR><TR CLASS="z"><TD CLASS="l">2386</TD><TD>                properties.remove(&#34;name&#34;);</TD></TR><TR><TD CLASS="l">2387</TD><TD>            }</TD></TR><TR><TD CLASS="l">2388</TD><TD>            else {</TD></TR><TR CLASS="z"><TD CLASS="l">2389</TD><TD>                properties.put(&#34;name&#34;, name);</TD></TR><TR><TD CLASS="l">2390</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">2391</TD><TD>        }</TD></TR><TR><TD CLASS="l">2392</TD><TD> </TD></TR><TR><TD CLASS="l">2393</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="56">2394</A></TD><TD>         * Gets the ImageMap</TD></TR><TR><TD CLASS="l">2395</TD><TD>         * @return URL ImageMap</TD></TR><TR><TD CLASS="l">2396</TD><TD>         */</TD></TR><TR><TD CLASS="l">2397</TD><TD>        public String getImageMap() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="49">2398</A></TD><TD>                return ImageMap;</TD></TR><TR><TD CLASS="l">2399</TD><TD>        }</TD></TR><TR><TD CLASS="l">2400</TD><TD> </TD></TR><TR><TD CLASS="l">2401</TD><TD>        public String getCardsFile() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="5">2402</A></TD><TD>                return cardsfile; //.getFile().substring( cardsfile.getFile().lastIndexOf(&#34;/&#34;)+1 );</TD></TR><TR><TD CLASS="l">2403</TD><TD>        }</TD></TR><TR><TD CLASS="l">2404</TD><TD> </TD></TR><TR><TD CLASS="l">2405</TD><TD>        public String getMapFile() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="47">2406</A></TD><TD>                return mapfile; //.getFile().substring( mapfile.getFile().lastIndexOf(&#34;/&#34;)+1 );</TD></TR><TR><TD CLASS="l">2407</TD><TD>        }</TD></TR><TR><TD CLASS="l">2408</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="6a">2409</A></TD><TD>        public Vector getCards() {</TD></TR><TR CLASS="c"><TD CLASS="l">2410</TD><TD>                return Cards;</TD></TR><TR><TD CLASS="l">2411</TD><TD>        }</TD></TR><TR><TD CLASS="l">2412</TD><TD>        public Vector getUsedCards() {</TD></TR><TR CLASS="c"><TD CLASS="l">2413</TD><TD>            return usedCards;</TD></TR><TR><TD CLASS="l">2414</TD><TD>        }</TD></TR><TR><TD CLASS="l">2415</TD><TD> </TD></TR><TR><TD CLASS="l">2416</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2417</TD><TD>         * Rolls a certain number of dice</TD></TR><TR><TD CLASS="l">2418</TD><TD>         * @param nod Number of dice you want to roll</TD></TR><TR><TD CLASS="l"><A NAME="6f">2419</A></TD><TD>         * @return int[] Returns an array which was the results of the roll, ordered from highest to lowest</TD></TR><TR><TD CLASS="l">2420</TD><TD>         */</TD></TR><TR><TD CLASS="l">2421</TD><TD>        public int[] rollDice(int nod) {</TD></TR><TR><TD CLASS="l">2422</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2423</TD><TD>                int[] dice = new int[nod];</TD></TR><TR><TD CLASS="l">2424</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2425</TD><TD>                for (int j=0; j&lt;nod; j++) {</TD></TR><TR CLASS="c"><TD CLASS="l">2426</TD><TD>                        dice[j]=r.nextInt( 6 );</TD></TR><TR><TD CLASS="l">2427</TD><TD>                }</TD></TR><TR><TD CLASS="l">2428</TD><TD> </TD></TR><TR><TD CLASS="l">2429</TD><TD>                // NOW SORT THEM, biggest at the beggining</TD></TR><TR CLASS="c"><TD CLASS="l">2430</TD><TD>                for (int i=0; i&lt;nod-1; i++) {</TD></TR><TR CLASS="c"><TD CLASS="l">2431</TD><TD>                        int temp, pos=i;</TD></TR><TR><TD CLASS="l">2432</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2433</TD><TD>                        for(int j=i+1; j&lt;nod; j++)</TD></TR><TR CLASS="c"><TD CLASS="l">2434</TD><TD>                                if(dice[j]&gt;dice[pos])</TD></TR><TR CLASS="c"><TD CLASS="l">2435</TD><TD>                                        pos=j;</TD></TR><TR CLASS="c"><TD CLASS="l">2436</TD><TD>                        temp = dice[i];</TD></TR><TR CLASS="c"><TD CLASS="l">2437</TD><TD>                        dice[i] = dice[pos];</TD></TR><TR CLASS="c"><TD CLASS="l">2438</TD><TD>                        dice[pos] = temp;</TD></TR><TR><TD CLASS="l">2439</TD><TD>                }</TD></TR><TR><TD CLASS="l">2440</TD><TD> </TD></TR><TR><TD CLASS="l">2441</TD><TD>/*</TD></TR><TR><TD CLASS="l">2442</TD><TD>System.out.print(&#34;After sorting, the dice are:\n&#34;);</TD></TR><TR><TD CLASS="l">2443</TD><TD> </TD></TR><TR><TD CLASS="l">2444</TD><TD>String str=&#34;[&#34;;</TD></TR><TR><TD CLASS="l">2445</TD><TD>if(dice.length&gt;0) {</TD></TR><TR><TD CLASS="l">2446</TD><TD>str+=(dice[0]+1);</TD></TR><TR><TD CLASS="l">2447</TD><TD>for(int i=1; i&lt;dice.length; i++)</TD></TR><TR><TD CLASS="l">2448</TD><TD>str+=&#34;|&#34;+(dice[i]+1);</TD></TR><TR><TD CLASS="l">2449</TD><TD>}</TD></TR><TR><TD CLASS="l">2450</TD><TD>System.out.print(str+&#34;]\n&#34;);</TD></TR><TR><TD CLASS="l">2451</TD><TD>*/</TD></TR><TR CLASS="c"><TD CLASS="l">2452</TD><TD>                return dice;</TD></TR><TR><TD CLASS="l">2453</TD><TD> </TD></TR><TR><TD CLASS="l">2454</TD><TD>        }</TD></TR><TR><TD CLASS="l">2455</TD><TD> </TD></TR><TR><TD CLASS="l">2456</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2457</TD><TD>         * Gets the number of continents which are owned by a player</TD></TR><TR><TD CLASS="l">2458</TD><TD>         * @param p The player you want to find continents for</TD></TR><TR><TD CLASS="l"><A NAME="5f">2459</A></TD><TD>         * @return int Return the number of continents a player owns</TD></TR><TR><TD CLASS="l">2460</TD><TD>         */</TD></TR><TR><TD CLASS="l">2461</TD><TD>        public int getNoContinentsOwned(Player p) {</TD></TR><TR><TD CLASS="l">2462</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2463</TD><TD>                int total=0;</TD></TR><TR><TD CLASS="l">2464</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2465</TD><TD>                for (int c=0; c&lt; Continents.length ; c++) {</TD></TR><TR><TD CLASS="l">2466</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2467</TD><TD>                        if ( Continents[c].isOwned(p) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2468</TD><TD>                                total++;</TD></TR><TR><TD CLASS="l">2469</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2470</TD><TD> </TD></TR><TR><TD CLASS="l">2471</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">2472</TD><TD>                return total;</TD></TR><TR><TD CLASS="l">2473</TD><TD>        }</TD></TR><TR><TD CLASS="l">2474</TD><TD> </TD></TR><TR><TD CLASS="l">2475</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2476</TD><TD>         * Gets a country</TD></TR><TR><TD CLASS="l">2477</TD><TD>         * @param name The name of the country</TD></TR><TR><TD CLASS="l">2478</TD><TD>         * @return Country Return the country you are looking for, if it exists. Otherwise returns null</TD></TR><TR><TD CLASS="l">2479</TD><TD>         *</TD></TR><TR><TD CLASS="l">2480</TD><TD>        // * @deprecated</TD></TR><TR><TD CLASS="l">2481</TD><TD> </TD></TR><TR><TD CLASS="l">2482</TD><TD>        public Country getCountry(String name) {</TD></TR><TR><TD CLASS="l">2483</TD><TD> </TD></TR><TR><TD CLASS="l">2484</TD><TD>                for (int c=0; c&lt; Countries.length ; c++) {</TD></TR><TR><TD CLASS="l">2485</TD><TD> </TD></TR><TR><TD CLASS="l">2486</TD><TD>                        if ( name.equals(Countries.[c].getName()) ) {</TD></TR><TR><TD CLASS="l">2487</TD><TD>                                return Countries[c];</TD></TR><TR><TD CLASS="l">2488</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2489</TD><TD> </TD></TR><TR><TD CLASS="l">2490</TD><TD>                }</TD></TR><TR><TD CLASS="l">2491</TD><TD>                System.out.println( &#34;ERROR: Country not found: &#34; + name );</TD></TR><TR><TD CLASS="l">2492</TD><TD>                return null;</TD></TR><TR><TD CLASS="l">2493</TD><TD> </TD></TR><TR><TD CLASS="l">2494</TD><TD>        }</TD></TR><TR><TD CLASS="l">2495</TD><TD>         */</TD></TR><TR><TD CLASS="l">2496</TD><TD> </TD></TR><TR><TD CLASS="l">2497</TD><TD> </TD></TR><TR><TD CLASS="l">2498</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2499</TD><TD>         * Tries to find a country by its name.</TD></TR><TR><TD CLASS="l">2500</TD><TD>         * This function should only be used if a user has entered the name manually!</TD></TR><TR><TD CLASS="l">2501</TD><TD>         *</TD></TR><TR><TD CLASS="l">2502</TD><TD>         * @param name The name of the country</TD></TR><TR><TD CLASS="l">2503</TD><TD>         * @return Country Return the country you are looking for, if it exists. Otherwise returns null</TD></TR><TR><TD CLASS="l">2504</TD><TD> </TD></TR><TR><TD CLASS="l">2505</TD><TD>        public Country getCountryByName(String name) {</TD></TR><TR><TD CLASS="l">2506</TD><TD> </TD></TR><TR><TD CLASS="l">2507</TD><TD>                for (int c=0; c&lt; Countries.length ; c++) {</TD></TR><TR><TD CLASS="l">2508</TD><TD> </TD></TR><TR><TD CLASS="l">2509</TD><TD>                        if ( name.equals(Countries[c].getName()) ) {</TD></TR><TR><TD CLASS="l">2510</TD><TD>                                return Countries[c];</TD></TR><TR><TD CLASS="l">2511</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2512</TD><TD> </TD></TR><TR><TD CLASS="l">2513</TD><TD>                }</TD></TR><TR><TD CLASS="l">2514</TD><TD>                System.out.println( &#34;ERROR: Country not found: &#34; + name );</TD></TR><TR><TD CLASS="l">2515</TD><TD>                return null;</TD></TR><TR><TD CLASS="l">2516</TD><TD> </TD></TR><TR><TD CLASS="l">2517</TD><TD>        }//public Country getCountryByName(String name)</TD></TR><TR><TD CLASS="l">2518</TD><TD>         */</TD></TR><TR><TD CLASS="l">2519</TD><TD> </TD></TR><TR><TD CLASS="l">2520</TD><TD> </TD></TR><TR><TD CLASS="l">2521</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="2b">2522</A></TD><TD>         * returns the country with the given color (ID)</TD></TR><TR><TD CLASS="l">2523</TD><TD>         */</TD></TR><TR><TD CLASS="l">2524</TD><TD>        public Country getCountryInt(int color) {</TD></TR><TR><TD CLASS="l">2525</TD><TD> </TD></TR><TR CLASS="p"><TD TITLE="78% line coverage (7 out of 9 instructions)" CLASS="l">2526</TD><TD TITLE="78% line coverage (7 out of 9 instructions)">                if (color &lt;= 0 || color &gt; Countries.length ) { return null; }</TD></TR><TR CLASS="c"><TD CLASS="l">2527</TD><TD>                else return Countries[color-1];</TD></TR><TR><TD CLASS="l">2528</TD><TD> </TD></TR><TR><TD CLASS="l">2529</TD><TD>        }</TD></TR><TR><TD CLASS="l">2530</TD><TD> </TD></TR><TR><TD CLASS="l">2531</TD><TD> </TD></TR><TR><TD CLASS="l">2532</TD><TD> </TD></TR><TR><TD CLASS="l">2533</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2534</TD><TD>         * returns the country with the given color (ID)</TD></TR><TR><TD CLASS="l">2535</TD><TD>         * the string is converted to an int value</TD></TR><TR><TD CLASS="l">2536</TD><TD> </TD></TR><TR><TD CLASS="l">2537</TD><TD>        public Country getCountryInt(String strId)</TD></TR><TR><TD CLASS="l">2538</TD><TD>        {</TD></TR><TR><TD CLASS="l">2539</TD><TD>                int nId = -1;</TD></TR><TR><TD CLASS="l">2540</TD><TD>                try {</TD></TR><TR><TD CLASS="l">2541</TD><TD>                        nId = Integer.parseInt( strId);</TD></TR><TR><TD CLASS="l">2542</TD><TD>                } catch( NumberFormatException e) {</TD></TR><TR><TD CLASS="l">2543</TD><TD>                        System.out.println( &#34;ERROR: Can't convert number \&#34;&#34; + strId + &#34;\&#34; to a number.&#34; );</TD></TR><TR><TD CLASS="l">2544</TD><TD>                        return null;</TD></TR><TR><TD CLASS="l">2545</TD><TD>                }</TD></TR><TR><TD CLASS="l">2546</TD><TD> </TD></TR><TR><TD CLASS="l">2547</TD><TD>                return getCountryInt(nId);</TD></TR><TR><TD CLASS="l">2548</TD><TD>        }//public Country getCountryInt(String nId)</TD></TR><TR><TD CLASS="l">2549</TD><TD>         */</TD></TR><TR><TD CLASS="l">2550</TD><TD> </TD></TR><TR><TD CLASS="l">2551</TD><TD> </TD></TR><TR><TD CLASS="l">2552</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2553</TD><TD>         * Gets a cards</TD></TR><TR><TD CLASS="l">2554</TD><TD>         * @param name</TD></TR><TR><TD CLASS="l"><A NAME="48">2555</A></TD><TD>         * @return Card Return the card you are looking for, if it exists. Otherwise returns null</TD></TR><TR><TD CLASS="l">2556</TD><TD>         */</TD></TR><TR><TD CLASS="l">2557</TD><TD>        public Card[] getCards(String name1,String name2,String name3) {</TD></TR><TR><TD CLASS="l">2558</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2559</TD><TD>                Card[] c = new Card[3];</TD></TR><TR><TD CLASS="l">2560</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2561</TD><TD>                Vector playersCards = new Vector( currentPlayer.getCards() );</TD></TR><TR><TD CLASS="l">2562</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2563</TD><TD>                jumppoint: for (int a=0;a&lt;3;a++) {</TD></TR><TR><TD CLASS="l">2564</TD><TD> </TD></TR><TR><TD CLASS="l">2565</TD><TD>                        String name;</TD></TR><TR><TD CLASS="l">2566</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2567</TD><TD>                        if (a==0) { name = name1; }</TD></TR><TR CLASS="c"><TD CLASS="l">2568</TD><TD>                        else if (a==1) { name = name2; }</TD></TR><TR CLASS="c"><TD CLASS="l">2569</TD><TD>                        else { name = name3; } // if (a==2)</TD></TR><TR><TD CLASS="l">2570</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2571</TD><TD>                        for (int b=0; b&lt; playersCards.size(); b++) {</TD></TR><TR><TD CLASS="l">2572</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2573</TD><TD>                                if (name.equals(Card.WILDCARD) &amp;&amp; name.equals( ((Card)playersCards.elementAt(b)).getName() ) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2574</TD><TD>                                        c[a] = (Card) playersCards.remove(b);</TD></TR><TR CLASS="c"><TD CLASS="l">2575</TD><TD>                                        continue jumppoint;</TD></TR><TR><TD CLASS="l">2576</TD><TD>                                }</TD></TR><TR CLASS="c"><TD CLASS="l">2577</TD><TD>                                else if ( (Country)((Card)playersCards.elementAt(b)).getCountry() != null &amp;&amp; name.equals( ((Country)((Card)playersCards.elementAt(b)).getCountry()).getColor()+&#34;&#34; ) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2578</TD><TD>                                        c[a] = (Card) playersCards.remove(b);</TD></TR><TR CLASS="c"><TD CLASS="l">2579</TD><TD>                                        continue jumppoint;</TD></TR><TR><TD CLASS="l">2580</TD><TD>                                }</TD></TR><TR><TD CLASS="l">2581</TD><TD> </TD></TR><TR><TD CLASS="l">2582</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2583</TD><TD> </TD></TR><TR><TD CLASS="l">2584</TD><TD>                }</TD></TR><TR><TD CLASS="l">2585</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2586</TD><TD>                return c;</TD></TR><TR><TD CLASS="l">2587</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="41">2588</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">2589</TD><TD> </TD></TR><TR><TD CLASS="l">2590</TD><TD>        public Card findCardAndRemoveIt(String name) {</TD></TR><TR><TD CLASS="l">2591</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2592</TD><TD>                int cardIndex = -1;</TD></TR><TR><TD CLASS="l">2593</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2594</TD><TD>                for (int c=0; c&lt; Cards.size() ; c++) {</TD></TR><TR CLASS="c"><TD CLASS="l">2595</TD><TD>                        Card theCard = ((Card)Cards.elementAt(c));</TD></TR><TR><TD CLASS="l">2596</TD><TD> </TD></TR><TR><TD CLASS="l">2597</TD><TD>                        // if we are looking for a wildcard, and this card is also a wildcard</TD></TR><TR CLASS="c"><TD CLASS="l">2598</TD><TD>                        if (name.equals(Card.WILDCARD) &amp;&amp; name.equals( theCard.getName() ) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2599</TD><TD>                                cardIndex = c;</TD></TR><TR CLASS="c"><TD CLASS="l">2600</TD><TD>                                break;</TD></TR><TR><TD CLASS="l">2601</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2602</TD><TD>                        // if we are not looking for a wildcard and the card matches the country</TD></TR><TR CLASS="c"><TD CLASS="l">2603</TD><TD>                        else if (theCard.getCountry() != null &amp;&amp; name.equals( String.valueOf( theCard.getCountry().getColor() ) ) ) {</TD></TR><TR CLASS="c"><TD CLASS="l">2604</TD><TD>                                cardIndex = c;</TD></TR><TR CLASS="c"><TD CLASS="l">2605</TD><TD>                                break;</TD></TR><TR><TD CLASS="l">2606</TD><TD>                        }</TD></TR><TR><TD CLASS="l">2607</TD><TD> </TD></TR><TR><TD CLASS="l">2608</TD><TD>                }</TD></TR><TR><TD CLASS="l">2609</TD><TD> </TD></TR><TR><TD CLASS="l">2610</TD><TD>                // find the card and remove it</TD></TR><TR CLASS="c"><TD CLASS="l">2611</TD><TD>                Card theCard = (Card)Cards.remove(cardIndex);</TD></TR><TR CLASS="c"><TD CLASS="l">2612</TD><TD>                Cards.trimToSize(); // not sure if this is needed</TD></TR><TR><TD CLASS="l">2613</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2614</TD><TD>                recycleUsedCards();</TD></TR><TR><TD CLASS="l">2615</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2616</TD><TD>                return theCard;</TD></TR><TR><TD CLASS="l">2617</TD><TD> </TD></TR><TR><TD CLASS="l">2618</TD><TD>        }</TD></TR><TR><TD CLASS="l">2619</TD><TD> </TD></TR><TR><TD CLASS="l">2620</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2621</TD><TD>         * This method should be called after:</TD></TR><TR><TD CLASS="l">2622</TD><TD>         * &lt;ul&gt;</TD></TR><TR><TD CLASS="l">2623</TD><TD>         * &lt;li&gt;a card was removed from normal cards</TD></TR><TR><TD CLASS="l">2624</TD><TD>         * &lt;li&gt;a card was added to the used cards</TD></TR><TR><TD CLASS="l"><A NAME="1a">2625</A></TD><TD>         * &lt;/ul&gt;</TD></TR><TR><TD CLASS="l">2626</TD><TD>         */</TD></TR><TR><TD CLASS="l">2627</TD><TD>        private boolean recycleUsedCards() {</TD></TR><TR><TD CLASS="l">2628</TD><TD>            // if we have removed the last card, and we want to reuse our cards, then we add all the used ones into the current cards vector</TD></TR><TR CLASS="c"><TD CLASS="l">2629</TD><TD>            Vector used = getUsedCards();</TD></TR><TR CLASS="p"><TD TITLE="54% line coverage (7 out of 13 instructions)" CLASS="l">2630</TD><TD TITLE="54% line coverage (7 out of 13 instructions)">            if (Cards.isEmpty() &amp;&amp; recycleCards &amp;&amp; !used.isEmpty()) {</TD></TR><TR CLASS="z"><TD CLASS="l">2631</TD><TD>                Cards.addAll(used);</TD></TR><TR CLASS="z"><TD CLASS="l">2632</TD><TD>                used.clear();</TD></TR><TR CLASS="z"><TD CLASS="l">2633</TD><TD>                return true;</TD></TR><TR><TD CLASS="l">2634</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">2635</TD><TD>            return false;</TD></TR><TR><TD CLASS="l">2636</TD><TD>        }</TD></TR><TR><TD CLASS="l">2637</TD><TD> </TD></TR><TR><TD CLASS="l">2638</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2639</TD><TD>         * Gets a cards</TD></TR><TR><TD CLASS="l">2640</TD><TD>         * @param s The number you want to parse</TD></TR><TR><TD CLASS="l">2641</TD><TD>         * @return int The number you wanted</TD></TR><TR><TD CLASS="l"><A NAME="1b">2642</A></TD><TD>         * @throws NumberFormatException You cannot parse the string</TD></TR><TR><TD CLASS="l">2643</TD><TD>         */</TD></TR><TR><TD CLASS="l">2644</TD><TD>        public static int getNumber(String s) {</TD></TR><TR><TD CLASS="l">2645</TD><TD>                try {</TD></TR><TR CLASS="c"><TD CLASS="l">2646</TD><TD>                        return Integer.parseInt(s);</TD></TR><TR><TD CLASS="l">2647</TD><TD>                }</TD></TR><TR CLASS="z"><TD CLASS="l">2648</TD><TD>                catch (NumberFormatException e) {</TD></TR><TR CLASS="z"><TD CLASS="l">2649</TD><TD>                        return -1;</TD></TR><TR><TD CLASS="l">2650</TD><TD>                }</TD></TR><TR><TD CLASS="l">2651</TD><TD>        }</TD></TR><TR><TD CLASS="l">2652</TD><TD> </TD></TR><TR><TD CLASS="l">2653</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="63">2654</A></TD><TD>         * Gets the number of players in the game</TD></TR><TR><TD CLASS="l">2655</TD><TD>         * @return int Return the number of number of players</TD></TR><TR><TD CLASS="l">2656</TD><TD>         */</TD></TR><TR><TD CLASS="l">2657</TD><TD>        public int getNoPlayers() {</TD></TR><TR CLASS="c"><TD CLASS="l">2658</TD><TD>                return Players.size();</TD></TR><TR><TD CLASS="l">2659</TD><TD>        }</TD></TR><TR><TD CLASS="l">2660</TD><TD> </TD></TR><TR><TD CLASS="l">2661</TD><TD>        /**</TD></TR><TR><TD CLASS="l">2662</TD><TD>         * Gets the countries in the game</TD></TR><TR><TD CLASS="l"><A NAME="4e">2663</A></TD><TD>         * @return Vector Return the Countries in the current game</TD></TR><TR><TD CLASS="l">2664</TD><TD>         */</TD></TR><TR><TD CLASS="l">2665</TD><TD>        public Country[] getCountries() {</TD></TR><TR><TD CLASS="l">2666</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2667</TD><TD>                return Countries;</TD></TR><TR><TD CLASS="l">2668</TD><TD>        }</TD></TR><TR><TD CLASS="l">2669</TD><TD> </TD></TR><TR><TD CLASS="l">2670</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="4d">2671</A></TD><TD>         * Gets the continents in the game</TD></TR><TR><TD CLASS="l">2672</TD><TD>         * @return Vector Return the Continents in the current game</TD></TR><TR><TD CLASS="l">2673</TD><TD>         */</TD></TR><TR><TD CLASS="l">2674</TD><TD>        public Continent[] getContinents() {</TD></TR><TR CLASS="c"><TD CLASS="l">2675</TD><TD>                return Continents;</TD></TR><TR><TD CLASS="l">2676</TD><TD>        }</TD></TR><TR><TD CLASS="l">2677</TD><TD> </TD></TR><TR><TD CLASS="l">2678</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="60">2679</A></TD><TD>         * Gets the number of countries in the game</TD></TR><TR><TD CLASS="l">2680</TD><TD>         * @return int Return the number of countries in the current game</TD></TR><TR><TD CLASS="l">2681</TD><TD>         */</TD></TR><TR><TD CLASS="l">2682</TD><TD>        public int getNoCountries() {</TD></TR><TR CLASS="c"><TD CLASS="l">2683</TD><TD>                return Countries.length;</TD></TR><TR><TD CLASS="l"><A NAME="7">2684</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">2685</TD><TD> </TD></TR><TR><TD CLASS="l">2686</TD><TD>        public int getNoContinents() {</TD></TR><TR><TD CLASS="l">2687</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">2688</TD><TD>                return Continents.length;</TD></TR><TR><TD CLASS="l">2689</TD><TD> </TD></TR><TR><TD CLASS="l">2690</TD><TD>        }</TD></TR><TR><TD CLASS="l">2691</TD><TD> </TD></TR><TR><TD CLASS="l">2692</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="5b">2693</A></TD><TD>         * Gets the allocated Missions in the game</TD></TR><TR><TD CLASS="l">2694</TD><TD>         * @return Vector Return the Missions in the current game</TD></TR><TR><TD CLASS="l">2695</TD><TD>         */</TD></TR><TR><TD CLASS="l">2696</TD><TD>        public Vector getMissions() {</TD></TR><TR CLASS="c"><TD CLASS="l">2697</TD><TD>                return Missions;</TD></TR><TR><TD CLASS="l">2698</TD><TD>        }</TD></TR><TR><TD CLASS="l">2699</TD><TD> </TD></TR><TR><TD CLASS="l">2700</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="62">2701</A></TD><TD>         * Gets the number of Missions in the game</TD></TR><TR><TD CLASS="l">2702</TD><TD>         * @return int Return the number of Missions in the game</TD></TR><TR><TD CLASS="l">2703</TD><TD>         */</TD></TR><TR><TD CLASS="l">2704</TD><TD>        public int getNoMissions() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="6">2705</A></TD><TD>                return Missions.size();</TD></TR><TR><TD CLASS="l">2706</TD><TD>        }</TD></TR><TR><TD CLASS="l">2707</TD><TD> </TD></TR><TR><TD CLASS="l">2708</TD><TD>        public int getNoCards() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="d">2709</A></TD><TD>                return Cards.size();</TD></TR><TR><TD CLASS="l">2710</TD><TD>        }</TD></TR><TR><TD CLASS="l">2711</TD><TD> </TD></TR><TR><TD CLASS="l">2712</TD><TD>        public boolean isRecycleCards() {</TD></TR><TR CLASS="z"><TD CLASS="l">2713</TD><TD>                return recycleCards;</TD></TR><TR><TD CLASS="l">2714</TD><TD>        }</TD></TR><TR><TD CLASS="l">2715</TD><TD> </TD></TR><TR><TD CLASS="l">2716</TD><TD>        /**</TD></TR><TR><TD CLASS="l"><A NAME="72">2717</A></TD><TD>         * Set the Default Map and Cards File</TD></TR><TR><TD CLASS="l">2718</TD><TD>         */</TD></TR><TR><TD CLASS="l">2719</TD><TD>        public static void setDefaultMapAndCards(String a,String b) {</TD></TR><TR><TD CLASS="l">2720</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">2721</TD><TD>                defaultMap=a;</TD></TR><TR CLASS="c"><TD CLASS="l">2722</TD><TD>                defaultCards=b;</TD></TR><TR><TD CLASS="l">2723</TD><TD> </TD></TR><TR><TD CLASS="l">2724</TD><TD>                // not needed as is reset each time a new RiskGame object is created</TD></TR><TR><TD CLASS="l">2725</TD><TD>                //net.yura.domination.engine.translation.MapTranslator.setMap( a );</TD></TR><TR><TD CLASS="l">2726</TD><TD>                //net.yura.domination.engine.translation.MapTranslator.setCards( b );</TD></TR><TR><TD CLASS="l">2727</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="51">2728</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">2729</TD><TD> </TD></TR><TR><TD CLASS="l">2730</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="50">2731</A></TD><TD>        public static String getDefaultMap() {</TD></TR><TR CLASS="c"><TD CLASS="l">2732</TD><TD>                return defaultMap;</TD></TR><TR><TD CLASS="l">2733</TD><TD>        }</TD></TR><TR><TD CLASS="l">2734</TD><TD>        public static String getDefaultCards() {</TD></TR><TR CLASS="c"><TD CLASS="l">2735</TD><TD>                return defaultCards;</TD></TR><TR><TD CLASS="l">2736</TD><TD>        }</TD></TR><TR><TD CLASS="l">2737</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="46">2738</A></TD><TD>        /**</TD></TR><TR><TD CLASS="l">2739</TD><TD>         * @return the current Card Mode</TD></TR><TR><TD CLASS="l">2740</TD><TD>         */</TD></TR><TR><TD CLASS="l">2741</TD><TD>        public int getCardMode() {</TD></TR><TR CLASS="c"><TD CLASS="l">2742</TD><TD>            return cardMode;</TD></TR><TR><TD CLASS="l"><A NAME="b">2743</A></TD><TD>        }</TD></TR><TR><TD CLASS="l">2744</TD><TD> </TD></TR><TR><TD CLASS="l">2745</TD><TD>        public static int getRandomColor() {</TD></TR><TR><TD CLASS="l">2746</TD><TD> </TD></TR><TR CLASS="z"><TD CLASS="l">2747</TD><TD>                return HSBtoRGB( (float)Math.random(), 0.5F, 1.0F );</TD></TR><TR><TD CLASS="l">2748</TD><TD> </TD></TR><TR><TD CLASS="l">2749</TD><TD>        }</TD></TR><TR><TD CLASS="l">2750</TD><TD> </TD></TR><TR><TD CLASS="l">2751</TD><TD>     /**</TD></TR><TR><TD CLASS="l"><A NAME="1">2752</A></TD><TD>      * copy and paste from</TD></TR><TR><TD CLASS="l">2753</TD><TD>      * @see java.awt.Color#HSBtoRGB(float, float, float)</TD></TR><TR><TD CLASS="l">2754</TD><TD>      */</TD></TR><TR><TD CLASS="l">2755</TD><TD>    public static int HSBtoRGB(float hue, float saturation, float brightness) {</TD></TR><TR CLASS="z"><TD CLASS="l">2756</TD><TD>        int r = 0, g = 0, b = 0;</TD></TR><TR CLASS="z"><TD CLASS="l">2757</TD><TD>            if (saturation == 0) {</TD></TR><TR CLASS="z"><TD CLASS="l">2758</TD><TD>            r = g = b = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR><TD CLASS="l">2759</TD><TD>        } else {</TD></TR><TR CLASS="z"><TD CLASS="l">2760</TD><TD>            float h = (hue - (float)Math.floor(hue)) * 6.0f;</TD></TR><TR CLASS="z"><TD CLASS="l">2761</TD><TD>            float f = h - (float)java.lang.Math.floor(h);</TD></TR><TR CLASS="z"><TD CLASS="l">2762</TD><TD>            float p = brightness * (1.0f - saturation);</TD></TR><TR CLASS="z"><TD CLASS="l">2763</TD><TD>            float q = brightness * (1.0f - saturation * f);</TD></TR><TR CLASS="z"><TD CLASS="l">2764</TD><TD>            float t = brightness * (1.0f - (saturation * (1.0f - f)));</TD></TR><TR CLASS="z"><TD CLASS="l">2765</TD><TD>            switch ((int) h) {</TD></TR><TR><TD CLASS="l">2766</TD><TD>            case 0:</TD></TR><TR CLASS="z"><TD CLASS="l">2767</TD><TD>                r = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2768</TD><TD>                g = (int) (t * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2769</TD><TD>                b = (int) (p * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2770</TD><TD>                break;</TD></TR><TR><TD CLASS="l">2771</TD><TD>            case 1:</TD></TR><TR CLASS="z"><TD CLASS="l">2772</TD><TD>                r = (int) (q * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2773</TD><TD>                g = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2774</TD><TD>                b = (int) (p * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2775</TD><TD>                break;</TD></TR><TR><TD CLASS="l">2776</TD><TD>            case 2:</TD></TR><TR CLASS="z"><TD CLASS="l">2777</TD><TD>                r = (int) (p * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2778</TD><TD>                g = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2779</TD><TD>                b = (int) (t * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2780</TD><TD>                break;</TD></TR><TR><TD CLASS="l">2781</TD><TD>            case 3:</TD></TR><TR CLASS="z"><TD CLASS="l">2782</TD><TD>                r = (int) (p * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2783</TD><TD>                g = (int) (q * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2784</TD><TD>                b = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2785</TD><TD>                break;</TD></TR><TR><TD CLASS="l">2786</TD><TD>            case 4:</TD></TR><TR CLASS="z"><TD CLASS="l">2787</TD><TD>                r = (int) (t * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2788</TD><TD>                g = (int) (p * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2789</TD><TD>                b = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2790</TD><TD>                break;</TD></TR><TR><TD CLASS="l">2791</TD><TD>            case 5:</TD></TR><TR CLASS="z"><TD CLASS="l">2792</TD><TD>                r = (int) (brightness * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2793</TD><TD>                g = (int) (p * 255.0f + 0.5f);</TD></TR><TR CLASS="z"><TD CLASS="l">2794</TD><TD>                b = (int) (q * 255.0f + 0.5f);</TD></TR><TR><TD CLASS="l">2795</TD><TD>                break;</TD></TR><TR><TD CLASS="l">2796</TD><TD>            }</TD></TR><TR><TD CLASS="l">2797</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5e">2798</A></TD><TD>        return 0xff000000 | (r &lt;&lt; 16) | (g &lt;&lt; 8) | (b &lt;&lt; 0);</TD></TR><TR><TD CLASS="l">2799</TD><TD>    }</TD></TR><TR><TD CLASS="l">2800</TD><TD> </TD></TR><TR><TD CLASS="l">2801</TD><TD>    public int getNoAttackDice() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="61">2802</A></TD><TD>        if ( attacker.getArmies() &gt; 4 ) { return 3; }</TD></TR><TR CLASS="c"><TD CLASS="l">2803</TD><TD>        else { return attacker.getArmies()-1; }</TD></TR><TR><TD CLASS="l">2804</TD><TD>    }</TD></TR><TR><TD CLASS="l">2805</TD><TD>    public int getNoDefendDice() {</TD></TR><TR CLASS="c"><TD CLASS="l">2806</TD><TD>        if ( defender.getArmies() &gt; maxDefendDice ) { return maxDefendDice; }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="1d">2807</A></TD><TD>        else { return defender.getArmies(); }</TD></TR><TR><TD CLASS="l">2808</TD><TD>    }</TD></TR><TR><TD CLASS="l">2809</TD><TD> </TD></TR><TR><TD CLASS="l">2810</TD><TD>    private void readObject(java.io.ObjectInputStream in) throws IOException, ClassNotFoundException {</TD></TR><TR CLASS="c"><TD CLASS="l">2811</TD><TD>            in.defaultReadObject();</TD></TR><TR CLASS="c"><TD CLASS="l">2812</TD><TD>            this.r = new Random();</TD></TR><TR CLASS="c"><TD CLASS="l">2813</TD><TD>            if (this.mapfile != null &amp;&amp; gameState!=STATE_NEW_GAME) {</TD></TR><TR><TD CLASS="l">2814</TD><TD>            try {</TD></TR><TR CLASS="c"><TD CLASS="l">2815</TD><TD>                    loadMap(false, null);</TD></TR><TR><TD CLASS="l">2816</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">2817</TD><TD>            catch (Exception e1) {</TD></TR><TR><TD CLASS="l">2818</TD><TD>                // stupid fix for android 1.6</TD></TR><TR CLASS="z"><TD CLASS="l">2819</TD><TD>                IOException ex = new IOException(e1.toString());</TD></TR><TR CLASS="z"><TD CLASS="l">2820</TD><TD>                ex.initCause(e1);</TD></TR><TR CLASS="z"><TD CLASS="l">2821</TD><TD>                throw ex;</TD></TR><TR CLASS="c"><TD CLASS="l">2822</TD><TD>            }</TD></TR><TR><TD CLASS="l"><A NAME="e">2823</A></TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">2824</TD><TD>    }</TD></TR><TR><TD CLASS="l">2825</TD><TD> </TD></TR><TR><TD CLASS="l">2826</TD><TD>    void setCardMode(int cardMode) {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="8">2827</A></TD><TD>                this.cardMode = cardMode;</TD></TR><TR CLASS="z"><TD CLASS="l">2828</TD><TD>        }</TD></TR><TR><TD CLASS="l">2829</TD><TD> </TD></TR><TR><TD CLASS="l">2830</TD><TD>    public Player getPlayer(String name) {</TD></TR><TR CLASS="z"><TD CLASS="l">2831</TD><TD>        for (Player player: (List&lt;Player&gt;)Players) {</TD></TR><TR CLASS="z"><TD CLASS="l">2832</TD><TD>            if (player.getName().equals(name)) {</TD></TR><TR CLASS="z"><TD CLASS="l">2833</TD><TD>                return player;</TD></TR><TR><TD CLASS="l">2834</TD><TD>            }</TD></TR><TR CLASS="z"><TD CLASS="l">2835</TD><TD>        }</TD></TR><TR CLASS="z"><TD CLASS="l">2836</TD><TD>        return null;</TD></TR><TR><TD CLASS="l">2837</TD><TD>    }</TD></TR><TR><TD CLASS="l">2838</TD><TD> </TD></TR><TR><TD CLASS="l">2839</TD><TD>}</TD></TR></TABLE><P></P><TABLE WIDTH="100%" CLASS="hdft" CELLSPACING="0"><TR><TD CLASS="nv">[<A HREF="../index.html">all classes</A>][<A HREF="1e.html">net.yura.domination.engine.core</A>]</TD></TR><TR><TD CLASS="tl"><A HREF="http://sourceforge.net/projects/emma">EMMA 2.0.5312</A> (C) Vladimir Roubtsov</TD></TR></TABLE></BODY></HTML>